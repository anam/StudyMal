/*!CK:3197072626!*//*1441232537,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["7ciAS"]); }

__d("AdminSignatureConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SETTING_ATTACH_TO_POST:"shouldAttachToPost",SETTING_ATTACH_TO_COMMENT:"shouldAttachToComment",SETTING_ATTACH_TO_MESSAGE:"shouldAttachToMessage",SETTING_EVER_PROMPTED:"everPromptedUser",SETTING_SIGNATURE_TEXT:"signature",FIELD_PAGE_ID:"pageID",FIELD_SIGNATURE_OPTION_FIELD:"signatureOption",FIELD_SIGNATURE_OPTION_VALUE_FIELD:"signatureOptionValue",FIELD_SIGNATURE_TEXT_FIELD:"signatureText",EVENT_ADMIN_SIGNATURE_PROMPTED:"AdminSignature\/prompted",EVENT_ADMIN_SIGNATURE_SETTING_CHANGED:"AdminSignatureSetting\/changed"};},null,{});
__d("ChatPerfEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ASYNC_REQUEST:"async_request",SIDEBAR_FROM_CLIENT_TTI:"sidebar_from_client_tti",SIDEBAR_FROM_SERVER_TTI:"sidebar_from_server_tti",TTI:"tti",CHAT_CONVERSATION_TTI:"chat_conversation_tti"};},null,{});
__d("PagesPrivateReplyConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={Status:{REPLYABLE:"replyable",ALREADY_REPLIED:"already_replied",RECIPIENT_FILTER:"recipient_filter",EXPIRED:"expired",NOT_USER_CREATED:"not_user_created"},Type:{COMMENT_PAGE_POST:"comment_page_post",COMMENT_WALL_POST:"comment_wall_post",COMMENT_REVIEW:"comment_review",REVIEW:"review",WALL_POST:"wall_post"}};},null,{});
__d("StickerInterfaces",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MESSAGES:"messages",COMMENTS:"comments",STICKERED:"stickered",COMPOSER:"composer",POSTS:"posts",FRAMES:"frames"};},null,{});
__d("UFIActionTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={STORY:{CHANGE_ORDER_MODE:"story_change_order_mode",COMMENTS_ARRIVED:"story_comments_arrived",HIDE_REPLIES:"story_hide_replies",PAGE_IN_COMMENTS:"story_page_in_comments",SPAM_FETCHED:"story_spam_fetched",TOGGLE_LIKE:"story_toggle_like"},COMMENT:{EDIT:"comment_edit",REMOVE:"comment_remove",REMOVE_PREVIEW:"comment_remove_preview",TOGGLE_INLINE_BAN:"comment_toggle_inline_ban",TOGGLE_LIKE:"comment_toggle_like",TOGGLE_MARK_AS_SPAM:"comment_toggle_mark_as_spam",TRANSLATE:"comment_translate"},ADD_COMMENT:{CANCEL:"add_comment_cancel",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit"}};},null,{});
__d("UFIConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LikeReaction:1,UFIActionType:{COMMENT_LIKE:"fa-type:comment-like",COMMENT_SET_SPAM:"fa-type:mark-spam",DELETE_COMMENT:"fa-type:delete-comment",DISABLE_COMMENTS:"fa-type:disable-comments",LIVE_DELETE_COMMENT:"fa-type:live-delete-comment",LIKE_ACTION:"fa-type:like",SUBSCRIBE_ACTION:"fa-type:subscribe",REMOVE_PREVIEW:"fa-type:remove-preview",MARK_COMMENT_SPAM:"fa-type:mark-spam",CONFIRM_COMMENT_REMOVAL:"fa-type:confirm-remove",TRANSLATE_COMMENT:"fa-type:translate-comment",COMMENT_LIKECOUNT_UPDATE:"fa-type:comment-likecount-update",ADD_COMMENT_ACTION:"fa-type:add-comment",REACTION:"fa-type:reaction"},UFICommentOrderingMode:{CHRONOLOGICAL:"chronological",RANKED_THREADED:"ranked_threaded",TOPLEVEL:"toplevel",RECENT_ACTIVITY:"recent_activity",FEATURED:"featured",FILTERED:"filtered",LIVE_STREAMING:"live_streaming"},UFIFeedbackSourceType:{PROFILE:0,NEWS_FEED:1,OBJECT:2,MOBILE:3,EMAIL:4,PROFILE_APPROVAL:10,TICKER:12,NONE:13,INTERN:14,ADS:15,EVENT_GOING_FLYOUT:16,PHOTOS_SNOWLIFT:17,PHOTOS_SNOWFLAKE:20,USER_TIMELINE:21,PAGE_TIMELINE:22,SEARCH:23,PAGE_TAB:24,TIMELINE_COLLECTION:25,TOPIC_CONVERSATION:26,ON_THIS_DAY:27},UFIPayloadSourceType:{UNKNOWN:0,INITIAL_SERVER:1,LIVE_SEND:2,USER_ACTION:3,COLLAPSE_ACTION:7,ENDPOINT_LIKE:10,ENDPOINT_COMMENT_LIKE:11,ENDPOINT_ADD_COMMENT:12,ENDPOINT_EDIT_COMMENT:13,ENDPOINT_DELETE_COMMENT:14,ENDPOINT_HIDE_COMMENT:16,ENDPOINT_REMOVE_PREVIEW:17,ENDPOINT_ID_COMMENT_FETCH:18,ENDPOINT_COMMENT_FETCH:19,ENDPOINT_TRANSLATE_COMMENT:20,ENDPOINT_BAN:21,ENDPOINT_SUBSCRIBE:22,ENDPOINT_COMMENT_LIKECOUNT_UPDATE:23,ENDPOINT_DISABLE_COMMENTS:24,ENDPOINT_ACTOR_CHANGE:25,ENDPOINT_REACTION:26},UFIStatus:{DELETED:"status:deleted",SPAM:"status:spam",SPAM_DISPLAY:"status:spam-display",LIVE_DELETED:"status:live-deleted",FAILED_ADD:"status:failed-add",FAILED_EDIT:"status:failed-edit",PENDING_EDIT:"status:pending-edit"},UFIPaging:{TOP:"top",BOTTOM:"bottom",ALL:"all"},attachmentTruncationLength:80,commentTruncationLength:420,commentTruncationMaxLines:3,commentTruncationPercent:.6,commentURLTruncationLength:60,infiniteScrollRangeForQANDAPermalinks:1000,minCommentsForOrderingModeSelector:2,unavailableCommentKey:"unavailable_comment_key"};},null,{});
__d('BaseAsyncLoader',['KeyedCallbackManager','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={};function k(m,n,o){var p=new h(),q=false,r=[];function s(){if(!r.length||q)return;q=true;i(u,0);}function t(x){q=false;x.forEach(p.unsubscribe.bind(p));s();}function u(){var x={},y=[];r=r.filter(function(aa){var ba=p.getUnavailableResources(aa);if(ba.length){ba.forEach(function(ca){x[ca]=true;});y.push(aa);return true;}return false;});var z=Object.keys(x);if(z.length){o(m,z,y,v.bind(null,y),w.bind(null,y));}else q=false;}function v(x,y){var z=y.payload[n]||y.payload;p.addResourcesAndExecute(z);t(x);}function w(x){t(x);}return {get:function(x,y){var z=p.executeOrEnqueue(x,y),aa=p.getUnavailableResources(z);if(aa.length){r.push(z);s();}},getCachedKeys:function(){return Object.keys(p.getAllResources());},getNow:function(x){return p.getResource(x)||null;},set:function(x){p.addResourcesAndExecute(x);}};}function l(m,n){throw 'BaseAsyncLoader can\'t be instantiated';}Object.assign(l.prototype,{_getLoader:function(){if(!j[this._endpoint])j[this._endpoint]=k(this._endpoint,this._type,this.send);return j[this._endpoint];},get:function(m,n){return this._getLoader().get(m,n);},getCachedKeys:function(){return this._getLoader().getCachedKeys();},getNow:function(m){return this._getLoader().getNow(m);},reset:function(){j[this._endpoint]=null;},set:function(m){this._getLoader().set(m);}});f.exports=l;},null);
__d('LogHistory',['CircularBuffer','createArrayFromMixed'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=500,k={},l=new h(j);function m(u,v,w){var event=w.shift();l.write({date:Date.now(),level:u,category:v,event:event,args:w});}function n(u){'use strict';this.category=u;}n.prototype.debug=function(event){'use strict';m('debug',this.category,i(arguments));return this;};n.prototype.log=function(event){'use strict';m('log',this.category,i(arguments));return this;};n.prototype.warn=function(event){'use strict';m('warn',this.category,i(arguments));return this;};n.prototype.error=function(event){'use strict';m('error',this.category,i(arguments));return this;};function o(u){if(!k[u])k[u]=new n(u);return k[u];}function p(){return l.read();}function q(){l.clear();}function r(u){}function s(u){return u.map(function(v){var w=/\d\d:\d\d:\d\d/.exec(new Date(v.date));return [w&&w[0],v.level,v.category,v.event,JSON.stringify(v.args)].join(' | ');}).join('\n');}var t={MAX:j,getInstance:o,getEntries:p,clearEntries:q,toConsole:r,formatEntries:s};f.exports=t;},null);
__d('AjaxLoader',['AsyncRequest','BaseAsyncLoader','LogHistory'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=j.getInstance('ajax_loader');function l(m,n){this._endpoint=m;this._type=n;}Object.assign(l.prototype,i.prototype);l.prototype.send=function(m,n,o,p,q){new h().setURI(m).setData({ids:n}).setMethod('POST').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(r){k.debug('fetch_success',{payload:r.payload});p(r);}).setErrorHandler(function(r){q();k.error('fetch_error',{error_type:r.errorSummary,error_text:r.errorDescription});}).send();k.debug('fetch_start',{ids:n,endpoint:m});};f.exports=l;},null);
__d('ChannelConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='channel/',i={CHANNEL_MANUAL_RECONNECT_DEFER_MSEC:2000,MUTE_WARNING_TIME_MSEC:25000,WARNING_COUNTDOWN_THRESHOLD_MSEC:15000,ON_SHUTDOWN:h+'shutdown',ON_INVALID_HISTORY:h+'invalid_history',ON_CONFIG:h+'config',ON_ENTER_STATE:h+'enter_state',ON_EXIT_STATE:h+'exit_state',ATTEMPT_RECONNECT:h+'attempt_reconnect',RTI_SESSION:h+'new_rti_address',GET_RTI_SESSION_REQUEST:h+'rti_session_request',SKYWALKER:h+'skywalker',OK:'ok',ERROR:'error',ERROR_MAX:'error_max',ERROR_MISSING:'error_missing',ERROR_MSG_TYPE:'error_msg_type',ERROR_SHUTDOWN:'error_shutdown',ERROR_STALE:'error_stale',SYS_OWNER:'sys_owner',SYS_NONOWNER:'sys_nonowner',SYS_ONLINE:'sys_online',SYS_OFFLINE:'sys_offline',SYS_TIMETRAVEL:'sys_timetravel',HINT_AUTH:'shutdown auth',HINT_CONN:'shutdown conn',HINT_DISABLED:'shutdown disabled',HINT_INVALID_STATE:'shutdown invalid state',HINT_MAINT:'shutdown maint',HINT_UNSUPPORTED:'shutdown unsupported',reason_Unknown:0,reason_AsyncError:1,reason_TooLong:2,reason_Refresh:3,reason_RefreshDelay:4,reason_UIRestart:5,reason_NeedSeq:6,reason_PrevFailed:7,reason_IFrameLoadGiveUp:8,reason_IFrameLoadRetry:9,reason_IFrameLoadRetryWorked:10,reason_PageTransitionRetry:11,reason_IFrameLoadMaxSubdomain:12,reason_NoChannelInfo:13,reason_NoChannelHost:14,CAPABILITY_VOIP_INTEROP:8,CAPABILITY_VIDEO:32,FANTAIL_DEBUG:'DEBUG',FANTAIL_WARN:'WARN',FANTAIL_INFO:'INFO',FANTAIL_ERROR:'ERROR',SUBSCRIBE:'subscribe',UNSUBSCRIBE:'unsubscribe',getArbiterType:function(j){return h+'message:'+j;},getSkywalkerArbiterType:function(j){return h+'skywalker:'+j;}};f.exports=i;},null);
__d("XChatUserInfoAllAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/chat\/user_info_all\/",{viewer:{type:"Int",required:true}});},null,{});
__d('ShortProfilesBootstrapper',['AsyncRequest','BanzaiODS','CurrentUser','JSLogger','Promise','XChatUserInfoAllAsyncController'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();'use strict';var n=5,o=10000,p=m.getURIBuilder().setInt('viewer',j.getID()).getURI(),q=k.create('short_profiles');function r(s){this.$ShortProfilesBootstrapper1=s;this.$ShortProfilesBootstrapper2=new l((function(t,u){this.$ShortProfilesBootstrapper3=t;this.$ShortProfilesBootstrapper4=u;}).bind(this));this.$ShortProfilesBootstrapper5=false;this.$ShortProfilesBootstrapper6=null;this.$ShortProfilesBootstrapper7=0;this.$ShortProfilesBootstrapper8=0;this.$ShortProfilesBootstrapper9=0;this.$ShortProfilesBootstrapper10=false;this.$ShortProfilesBootstrapper11=false;}r.prototype.fetchAll=function(){this.$ShortProfilesBootstrapper12();if(this.$ShortProfilesBootstrapper5||this.$ShortProfilesBootstrapper6)return this.$ShortProfilesBootstrapper2;if(this.$ShortProfilesBootstrapper7>=n){this.$ShortProfilesBootstrapper13();return this.$ShortProfilesBootstrapper2;}this.$ShortProfilesBootstrapper7++;this.$ShortProfilesBootstrapper14();this.$ShortProfilesBootstrapper6=new h(p).setHandler((function(s){this.$ShortProfilesBootstrapper6=null;this.$ShortProfilesBootstrapper5=true;this.$ShortProfilesBootstrapper15();this.$ShortProfilesBootstrapper1(s.payload);this.$ShortProfilesBootstrapper3();}).bind(this)).setErrorHandler((function(){this.$ShortProfilesBootstrapper6=null;this.$ShortProfilesBootstrapper8++;this.$ShortProfilesBootstrapper16();}).bind(this)).setTimeoutHandler(o,(function(){this.$ShortProfilesBootstrapper6=null;this.$ShortProfilesBootstrapper9++;this.$ShortProfilesBootstrapper17();}).bind(this)).setAllowCrossPageTransition(true);this.$ShortProfilesBootstrapper6.send();return this.$ShortProfilesBootstrapper2;};r.prototype.isBootstrapped=function(){return this.$ShortProfilesBootstrapper5;};r.prototype.isBootstrapping=function(){return !!this.$ShortProfilesBootstrapper6;};r.prototype.getAttemptCount=function(){return this.$ShortProfilesBootstrapper7;};r.prototype.getErrorCount=function(){return this.$ShortProfilesBootstrapper8;};r.prototype.getTimeoutCount=function(){return this.$ShortProfilesBootstrapper9;};r.prototype.$ShortProfilesBootstrapper12=function(){if(!this.$ShortProfilesBootstrapper10){q.log('bootstrap_start');i.bumpEntityKey('chat.web','typeahead.bootstrap.starts');this.$ShortProfilesBootstrapper10=true;}};r.prototype.$ShortProfilesBootstrapper14=function(){q.log('bootstrap_attempt');i.bumpEntityKey('chat.web','typeahead.bootstrap.attempts');};r.prototype.$ShortProfilesBootstrapper15=function(){q.log('bootstrap_success');i.bumpEntityKey('chat.web','typeahead.bootstrap.successes');if(this.$ShortProfilesBootstrapper7>1)i.bumpEntityKey('chat.web','typeahead.bootstrap.successes_after_retries');};r.prototype.$ShortProfilesBootstrapper16=function(){q.log('bootstrap_error');i.bumpEntityKey('chat.web','typeahead.bootstrap.errors');};r.prototype.$ShortProfilesBootstrapper17=function(){q.log('bootstrap_timeout');i.bumpEntityKey('chat.web','typeahead.bootstrap.timeouts');};r.prototype.$ShortProfilesBootstrapper13=function(){if(!this.$ShortProfilesBootstrapper11){q.log('bootstrap_giveup');i.bumpEntityKey('chat.web','typeahead.bootstrap.giveups');this.$ShortProfilesBootstrapper11=true;this.$ShortProfilesBootstrapper4();}};f.exports=r;},null);
__d("XChatUserInfoAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/chat\/user_info\/",{ids:{type:"IntVector",defaultValue:[]}});},null,{});
__d('ShortProfiles',['AjaxLoader','Arbiter','JSLogger','ShortProfilesBootstrapper','XChatUserInfoAsyncController'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=null,n=new h(l.getURIBuilder().getURI().toString(),'profiles'),o={get:function(q,r){this.getMulti([q],function(s){r(s[q],q);});},getMulti:function(q,r){function s(t){r&&r(p(t));}n.get(q,s);},getNow:function(q){return p(n.getNow(q)||null);},getNowUnsafe:function(q){return n.getNow(q)||null;},getCachedProfileIDs:function(){return n.getCachedKeys();},hasAll:function(){return !!m&&m.isBootstrapped();},fetchAll:function(){if(!m)m=new k(function(q){n.set(q);});return m.fetchAll();},set:function(q,r){var s={};s[q]=r;this.setMulti(s);},setMulti:function(q){n.set(p(q));}};function p(q){return JSON.parse(JSON.stringify(q));}i.subscribe(j.DUMP_EVENT,function(q,r){var s=o.getCachedProfileIDs(),t=j.getEntries(function(u){return (u.cat=='short_profiles'||u.cat=='chat_typeahead');});r.chat_typeahead={bootstrapped:m&&m.isBootstrapped(),bootstrapping:m&&m.isBootstrapping(),bootstrap_attempts:m&&m.getAttemptCount(),bootstrap_errors:m&&m.getErrorCount(),bootstrap_timeouts:m&&m.getTimeoutCount(),entries:s,entry_count:s.length,history:t};});f.exports=o;},null);
__d('UFICommentVPVs',['Map','MarauderLogger','Set'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();'use strict';var k=new h();function l(o,p){i.log('comment_vpv',undefined,null,'comment',p);if(!k.has(o))k.set(o,new j());k.get(o).add(p);}function m(o,p){if(k.has(o))return k.get(o).has(p);return false;}var n={logVPV:l,hasLoggedVPV:m};f.exports=n;},null);
__d('ReactDispatcher',['Dispatcher','ReactUpdates'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,h);k=j&&j.prototype;l.prototype.dispatch=function(m){i.batchedUpdates((function(){k.dispatch.call(this,m);}).bind(this));};function l(){j.apply(this,arguments);}f.exports=l;},null);
__d('UFIDispatcher',['ReactDispatcher'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h;},null);
__d('UFIAddCommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i={cancel:function(j){return {type:h.ADD_COMMENT.CANCEL,instanceid:j};},retrySubmit:function(j){return {type:h.ADD_COMMENT.RETRY_SUBMIT,comment:j};},submitEdit:function(j,k,l){return {type:h.ADD_COMMENT.SUBMIT_EDIT,comment:j,commentData:k,target:l};}};f.exports=i;},null);
__d('UFICommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i={edit:function(j){return {type:h.COMMENT.EDIT,comment:j};},remove:function(j,k,l){return {type:h.COMMENT.REMOVE,comment:j,target:k,onConfirm:l};},removePreview:function(j,k){return {type:h.COMMENT.REMOVE_PREVIEW,comment:j,target:k};},toggleLike:function(j,k){return {type:h.COMMENT.TOGGLE_LIKE,comment:j,like:!j.hasviewerliked,target:k};},translate:function(j,k){return {type:h.COMMENT.TRANSLATE,comment:j,target:k};},markAsSpam:function(j,k){return {type:h.COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:true,comment:j,target:k};},markAsNotSpam:function(j,k){return {type:h.COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:false,comment:j,target:k};},inlineBan:function(j,k,l){return {type:h.COMMENT.TOGGLE_INLINE_BAN,is_banned:true,comment:j,target:k,ownerid:l};},undoInlineBan:function(j,k,l){return {type:h.COMMENT.TOGGLE_INLINE_BAN,is_banned:false,comment:j,target:k,ownerid:l};}};f.exports=i;},null);
__d('UFIStoryAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i={changeOrderingMode:function(j){return {type:h.STORY.CHANGE_ORDER_MODE,mode:j};},commentsArrived:function(j,k,l,m){return {type:h.STORY.COMMENTS_ARRIVED,newOffset:j,newLength:k,oldOffset:l,oldLength:m};},hideReplies:function(j){return {type:h.STORY.HIDE_REPLIES,targetID:j};},pageInComments:function(j,k,l){return {type:h.STORY.PAGE_IN_COMMENTS,targetID:j,direction:k,nextRange:l};},toggleLike:function(j){return {type:h.STORY.TOGGLE_LIKE,target:j};},spamFetched:function(j,k){return {type:h.STORY.SPAM_FETCHED,commentIDs:j,parentCommentID:k};}};f.exports=i;},null);
__d('ClickPointIdentifiersDEPRECATED',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={types:{TIMELINE_SEE_LIKERS:'timeline:seelikes'},getUserActionID:function(i){return '{"ua_id":"'+i+'"}';}};f.exports=h;},null);
__d('NumberFormat',['NumberFormatConfig'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=/(\d{3})(?=\d)/g;function j(m){return (''+m).split('').reverse().join('');}function k(m,n){if(Math.abs(m).toString().length<h.minDigitsForThousandsSeparator)return m.toString();var o=j(m);return j(o.replace(i,'$1'+n));}var l={formatIntegerWithDelimiter:k,formatInteger:function(m){return k(m,h.numberDelimiter);}};f.exports=l;},null);
__d('UFIBlingItem.react',['React','NumberFormat','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'UFIBlingItem',propTypes:{contextArgs:m.object.isRequired,count:m.number.isRequired,countreduced:m.string,allowText:m.bool,className:m.string,iconClassName:m.string,itemKey:m.string},render:function(){var o=l(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),p=i.formatIntegerWithDelimiter(this.props.count,this.props.contextArgs.numberdelimiter||','),q=p,r=this.props.contextArgs.ufiexperiments||{};if(this.props.allowText||r.showSlimUFI)switch(this.props.itemKey){case 'like':if(r.showSlimUFI)q=k._({"Like":"{count} Like","Likes":"{count} Likes"},[k.param('count',r.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:q),k['enum'](this.props.count===1?'Like':'Likes',{Like:'Like',Likes:'Likes'})]);break;case 'comment':if(r.showSlimUFI)q=k._({"Comment":"{count} Comment","Comments":"{count} Comments"},[k.param('count',r.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:q),k['enum'](this.props.count===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);break;case 'reshare':if(this.props.contextArgs.reshareedu||r.showSlimUFI)q=k._({"Share":"{count} Share","Shares":"{count} Shares"},[k.param('count',r.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:q),k['enum'](this.props.count===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]);break;}var s=h.createElement('span',{className:"UFIBlingBoxText"+(r.showSlimUFI?' '+"UFIBlingBoxTextRevised":'')},q);if(!r.showSlimUFI){return (h.createElement('span',null,h.createElement('i',{className:o}),s));}else return s;}});f.exports=n;},null);
__d('UFIBlingBox.react',['React','UFIBlingItem.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'UFIBlingBox',propTypes:{contextArgs:l.object.isRequired,'data-ft':l.string,'data-comment-prelude-ref':l.string,comments:l.number,commentsreduced:l.string,likes:l.number,likesreduced:l.string,nfb:l.number,onClick:l.func,permalink:l.string,reshares:l.number,resharesreduced:l.string,readOnly:l.bool},render:function(){var n=[],o='',p=this.props.contextArgs.ufiexperiments||{};if(this.props.likes){n.push(h.createElement(i,{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:'UFIBlingBoxLikeIcon',itemKey:'like',key:'like'}));o+=this.props.likes==1?k._("1 like"):k._({"*":"{count} likes"},[k.param('count',this.props.likes,[0])]);o+=' ';}if(this.props.comments){n.push(h.createElement(i,{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:'UFIBlingBoxCommentIcon',itemKey:'comment',key:'comment'}));o+=this.props.comments==1?k._("1 comment"):k._({"*":"{count} comments"},[k.param('count',this.props.comments,[0])]);o+=' ';}if(this.props.reshares){n.push(h.createElement(i,{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxReshareIcon',itemKey:'reshare',key:'reshare'}));o+=this.props.reshares==1?k._("1 share"):k._({"*":"{count} shares"},[k.param('count',this.props.reshares,[0])]);}var q="UFIBlingBox"+(this.props.readOnly?' '+"UFIBlingBoxReadOnly":'')+(' '+"uiBlingBox")+(' '+"feedbackBling")+(p.showSlimUFI?' '+"UFIBlingBoxRevised":''),r;if(this.props.readOnly){r=h.createElement('span',{className:q,'aria-label':o},n);}else r=h.createElement('a',{className:q,href:this.props.permalink,'data-ft':this.props['data-ft'],'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'aria-label':o,onClick:this.props.onClick,rel:'ignore'},n);return r;}});f.exports=m;},null);
__d('UFICentralUpdates',['Arbiter','BanzaiLogger','BanzaiODS','ChannelConstants','LiveTimer','ShortProfiles','UFIConstants','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();j.setEntitySample('feedback',.0001);var p=0,q={},r={},s={},t={},u=[];h.subscribe(k.getArbiterType('live-data'),function(z,aa){if(aa&&aa.obj){var ba=aa.obj,ca=ba.comments||[];ca.forEach(function(fa){fa.timestamp.text=o._("a few seconds ago");});var da='update';if(ca.length){da='comment';}else if(ba.actions&&ba.actions.length){var ea=ba.actions[0]&&ba.actions[0].actiontype;if(ea===n.UFIActionType.LIKE_ACTION){da='like';}else if(ea===n.UFIActionType.COMMENT_LIKE)da='comment_like';}j.bumpEntityKey('feedback','livesend_'+da+'_received');if(da==='like'||da==='comment')i.log('LiveWWWFeedbackLoggerConfig',{mechanism:'livesend',event:'receive_payload',update_type:da});y.handleUpdate(n.UFIPayloadSourceType.LIVE_SEND,ba);}});function v(){if(!p){var z=s,aa=q,ba=r,ca=t;s={};q={};r={};t={};if(Object.keys(z).length)x('feedback-id-changed',z);if(Object.keys(aa).length)x('feedback-updated',aa);if(Object.keys(ba).length)x('comments-updated',ba);if(Object.keys(ca).length)x('instance-updated',ca);u.pop();}}function w(){if(u.length){return u[u.length-1];}else return n.UFIPayloadSourceType.UNKNOWN;}function x(event,z){y.inform(event,{updates:z,payloadSource:w()});}var y=Object.assign(new h(),{handleUpdate:function(z,aa){if(Object.keys(aa).length)this.synchronizeInforms((function(){u.push(z);var ba=babelHelpers._extends({payloadsource:w()},aa);this.inform('update-feedback',ba);this.inform('update-comment-lists',ba);this.inform('update-comments',ba);this.inform('update-actions',ba);(aa.profiles||[]).forEach(function(ca){m.set(ca.id,ca);});if(aa.servertime)l.restart(aa.servertime);}).bind(this));},didUpdateFeedback:function(z){q[z]=true;v();},didUpdateComment:function(z){r[z]=true;v();},didUpdateFeedbackID:function(z,aa){s[z]=aa;v();},didUpdateInstanceState:function(z,aa){if(!t[z])t[z]={};t[z][aa]=true;v();},synchronizeInforms:function(z){p++;try{z();}catch(aa){throw aa;}finally{p--;v();}}});f.exports=y;},null);
__d('UFICommentLink.react',['Image.react','React','TrackingNodes','emptyFunction','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'UFICommentLink',propTypes:{ufiExperiments:n.object,onClick:n.func,ajaxify:n.string,rel:n.string},getDefaultProps:function(){return {ufiExperiments:{},onClick:k};},render:function(){var p=this.props.ufiExperiments,q=l._("Comment"),r=l._("Leave a comment"),s='{ "tn": "'+j.encodeTN(j.types.COMMENT_LINK)+'", "type": 24 }',t=null;if(p.showSlimUFI)t=i.createElement(h,{className:'UFICommentLinkIcon',src:m('/images/ufi/fbfeed/comment_gray.png')});return (i.createElement('a',{className:'comment_link',role:'button',href:'#',title:r,ajaxify:this.props.ajaxify,rel:this.props.rel,onClick:this.props.onClick,'data-ft':s},t,q));}});f.exports=o;},null);
__d('UFICollapse',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='ufi/collapse';function j(m){return i+'/'+m;}function k(m,n){h.inform(j(m),n);}var l={show:function(m){k(m,{action:'show'});},hide:function(m){k(m,{action:'hide'});},toggle:function(m){k(m,{action:'toggle'});},subscribe:function(m,n){return h.subscribe(j(m),function(o,p){return n(p);});}};f.exports=l;},null);
__d('UFIFeedbackTargets',['BanzaiLogger','ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFIConstants'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=new j();function n(x){var y={};x.forEach(function(z){var aa=babelHelpers._extends({},z);delete aa.commentlist;delete aa.commentcount;y[z.entidentifier]=aa;k.didUpdateFeedback(z.entidentifier);});m.addResourcesAndExecute(y);}function o(x,y){for(var z=0;z<x.length;z++){var aa=x[z];switch(aa.actiontype){case l.UFIActionType.LIKE_ACTION:q(aa,y);break;case l.UFIActionType.SUBSCRIBE_ACTION:r(aa);break;case l.UFIActionType.DISABLE_COMMENTS:s(aa);break;case l.UFIActionType.REACTION:t(aa);break;}}}function p(x){for(var y=0;y<x.length;y++){var z=x[y];if(z.orig_ftentidentifier)v(z.orig_ftentidentifier,z.ftentidentifier);}}function q(x,y){var z=u(x);if(z){if(y===l.UFIPayloadSourceType.LIVE_SEND)h.log('LiveWWWFeedbackLoggerConfig',{event:'update_view',update_type:'like'});x.hasviewerliked=!!x.hasviewerliked;if(x.clientid&&i.isExistingClientID(x.clientid)&&x.hasviewerliked!=z.hasviewerliked)return;z.likecount=x.likecount||0;z.likesentences=x.likesentences;if(x.actorid==z.actorforpost){z.hasviewerliked=x.hasviewerliked;}else if(x.hasviewerliked!=z.hasviewerliked){z.likesentences={current:x.likesentences.alternate,alternate:x.likesentences.current};if(z.hasviewerliked){z.likecount++;}else z.likecount--;}if(x.actorid!=z.actorforpost)z.likesentences.isunseen=true;n([z]);}}function r(x){var y=u(x);if(y){x.hasviewersubscribed=!!x.hasviewersubscribed;if(x.clientid&&i.isExistingClientID(x.clientid)&&x.hasviewersubscribed!=y.hasviewersubscribed)return;if(x.actorid==y.actorforpost)y.hasviewersubscribed=x.hasviewersubscribed;n([y]);}}function s(x){var y=u(x);if(y){y.cancomment=!!x.cancomment;n([y]);}}function t(x){var y=u(x);if(y){if(x.clientid&&i.isExistingClientID(x.clientid)&&x.viewerreaction!==y.viewerreaction)return;if(y.actorforpost==x.actorid||y.viewerreaction==x.viewerreaction){y.reactioncount=x.reactioncount;y.reactioncountmap=x.reactioncountmap;y.reactioncountreduced=x.reactioncountreduced;y.reactorids=x.reactorids;y.userreactions=x.userreactions;y.viewerreaction=x.viewerreaction;}n([y]);}}function u(x){if(x.orig_entidentifier)v(x.orig_entidentifier,x.entidentifier);return m.getResource(x.entidentifier);}function v(x,y){var z=m.getResource(x);if(z){m.setResource(x,null);z.entidentifier=y;m.setResource(y,z);k.didUpdateFeedbackID(x,y);}}var w={getFeedbackTarget:function(x,y){var z=m.executeOrEnqueue(x,y),aa=m.getUnavailableResources(z);aa.length;return z;},getActorIDForFeedbackTargetIfExists:function(x){var y=m.getResource(x);return y?y.actorforpost:null;},handleNFB:function(x,y){var z=m.getResource(x);if(z){z.nfbcount=y||0;n([z]);}},unsubscribe:function(x){m.unsubscribe(x);}};k.subscribe('update-feedback',function(x,y){var z=y.feedbacktargets;if(z&&z.length)n(z);});k.subscribe('update-actions',function(x,y){if(y.actions&&y.actions.length)o(y.actions,y.payloadsource);});k.subscribe('update-comments',function(x,y){if(y.comments&&y.comments.length)p(y.comments);});f.exports=w;},null);
__d('UFIInstanceState',['UFICentralUpdates'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={};function j(l){if(!i[l])i[l]={};}var k={getKeyForInstance:function(l,m){j(l);return i[l][m];},updateState:function(l,m,n){j(l);i[l][m]=n;h.didUpdateInstanceState(l,m);},updateStateField:function(l,m,n,o){var p=this.getKeyForInstance(l,m)||{};p[n]=o;this.updateState(l,m,p);}};f.exports=k;},null);
__d('UFILikeLink.react',['React','Image.react','TrackingNodes','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=h.PropTypes,o=h.createClass({displayName:'UFILikeLink',propTypes:{likeAction:n.bool,ufiExperiments:n.object,onClick:n.func},getDefaultProps:function(){return {ufiExperiments:{}};},onClick:function(p,q){p.preventDefault();this.props.onClick(p,q);},render:function(){var p=this.props.ufiExperiments,q=this.props.likeAction||p.showSlimUFI?l._("Like"):l._("Unlike"),r=j.getTrackingInfo(this.props.likeAction?j.types.LIKE_LINK:j.types.UNLIKE_LINK),s=this.props.likeAction?l._("Like this"):l._("Unlike this"),t=null;if(p.showSlimUFI)t=h.createElement(i,{className:'UFILikeLinkIcon',src:this.props.likeAction?m('/images/ufi/fbfeed/like_gray.png'):m('/images/ufi/fbfeed/liked.png')});return (h.createElement('a',{className:"UFILikeLink"+(p.showSlimUFI&&!this.props.likeAction?' '+"UFILinkBright":''),href:'#',role:'button','aria-label':s,'aria-live':'polite',onBlur:this.props.onBlur,onClick:this.onClick,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseUp:this.props.onMouseUp,'data-ft':r},t,q));}});f.exports=o;},null);
__d('ActorURI',['ActorURIConfig','URI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={create:function(k,l){return new i(k).addQueryData(h.PARAMETER_ACTOR,l);}};j.PARAMETER_ACTOR=h.PARAMETER_ACTOR;f.exports=j;},null);
__d('requireWeak',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){if(Object.prototype.toString.call(i)==='[object Array]'){if(i.length!==1)throw new Error('requireWeak only supports a one-arg array for push safety');i=i[0];}e.call(null,[i],j);}f.exports=h;},null);
__d('Nectar',['Env','getContextualParent'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(m){if(!m.nctr)m.nctr={};}function k(m){if(h.module||!m)return h.module;var n={fbpage_fan_confirm:true,photos_snowlift:true},o;while(m&&m.getAttribute){var p=m.getAttribute('id');if(p!=null&&p.startsWith('pagelet_'))return p;if(!o&&n[p])o=p;m=i(m);}return o;}var l={addModuleData:function(m,n){var o=k(n);if(o){j(m);m.nctr._mod=o;}},addImpressionID:function(m){if(h.impid){j(m);m.nctr._impid=h.impid;}}};f.exports=l;},null);
__d('MercuryLoggingHelper',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={obfuscateThread:function(i){var j=babelHelpers._extends({},i);if(i&&i.snippet&&i.snippet.length>5)j.snippet=i.snippet.substr(0,5)+'...';return j;},obfuscateMessage:function(i){var j=babelHelpers._extends({},i);if(i&&i.body&&i.body.length>5)j.body=i.body.substr(0,5)+'...';return j;}};f.exports=h;},null);
__d('MercuryServerDispatcher',['AsyncRequest','BanzaiLogger','ChatPerfEvent','CurrentUser','LogHistory','MercuryLoggingHelper','areJSONRepresentationsEqual','debounceAcrossTransitions','performanceAbsoluteNow'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();'use strict';var q={},r=l.getInstance('mercury_server_dispatcher'),s=false,t={IMMEDIATE:'immediate',IDEMPOTENT:'idempotent',BATCH_SUCCESSIVE:'batch-successive',BATCH_SUCCESSIVE_UNIQUE:'batch-successive-unique',BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR:'batch-successive-piggyback-retry',BATCH_DEFERRED_MULTI:'batch-deferred-multi',BATCH_CONDITIONAL:'batch-conditional',DEFAULT_ENDPOINT_ID:'mercuryServerDispatcherDefaultEndpointID',registerEndpoints:function(w){for(var x in w){var y=w[x],z=y.request_user_id||k.getID(),aa=y.endpoint_id||t.DEFAULT_ENDPOINT_ID;if(!q[x])q[x]={};if(!q[x][z])q[x][z]={};q[x][z][aa]=new u(x,y);}},trySend:function(w,x,y,z,aa){z=z||k.getID();aa=aa||t.DEFAULT_ENDPOINT_ID;q[w][z][aa].trySend(x,y);}};function u(w,x){var y=x.mode||t.IMMEDIATE;switch(y){case t.IMMEDIATE:case t.IDEMPOTENT:case t.BATCH_SUCCESSIVE:case t.BATCH_SUCCESSIVE_UNIQUE:case t.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR:case t.BATCH_DEFERRED_MULTI:case t.BATCH_CONDITIONAL:break;default:throw new Error('Invalid MercuryServerDispatcher mode '+y);}this._endpoint=w;this._mode=y;this._customHeader=x.customHeader;this._requestUserID=x.request_user_id;this._combineData=x.batch_function;this._combineDataIf=x.batch_if;this._batchSizeLimit=x.batch_size_limit;this._batches=[];this._handler=x.handler;this._errorHandler=x.error_handler;this._transportErrorHandler=x.transport_error_handler||x.error_handler;this._connectionRetries=x.connection_retries||0;this._timeoutHandler=x.timeout_handler;this._timeout=x.timeout;this._serverDialogCancelHandler=x.server_dialog_cancel_handler||x.error_handler;this._deferredSend=o(this._batchSend,0,this);}Object.assign(u.prototype,{_inFlight:0,_handler:null,_errorHandler:null,_transportErrorHandler:null,_timeoutHandler:null,_timeout:null,_serverDialogCancelHandler:null,_combineData:null,trySend:function(w,x){if(s)return;if(w===undefined)w=null;var y=x||this._mode;if(y==t.IMMEDIATE){this._send(w);}else if(y==t.IDEMPOTENT){if(!this._inFlight)this._send(w);}else if(y==t.BATCH_SUCCESSIVE||y==t.BATCH_SUCCESSIVE_UNIQUE){if(!this._inFlight){this._send(w);}else this._batchData(w);}else if(y==t.BATCH_CONDITIONAL){var z=this._batches[0]&&this._batches[0].getData();if(this._inFlight&&(this._combineDataIf(this._pendingRequestData,w)||this._combineDataIf(z,w))){this._batchData(w);}else this._send(w);}else if(y==t.BATCH_DEFERRED_MULTI){this._batchData(w);this._deferredSend();}else if(y==t.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR){this._batchData(w);if(!this._inFlight)this._batchSend();}},_send:function(w){this._inFlight++;this._pendingRequestData=babelHelpers._extends({},w);if(this._requestUserID!=k.getID())w.request_user_id=this._requestUserID;var x=[];if(w&&w.message_batch)for(var y=0;y<w.message_batch.length;y++){var z=m.obfuscateMessage(w.message_batch[y]);x.push(z);}var aa=x.length?babelHelpers._extends({},w,{message_batch:x}):w;r.log('send',{endpoint:this._endpoint,data:aa,inflight_count:this._inFlight});var ba=p(),ca=new h(this._endpoint).setData(w).setOption('retries',this._connectionRetries).setHandler((function(da){i.log('ChatPerfLoggerConfig',{event:j.ASYNC_REQUEST,duration:p()-ba,endpoint:this._endpoint});this._handleResponse(da);}).bind(this)).setErrorHandler(this._handleError.bind(this)).setTransportErrorHandler(this._handleTransportError.bind(this)).setServerDialogCancelHandler(this._handleServerDialogCancel.bind(this)).setAllowCrossPageTransition(true);if(this._customHeader)ca.setRequestHeader(this._customHeader.name,this._customHeader.value);if(this._timeout&&this._timeoutHandler)ca.setTimeoutHandler(this._timeout,this._handleTimeout.bind(this));ca.send();},_batchData:function(w,x){if(this._mode==t.BATCH_SUCCESSIVE_UNIQUE&&this._pendingRequestData!==undefined&&n(w,this._pendingRequestData)){return;}else{var y=this._batches.length-1;if(y>=0&&!this._hasReachedBatchLimit(this._batches[y])){x?this._batches[y].combineWithOlder(w,this._combineData):this._batches[y].combineWith(w,this._combineData);}else this._batches.push(new v(w));r.debug('batch',{endpoint:this._endpoint,batches:this._batches,batch_limit:this._batchSizeLimit});}},_hasReachedBatchLimit:function(w){return this._batchSizeLimit&&w.getSize()>=this._batchSizeLimit;},_batchSend:function(){if(this._batches[0]){this._send(this._batches[0].getData());this._batches.shift();}},_handleResponse:function(w){this._inFlight--;r.log('response',{endpoint:this._endpoint,inflight_count:this._inFlight});var x=w.getPayload();s=x&&x.kill_chat;if(s)r.log('killswitch_enabled',{endpoint:this._endpoint,inflight_count:this._inFlight});if(x&&x.error_payload){if(this._errorHandler)this._errorHandler(w);}else this._handler&&this._handler(x,w.getRequest());if(this._mode==t.BATCH_SUCCESSIVE||this._mode==t.BATCH_SUCCESSIVE_UNIQUE||this._mode==t.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR||this._mode==t.BATCH_CONDITIONAL)this._batchSend();delete this._pendingRequestData;},_postErrorHandler:function(){r.error('error',{endpoint:this._endpoint,inflight_count:this._inFlight-1});this._inFlight--;var w=this._mode;if(w==t.BATCH_SUCCESSIVE||w==t.BATCH_SUCCESSIVE_UNIQUE||w==t.BATCH_CONDITIONAL){this._batchSend();}else if(w==t.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR)if(this._batches[0]){this._batchData(this._pendingRequestData,true);this._batchSend();}else this._batchData(this._pendingRequestData,true);delete this._pendingRequestData;},_handleError:function(w){this._errorHandler&&this._errorHandler(w);this._postErrorHandler();},_handleTransportError:function(w){this._transportErrorHandler&&this._transportErrorHandler(w);this._postErrorHandler();},_handleTimeout:function(w){this._timeoutHandler&&this._timeoutHandler(w);this._postErrorHandler();},_handleServerDialogCancel:function(w){this._serverDialogCancelHandler&&this._serverDialogCancelHandler(w);this._postErrorHandler();}});function v(w){this._data=w;this._size=1;}Object.assign(v.prototype,{getData:function(){return this._data;},getSize:function(){return this._size;},combineWith:function(w,x){this._data=x(this._data,w);this._size++;},combineWithOlder:function(w,x){this._data=x(w,this._data);this._size++;}});f.exports=t;},null);
__d('UFICommentList',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFIConstants','UFIFeedbackTargets','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();'use strict';var n=m({actorID:true});function o(p){this.count=0;this.deletedComments={};this.deletedCount=0;this.dataSource=new i();this.feedbackTargetID=p;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink="";this.commentPermalinks={};l.getFeedbackTarget(this.feedbackTargetID,(function(q){this.actorID=q.actorforpost;this.basePermalink=q.permalink;}).bind(this));}o.prototype.addOrUpdateComment=function(p){if(p.islocal){this.$UFICommentList1(p.id);}else this.$UFICommentList2(p.id,p.clientid,p.legacyid);j.didUpdateFeedback(this.feedbackTargetID);};o.prototype.$UFICommentList1=function(p){this.dataSource.setResource(this.count,p);this.count++;};o.prototype.$UFICommentList2=function(p,q,r){var s=q&&h.isExistingClientID(q),t=this.dataSource.getAllResources(),u={};for(var v in t){var w=t[v];u[w]=v;}if(s&&q in u){u[p]=u[q];var x=u[q];this.dataSource.setResource(x,p);}else if(!u[p]&&q)this.$UFICommentList1(p);if(r&&p in u)this.commentPermalinks[p]=this.buildCommentPermalink(p,r,u[p]);};o.prototype.addCommentIDs=function(p,q,r){var s={};for(var t=0;t<q;t++)s[p+t]=r[t]||k.unavailableCommentKey;this.dataSource.addResourcesAndExecute(s);j.didUpdateFeedback(this.feedbackTargetID);return this;};o.prototype.getComments=function(p,q,r,s){var t=[];for(var u=0;u<q;u++)t.push(p+u);var v=this.dataSource.getUnavailableResourcesFromRequest(t);if(v.length){var w=Math.min.apply(Math,v),x=Math.max.apply(Math,v),y=w,z=x-w+1;if(y<this.lastRequestedOffset||y+z>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=y;this.lastRequestedLength=z;this.fetchComments(y,z,r);}}else this.dataSource.executeOrEnqueue(t,this.deferredCallback.bind(this,p,q,s));};o.prototype.fetchComments=function(p,q,r){};o.prototype.deferredCallback=function(p,q,r,s){};o.prototype.reset=function(){var p=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return p;};o.prototype.deleteComment=function(p){if(!(p in this.deletedComments)){this.deletedComments[p]=true;this.deletedCount++;}};o.prototype.updateCommentCount=function(p){this.count=p;this.deletedCount=0;return this;};o.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};o.prototype.getCommentCount=function(){return this.count;};o.prototype.getDeletedCount=function(){return this.deletedCount;};o.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount;};o.prototype.getBasePermalink=function(){return this.basePermalink;};o.prototype.buildCommentPermalink=function(p,q,r){};o.prototype.getPermalinkForComment=function(p){return this.commentPermalinks[p];};o.isValidContextPropertyForReset=function(p){return p in n;};f.exports=o;},null);
__d('UFICommentOrdering',['UFIConstants'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i={inverted:function(j){switch(j){case h.UFICommentOrderingMode.RECENT_ACTIVITY:case h.UFICommentOrderingMode.RANKED_THREADED:case h.UFICommentOrderingMode.FILTERED:case h.UFICommentOrderingMode.LIVE_STREAMING:return true;}return false;}};f.exports=i;},null);
__d('UFIComments',['BanzaiLogger','ClientIDs','ImmutableObject','UFICentralUpdates','UFIConstants','UFIInstanceState','invariant','randomInt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();'use strict';var p={},q={};function r(ga){return ga in q?q[ga]:ga;}function s(ga,ha){ga.forEach(function(ia){var ja=ia.ftentidentifier,ka=l.UFIPayloadSourceType,la=ia.clientid,ma=false,na=babelHelpers._extends({},ia);if(la){delete na.clientid;ma=i.isExistingClientID(la);if(ma&&q[la]){h.log('LiveWWWFeedbackLoggerConfig',{event:'update_view',update_type:'comment'});return;}}if(ha===ka.LIVE_SEND||ha===ka.USER_ACTION||ha===ka.ENDPOINT_ADD_COMMENT||ha===ka.ENDPOINT_EDIT_COMMENT)na.isunseen=true;if(ha===ka.LIVE_SEND)na.islive=true;if(ha===ka.ENDPOINT_COMMENT_FETCH||ha===ka.ENDPOINT_ID_COMMENT_FETCH)na.fromfetch=true;if(ma){if(p[la].ufiinstanceid)m.updateStateField(p[la].ufiinstanceid,'locallycomposed',ia.id,true);na.ufiinstanceid=p[la].ufiinstanceid;q[la]=ia.id;p[ia.id]=p[la];delete p[la];k.didUpdateComment(la);}fa.setComment(ia.id,new j(na));k.didUpdateComment(ia.id);k.didUpdateFeedback(ja);});}function t(ga){for(var ha=0;ha<ga.length;ha++){var ia=ga[ha];switch(ia.actiontype){case l.UFIActionType.LIKE_ACTION:if(fa.getComment(ia.entidentifier))u(ia.clientid,ia.entidentifier,ia.hasviewerliked,ia.likecount);break;case l.UFIActionType.COMMENT_LIKE:u(ia.clientid,ia.commentid,ia.viewerliked,ia.likecount);break;case l.UFIActionType.DELETE_COMMENT:y(ia);break;case l.UFIActionType.LIVE_DELETE_COMMENT:z(ia);break;case l.UFIActionType.REMOVE_PREVIEW:aa(ia);break;case l.UFIActionType.COMMENT_SET_SPAM:ba(ia);break;case l.UFIActionType.CONFIRM_COMMENT_REMOVAL:ca(ia);break;case l.UFIActionType.TRANSLATE_COMMENT:w(ia);break;case l.UFIActionType.COMMENT_LIKECOUNT_UPDATE:v(ia);break;}}}function u(ga,ha,ia,ja){var ka=fa.getComment(ha);if(ka){var la={},ma=ga&&i.isExistingClientID(ga);if(!ma){la.hasviewerliked=ia;la.likecount=ja;}la.likeconfirmhash=o(0,1024);ea(ha,la);}}function v(ga){var ha=fa.getComment(ga.commentid);if(ha&&ga.hasviewerliked===ha.hasviewerliked){var ia={likecount:ga.likecount,likeconfirmhash:o(0,1024)};ea(ga.commentid,ia);}}function w(ga){var ha=ga.commentid,ia=fa.getComment(ha);if(ia){var ja={translatedbody:ga.translatedbody,translatorapp:ga.translatorapp};ea(ha,ja);}}function x(ga){var ha={reportLink:ga.reportLink,commenterIsFOF:ga.commenterIsFOF,userIsMinor:ga.userIsMinor,giveFeedbackLink:ga.giveFeedbackLink};return ha;}function y(ga){var ha=fa.getComment(ga.commentid);da(ha,l.UFIStatus.DELETED);}function z(ga){var ha=fa.getComment(ga.commentid);if(ha&&ha.status!==l.UFIStatus.DELETED)da(ha,l.UFIStatus.LIVE_DELETED);}function aa(ga){ea(ga.commentid,{attachment:null});}function ba(ga){var ha=fa.getComment(ga.commentid),ia=ga.shouldHideAsSpam?l.UFIStatus.SPAM_DISPLAY:null;da(ha,ia);}function ca(ga){ea(ga.commentid,x(ga));}function da(ga,ha){ea(ga.id,{priorstatus:ga.status,status:ha});}function ea(ga,ha){var ia=fa.getComment(ga)||new j({});fa.setComment(ga,j.set(ia,ha));k.didUpdateComment(ia.id);k.didUpdateFeedback(ia.ftentidentifier);}var fa={getComment:function(ga){if(ga===l.unavailableCommentKey)return null;return p[r(ga)];},setComment:function(ga,ha){!(ha instanceof j)?n(0):undefined;p[r(ga)]=ha;},resetComments:function(ga){for(var ha in ga)delete p[r(ha)];}};k.subscribe('update-comments',function(ga,ha){if(ha.comments&&ha.comments.length)s(ha.comments,ha.payloadsource);});k.subscribe('update-actions',function(ga,ha){if(ha.actions&&ha.actions.length)t(ha.actions);});f.exports=fa;},null);
__d('UFIReplyCommentList',['ActorURI','JSLogger','MercuryServerDispatcher','UFICentralUpdates','UFICommentList','UFIComments','UFIConstants','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';var r={},s=i.create('ufi_reply_comment_list');p=babelHelpers.inherits(t,l);q=p&&p.prototype;t.getCommentList=function(v,w){if(!r[w])r[w]=new t(v,w);return r[w];};t.resetWithContext=function(v,w,x){var y=r[w];if(!y)return;y.reset();for(var z in x)if(this.isValidContextPropertyForReset(z))y[z]=x[z];};function t(v,w){q.constructor.call(this,v);this.parentCommentID=w;}t.prototype.fetchComments=function(v,w,x){var y={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[v],lengths:[w],feed_context:x?x.feedContext:null,numpagerclicks:x?x.numPagerClicks:null};if(!x||!x.viewAs)y[h.PARAMETER_ACTOR]=this.actorID;j.trySend('/ajax/ufi/reply_fetch.php',y);};t.prototype.deferredCallback=function(v,w,x,y){var z={};for(var aa=0;aa<w;aa++){var ba=m.getComment(y[v+aa]);if(ba)z[v+aa]=ba;}x(z);};t.prototype.reset=function(){var v=q.reset.call(this),w={};for(var x in v){var y=v[x];w[y]=true;}m.resetComments(w);};t.prototype.getParentCommentID=function(){return this.parentCommentID;};t.prototype.buildCommentPermalink=function(v,w,x){if(!this.basePermalink)return null;var y=this.getParentCommentID().split("_"),z=w;if(y.length===2){z=y[1];}else s.error("Bad reply comment ID: "+this.getParentCommentID());return (new o(this.basePermalink).addQueryData({comment_id:z,reply_comment_id:w,total_comments:this.count}).toString());};j.registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:j.IMMEDIATE}});function u(v){var w=m.getComment(v.commentid),x=w.id,y=w.ftentidentifier,z=w.parentcommentid;if(!z)return;if(w.status!==n.UFIStatus.DELETED&&w.status!==n.UFIStatus.FAILED_ADD)t.getCommentList(y,z).deleteComment(x);}k.subscribe('update-actions',function(v,w){if(w.actions&&w.actions.length)for(var x=0;x<w.actions.length;x++){var y=w.actions[x];switch(y.actiontype){case n.UFIActionType.DELETE_COMMENT:u(y);break;}}});k.subscribe('update-comment-lists',function(v,w){var x=w.commentlists;if(x&&x.replies&&Object.keys(x).length)for(var y in x.replies){var z=x.replies[y],aa=z.ftentidentifier;t.getCommentList(aa,y).addCommentIDs(z.range.offset,z.range.length,z.values).updateCommentCount(z.count);}});k.subscribe('update-comments',function(v,w){if(w.comments&&w.comments.length)w.comments.forEach(function(x){var y=x.entidentifier,z=x.parentcommentid;if(!z)return;t.getCommentList(y,z).addOrUpdateComment(x);});});f.exports=t;},null);
__d('UFIToplevelCommentList',['ActorURI','MercuryServerDispatcher','UFICentralUpdates','UFICommentList','UFICommentOrdering','UFIComments','UFIConfig','UFIConstants','UFIReplyCommentList','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';var t={};r=babelHelpers.inherits(u,k);s=r&&r.prototype;u.getCommentList=function(w,x){if(!t[w])t[w]={};if(!t[w][x]){var y=new u(w,x),z=u.getCommentListsForFeedbackTargetID(w);if(z.length)y.updateCommentCount(z[0].getCommentCount());t[w][x]=y;}return t[w][x];};u.getCommentListsForFeedbackTargetID=function(w){var x=[],y=t[w]||{};for(var z in y)x.push(y[z]);return x;};u.getCommentListForFeedbackTargetID_UNSAFE=function(w){var x=u.getCommentListsForFeedbackTargetID(w);return x.length?x[0]:null;};u.resetCommentListsForFeedbackTargetID=function(w){if(!t[w])return;var x={};for(var y in t[w]){var z=t[w][y],aa=z.reset();for(var ba in aa){var ca=aa[ba];x[ca]=true;}}m.resetComments(x);};u.resetCommentListsWithContext=function(w,x){if(!t[w])return;var y={};for(var z in t[w]){var aa=t[w][z];for(var ba in x)if(this.isValidContextPropertyForReset(ba))aa[ba]=x[ba];var ca=aa.reset();for(var da in ca){var ea=ca[da];y[ea]=true;p.resetWithContext(w,ea,x);}}m.resetComments(y);};function u(w,x){s.constructor.call(this,w);this.orderReversed=false;if(l.inverted(x))this.orderReversed=true;this.orderingMode=x;this.forceNotPageable=false;}u.prototype.fetchComments=function(w,x,y){var z={ft_ent_identifier:this.feedbackTargetID,viewas:y&&y.viewAs?y.viewAs+'':null,source:null,offset:w,length:x,orderingmode:this.orderingMode,feed_context:y?y.feedContext:null,numpagerclicks:y?y.numPagerClicks:null};if(!y||!y.viewAs)z[h.PARAMETER_ACTOR]=this.actorID;i.trySend('/ajax/ufi/comment_fetch.php',z);};u.prototype.deferredCallback=function(w,x,y,z){var aa={},ba=w,ca=w+x-1;for(var da=0;da<x;da++){var ea=this.orderReversed?ca-da:ba+da,fa=m.getComment(z[ea]);if(fa)aa[w+da]=fa;}y(aa);};u.prototype.getOrderingMode=function(){return this.orderingMode;};u.prototype.setForceNotPageable=function(w){this.forceNotPageable=w;return this;};u.prototype.getForceNotPageable=function(){return this.forceNotPageable;};u.prototype.buildCommentPermalink=function(w,x,y){if(!this.basePermalink)return null;var z=Math.floor((this.count-y-1)/n.defaultPageSize)*n.defaultPageSize;return (new q(this.basePermalink).addQueryData({comment_id:x,offset:z,total_comments:this.count}).toString());};i.registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:i.IMMEDIATE}});function v(w){var x=m.getComment(w.commentid),y=x.id,z=x.ftentidentifier,aa=x.parentcommentid;if(aa)return;if(w.islocal||x.status!==o.UFIStatus.DELETED&&x.status!==o.UFIStatus.FAILED_ADD)u.getCommentListsForFeedbackTargetID(z).forEach(function(ba){ba.deleteComment(y);});}j.subscribe('update-actions',function(w,x){if(x.actions&&x.actions.length)for(var y=0;y<x.actions.length;y++){var z=x.actions[y];switch(z.actiontype){case o.UFIActionType.DELETE_COMMENT:v(z);break;}}});j.subscribe('update-comment-lists',function(w,x){var y=x.commentlists;if(y&&y.comments&&Object.keys(y).length)for(var z in y.comments)for(var aa in y.comments[z]){var ba=y.comments[z][aa],ca=ba.forcenotpageable===true;u.getCommentList(z,aa).addCommentIDs(ba.range.offset,ba.range.length,ba.values).setForceNotPageable(ca);}});j.subscribe('update-comments',function(w,x){if(x.comments&&x.comments.length)x.comments.forEach(function(y){if(y.parentcommentid)return;var z=y.ftentidentifier;u.getCommentListsForFeedbackTargetID(z).forEach(function(aa){aa.addOrUpdateComment(y);});});});j.subscribe('update-feedback',function(w,x){if(x.feedbacktargets&&x.feedbacktargets.length)x.feedbacktargets.forEach(function(y){var z=y.entidentifier,aa=y.defaultcommentorderingmode,ba={};if(aa)ba[aa]=true;if(y.orderingmodes)y.orderingmodes.forEach(function(da){ba[da.value]=true;});for(var ca in ba)u.getCommentList(z,ca).updateCommentCount(y.commentcount);});});f.exports=u;},null);
__d("XUFITypingIndicatorController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/typing\/{feedback_id}\/{update}\/",{feedback_id:{type:"String",required:true},update:{type:"Enum",required:true,enumType:1}});},null,{});
__d("XUFIDeleteCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});},null,{});
__d("XUFIHideCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});},null,{});
__d("XUFIEditCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});},null,{});
__d("XUFITranslateCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});},null,{});
__d('UnicodeBidiDirection-upstream',['invariant'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i='NEUTRAL',j='LTR',k='RTL',l=null;function m(r){return r===j||r===k;}function n(r){!m(r)?h(0):undefined;l=r;}function o(){n(j);}function p(){if(l==null)o();return l;}var q={NEUTRAL:i,LTR:j,RTL:k,isStrong:m,setGlobalDir:n,getGlobalDir:p};f.exports=q;},null);
__d('UnicodeBidiDirection',['Locale','UnicodeBidiDirection-upstream'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();i.setGlobalDir(h.isRTL()?i.RTL:i.LTR);f.exports=i;},null);
__d('UnicodeBidi',['UnicodeBidiDirection'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i={L:'A-Za-z\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u01BA\u01BB'+'\u01BC-\u01BF\u01C0-\u01C3\u01C4-\u0293\u0294\u0295-\u02AF\u02B0-\u02B8'+'\u02BB-\u02C1\u02D0-\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376-\u0377'+'\u037A\u037B-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1'+'\u03A3-\u03F5\u03F7-\u0481\u0482\u048A-\u052F\u0531-\u0556\u0559'+'\u055A-\u055F\u0561-\u0587\u0589\u0903\u0904-\u0939\u093B\u093D'+'\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0950\u0958-\u0961\u0964-\u0965'+'\u0966-\u096F\u0970\u0971\u0972-\u0980\u0982-\u0983\u0985-\u098C'+'\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD'+'\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09CE\u09D7\u09DC-\u09DD'+'\u09DF-\u09E1\u09E6-\u09EF\u09F0-\u09F1\u09F4-\u09F9\u09FA\u0A03'+'\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33'+'\u0A35-\u0A36\u0A38-\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F'+'\u0A72-\u0A74\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0'+'\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0AD0'+'\u0AE0-\u0AE1\u0AE6-\u0AEF\u0AF0\u0B02-\u0B03\u0B05-\u0B0C\u0B0F-\u0B10'+'\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40'+'\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0B5C-\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F'+'\u0B70\u0B71\u0B72-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95'+'\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9'+'\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7'+'\u0BE6-\u0BEF\u0BF0-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10'+'\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C59\u0C60-\u0C61'+'\u0C66-\u0C6F\u0C7F\u0C82-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8'+'\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CBE\u0CBF\u0CC0-\u0CC4\u0CC6'+'\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0CDE\u0CE0-\u0CE1\u0CE6-\u0CEF'+'\u0CF1-\u0CF2\u0D02-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D'+'\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D57\u0D60-\u0D61'+'\u0D66-\u0D6F\u0D70-\u0D75\u0D79\u0D7A-\u0D7F\u0D82-\u0D83\u0D85-\u0D96'+'\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF'+'\u0DE6-\u0DEF\u0DF2-\u0DF3\u0DF4\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45'+'\u0E46\u0E4F\u0E50-\u0E59\u0E5A-\u0E5B\u0E81-\u0E82\u0E84\u0E87-\u0E88'+'\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7'+'\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6'+'\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F01-\u0F03\u0F04-\u0F12\u0F13\u0F14'+'\u0F15-\u0F17\u0F1A-\u0F1F\u0F20-\u0F29\u0F2A-\u0F33\u0F34\u0F36\u0F38'+'\u0F3E-\u0F3F\u0F40-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C'+'\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FCF\u0FD0-\u0FD4\u0FD5-\u0FD8'+'\u0FD9-\u0FDA\u1000-\u102A\u102B-\u102C\u1031\u1038\u103B-\u103C\u103F'+'\u1040-\u1049\u104A-\u104F\u1050-\u1055\u1056-\u1057\u105A-\u105D\u1061'+'\u1062-\u1064\u1065-\u1066\u1067-\u106D\u106E-\u1070\u1075-\u1081'+'\u1083-\u1084\u1087-\u108C\u108E\u108F\u1090-\u1099\u109A-\u109C'+'\u109E-\u109F\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FB\u10FC'+'\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288'+'\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5'+'\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u1368'+'\u1369-\u137C\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166D-\u166E'+'\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EB-\u16ED\u16EE-\u16F0'+'\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1735-\u1736'+'\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5'+'\u17C7-\u17C8\u17D4-\u17D6\u17D7\u17D8-\u17DA\u17DC\u17E0-\u17E9'+'\u1810-\u1819\u1820-\u1842\u1843\u1844-\u1877\u1880-\u18A8\u18AA'+'\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930-\u1931'+'\u1933-\u1938\u1946-\u194F\u1950-\u196D\u1970-\u1974\u1980-\u19AB'+'\u19B0-\u19C0\u19C1-\u19C7\u19C8-\u19C9\u19D0-\u19D9\u19DA\u1A00-\u1A16'+'\u1A19-\u1A1A\u1A1E-\u1A1F\u1A20-\u1A54\u1A55\u1A57\u1A61\u1A63-\u1A64'+'\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AA6\u1AA7\u1AA8-\u1AAD'+'\u1B04\u1B05-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B45-\u1B4B'+'\u1B50-\u1B59\u1B5A-\u1B60\u1B61-\u1B6A\u1B74-\u1B7C\u1B82\u1B83-\u1BA0'+'\u1BA1\u1BA6-\u1BA7\u1BAA\u1BAE-\u1BAF\u1BB0-\u1BB9\u1BBA-\u1BE5\u1BE7'+'\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1BFC-\u1BFF\u1C00-\u1C23\u1C24-\u1C2B'+'\u1C34-\u1C35\u1C3B-\u1C3F\u1C40-\u1C49\u1C4D-\u1C4F\u1C50-\u1C59'+'\u1C5A-\u1C77\u1C78-\u1C7D\u1C7E-\u1C7F\u1CC0-\u1CC7\u1CD3\u1CE1'+'\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF2-\u1CF3\u1CF5-\u1CF6\u1D00-\u1D2B'+'\u1D2C-\u1D6A\u1D6B-\u1D77\u1D78\u1D79-\u1D9A\u1D9B-\u1DBF\u1E00-\u1F15'+'\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D'+'\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC'+'\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E'+'\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D'+'\u2124\u2126\u2128\u212A-\u212D\u212F-\u2134\u2135-\u2138\u2139'+'\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2182\u2183-\u2184'+'\u2185-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF'+'\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2C7B\u2C7C-\u2C7D\u2C7E-\u2CE4'+'\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F'+'\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE'+'\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005\u3006\u3007'+'\u3021-\u3029\u302E-\u302F\u3031-\u3035\u3038-\u303A\u303B\u303C'+'\u3041-\u3096\u309D-\u309E\u309F\u30A1-\u30FA\u30FC-\u30FE\u30FF'+'\u3105-\u312D\u3131-\u318E\u3190-\u3191\u3192-\u3195\u3196-\u319F'+'\u31A0-\u31BA\u31F0-\u31FF\u3200-\u321C\u3220-\u3229\u322A-\u3247'+'\u3248-\u324F\u3260-\u327B\u327F\u3280-\u3289\u328A-\u32B0\u32C0-\u32CB'+'\u32D0-\u32FE\u3300-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DB5'+'\u4E00-\u9FCC\uA000-\uA014\uA015\uA016-\uA48C\uA4D0-\uA4F7\uA4F8-\uA4FD'+'\uA4FE-\uA4FF\uA500-\uA60B\uA60C\uA610-\uA61F\uA620-\uA629\uA62A-\uA62B'+'\uA640-\uA66D\uA66E\uA680-\uA69B\uA69C-\uA69D\uA6A0-\uA6E5\uA6E6-\uA6EF'+'\uA6F2-\uA6F7\uA722-\uA76F\uA770\uA771-\uA787\uA789-\uA78A\uA78B-\uA78E'+'\uA790-\uA7AD\uA7B0-\uA7B1\uA7F7\uA7F8-\uA7F9\uA7FA\uA7FB-\uA801'+'\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA823-\uA824\uA827\uA830-\uA835'+'\uA836-\uA837\uA840-\uA873\uA880-\uA881\uA882-\uA8B3\uA8B4-\uA8C3'+'\uA8CE-\uA8CF\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8F8-\uA8FA\uA8FB\uA900-\uA909'+'\uA90A-\uA925\uA92E-\uA92F\uA930-\uA946\uA952-\uA953\uA95F\uA960-\uA97C'+'\uA983\uA984-\uA9B2\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uA9C1-\uA9CD'+'\uA9CF\uA9D0-\uA9D9\uA9DE-\uA9DF\uA9E0-\uA9E4\uA9E6\uA9E7-\uA9EF'+'\uA9F0-\uA9F9\uA9FA-\uA9FE\uAA00-\uAA28\uAA2F-\uAA30\uAA33-\uAA34'+'\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA5F\uAA60-\uAA6F'+'\uAA70\uAA71-\uAA76\uAA77-\uAA79\uAA7A\uAA7B\uAA7D\uAA7E-\uAAAF\uAAB1'+'\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAADD\uAADE-\uAADF'+'\uAAE0-\uAAEA\uAAEB\uAAEE-\uAAEF\uAAF0-\uAAF1\uAAF2\uAAF3-\uAAF4\uAAF5'+'\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E'+'\uAB30-\uAB5A\uAB5B\uAB5C-\uAB5F\uAB64-\uAB65\uABC0-\uABE2\uABE3-\uABE4'+'\uABE6-\uABE7\uABE9-\uABEA\uABEB\uABEC\uABF0-\uABF9\uAC00-\uD7A3'+'\uD7B0-\uD7C6\uD7CB-\uD7FB\uE000-\uF8FF\uF900-\uFA6D\uFA70-\uFAD9'+'\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFF6F\uFF70'+'\uFF71-\uFF9D\uFF9E-\uFF9F\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF'+'\uFFD2-\uFFD7\uFFDA-\uFFDC',R:'\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF'+'\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA'+'\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828'+'\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E'+'\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C'+'\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F',AL:'\u0608\u060B\u060D\u061B\u061C\u061D\u061E-\u061F\u0620-\u063F\u0640'+'\u0641-\u064A\u066D\u066E-\u066F\u0671-\u06D3\u06D4\u06D5\u06E5-\u06E6'+'\u06EE-\u06EF\u06FA-\u06FC\u06FD-\u06FE\u06FF\u0700-\u070D\u070E\u070F'+'\u0710\u0712-\u072F\u074B-\u074C\u074D-\u07A5\u07B1\u07B2-\u07BF'+'\u08A0-\u08B2\u08B3-\u08E3\uFB50-\uFBB1\uFBB2-\uFBC1\uFBC2-\uFBD2'+'\uFBD3-\uFD3D\uFD40-\uFD4F\uFD50-\uFD8F\uFD90-\uFD91\uFD92-\uFDC7'+'\uFDC8-\uFDCF\uFDF0-\uFDFB\uFDFC\uFDFE-\uFDFF\uFE70-\uFE74\uFE75'+'\uFE76-\uFEFC\uFEFD-\uFEFE'},j=new RegExp('['+i.L+i.R+i.AL+']'),k=new RegExp('['+i.R+i.AL+']');function l(r){var s=j.exec(r);if(!s)return h.NEUTRAL;var t=k.exec(s[0]);return t?h.RTL:h.LTR;}function m(r,s){s=s||h.NEUTRAL;if(!r.length)return s;var t=l(r);return t===h.NEUTRAL?s:t;}function n(r,s){if(!s||!h.isStrong(s))s=h.getGlobalDir();return m(r,s);}function o(r,s){return n(r,s)===h.LTR;}function p(r,s){return n(r,s)===h.RTL;}var q={firstStrongCharDir:l,resolveBlockDir:m,getDirection:n,isDirectionLTR:o,isDirectionRTL:p};f.exports=q;},null);
__d('UFIUserActions',['ActorURI','AsyncRequest','AsyncResponse','requireWeak','ClientIDs','ImmutableObject','Nectar','UFICentralUpdates','UFIToplevelCommentList','UFIComments','UFIConstants','UFIFeedbackTargets','MercuryServerDispatcher','XUFITypingIndicatorController','XUFIAddCommentController','XUFIDeleteCommentController','XUFICommentLikeController','XUFIHideCommentController','XUFILikeController','XUFIEditCommentController','XUFITranslateCommentController','XUFIActorChangeController','XUFIReactionController','collectDataAttributes','errorCode','fbt','UnicodeBidi'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){if(c.__markCompiled)c.__markCompiled();var ia;k('CLoggerX',function(ib){ia=ib;});var ja={BAN:'ban',UNDO_BAN:'undo_ban'},ka={changeActor:function(ib,jb){s.getFeedbackTarget(ib,function(kb){p.resetCommentListsWithContext(ib,{actorID:jb});o.inform('actor-changed',null);var lb={from_actor_id:kb.actorforpost,ft_ent_identifier:ib};lb[h.PARAMETER_ACTOR]=jb;var mb=ca.getURIBuilder().getURI();t.trySend(mb,lb);});},changeCommentLike:function(ib,jb,kb){var lb=q.getComment(ib);if(lb.hasviewerliked!=jb){var mb=la(kb.target),nb=jb?1:-1,ob={commentid:ib,actiontype:r.UFIActionType.COMMENT_LIKE,viewerliked:jb,likecount:(lb.likecount||0)+nb};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[ob]});s.getFeedbackTarget(lb.ftentidentifier,function(pb){var qb={};qb[h.PARAMETER_ACTOR]=pb.actorforpost;var rb=x.getURIBuilder().getURI();t.trySend(rb,babelHelpers._extends({comment_id:ib,legacy_id:lb.legacyid,like_action:jb,ft_ent_identifier:lb.ftentidentifier,source:kb.source,client_id:l.getNewClientID()},mb,qb));});}},addComment:function(ib,jb,kb,lb){s.getFeedbackTarget(ib,function(mb){var nb=la(lb.target),ob=l.getNewClientID();if(!mb.actorforpost)return;var pb=ha.isDirectionLTR(jb)?'ltr':'rtl',qb={ftentidentifier:ib,body:{text:jb,dir:pb},author:mb.actorforpost,id:ob,islocal:true,ufiinstanceid:lb.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:lb.replyid,replycommentparentid:lb.replycommentparentid,attachment:lb.attachedsticker,photo_comment:lb.attachedphoto,timestamp:{time:Math.floor(Date.now()/1000),text:ga._("a few seconds ago")}},rb={actiontype:r.UFIActionType.SUBSCRIBE_ACTION,actorid:mb.actorforpost,hasviewersubscribed:true,entidentifier:ib},sb={actiontype:r.UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:mb.targetfbid};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{comments:[qb],actions:[rb,sb]});var tb=null;if(lb.replyid)tb=q.getComment(lb.replyid).fbid;var ub;if(ia)ub=ia.getCLParamsForTarget(lb.target,tb);var vb={};vb[h.PARAMETER_ACTOR]=mb.actorforpost;var wb=v.getURIBuilder().getURI();t.trySend(wb,babelHelpers._extends({ft_ent_identifier:mb.entidentifier,comment_text:kb,source:lb.source,client_id:ob,reply_fbid:tb,parent_comment_id:lb.replyid,reply_comment_parent_id:lb.replycommentparentid,rootid:lb.rootid,clp:ub,attached_sticker_fbid:lb.attachedsticker?lb.attachedsticker.fbid:0,attached_photo_fbid:lb.attachedphoto?lb.attachedphoto.fbid:0,feed_context:lb.feedcontext},nb,vb));});},_hasCommentTextChanged:function(ib,jb){return ib.body&&ib.body.text!=jb;},_hasCommentPhotoChanged:function(ib,jb){return (ib||jb)&&!(ib&&jb)||ib&&jb&&ib.fbid!=jb.fbid;},_hasCommentStickerChanged:function(ib,jb){return (ib||jb)&&!(ib&&jb)||ib&&ib.type=="sticker"&&jb&&ib.fbid!=jb.fbid;},editComment:function(ib,jb,kb,lb){var mb=la(lb.target),nb=q.getComment(ib),ob=this._hasCommentTextChanged(nb,jb)||this._hasCommentPhotoChanged(nb.photo_comment,lb.attachedPhoto)||this._hasCommentStickerChanged(nb.attachment,lb.attachedSticker);nb=m.set(nb,{status:r.UFIStatus.PENDING_EDIT,body:{text:jb},editnux:null,attachment:lb.attachedSticker,photo_comment:lb.attachedPhoto});if(ob)nb=m.set(nb,{originalTimestamp:nb.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:ga._("a few seconds ago")}});o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{comments:[nb]});s.getFeedbackTarget(nb.ftentidentifier,function(pb){var qb={};qb[h.PARAMETER_ACTOR]=pb.actorforpost;var rb=aa.getURIBuilder().getURI();t.trySend(rb,babelHelpers._extends({ft_ent_identifier:nb.ftentidentifier,comment_text:kb,source:lb.source,comment_id:nb.id,parent_comment_id:nb.parentcommentid,attached_sticker_fbid:lb.attachedSticker?lb.attachedSticker.fbid:0,attached_photo_fbid:lb.attachedPhoto?lb.attachedPhoto.fbid:0},mb,qb));});},translateComment:function(ib,jb){var kb=ba.getURIBuilder().getURI();t.trySend(kb,{ft_ent_identifier:ib.ftentidentifier,comment_ids:[ib.id],source:jb.source});},setHideAsSpam:function(ib,jb,kb){var lb=la(kb.target),mb=q.getComment(ib),nb={commentid:ib,actiontype:r.UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:jb};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[nb]});s.getFeedbackTarget(mb.ftentidentifier,function(ob){var pb={};pb[h.PARAMETER_ACTOR]=ob.actorforpost;var qb=y.getURIBuilder().getURI();t.trySend(qb,babelHelpers._extends({comment_id:ib,spam_action:jb,ft_ent_identifier:mb.ftentidentifier,source:kb.source},lb,pb));});},removeComment:function(ib,jb){var kb=la(jb.target),lb=q.getComment(ib),mb={actiontype:r.UFIActionType.DELETE_COMMENT,commentid:ib,islocal:true,oneclick:jb.oneclick};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[mb]});s.getFeedbackTarget(lb.ftentidentifier,function(nb){var ob={};ob[h.PARAMETER_ACTOR]=nb.actorforpost;var pb=w.getURIBuilder().getURI();t.trySend(pb,babelHelpers._extends({comment_id:lb.id,comment_legacyid:lb.legacyid,ft_ent_identifier:lb.ftentidentifier,one_click:jb.oneclick,source:jb.source,client_id:l.getNewClientID()},kb,ob));});},banUser:function(ib,jb,kb,lb){var mb=kb?ja.BAN:ja.UNDO_BAN;t.trySend('/ajax/ufi/ban_user.php',{page_id:jb,commenter_id:ib.author,action:mb,comment_id:ib.id,client_side:true});},changeReaction:function(ib,jb,kb){s.getFeedbackTarget(ib,function(lb){var mb=[hb(lb,jb)],nb=parseInt(jb,10)!==0;if(lb.hasviewerliked!==nb){var ob=nb?1:-1;mb.push({actiontype:r.UFIActionType.LIKE_ACTION,actorid:lb.actorforpost,hasviewerliked:nb,likecount:(lb.likecount||0)+ob,entidentifier:ib,likesentences:{current:lb.likesentences.alternate,alternate:lb.likesentences.current}});}o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:mb});var pb=la(kb.target),qb={};qb[h.PARAMETER_ACTOR]=lb.actorforpost;t.trySend(da.getURIBuilder().getURI(),babelHelpers._extends({client_id:l.getNewClientID(),ft_ent_identifier:ib,reaction_type:jb,root_id:kb.rootid,source:kb.source},qb,pb));});},changeSubscribe:function(ib,jb,kb){s.getFeedbackTarget(ib,function(lb){var mb=la(kb.target);if(lb.hasviewersubscribed!==jb){var nb={actiontype:r.UFIActionType.SUBSCRIBE_ACTION,actorid:lb.actorforpost,hasviewersubscribed:jb,entidentifier:ib};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[nb]});var ob={};ob[h.PARAMETER_ACTOR]=lb.actorforpost;t.trySend('/ajax/ufi/subscribe.php',babelHelpers._extends({subscribe_action:jb,ft_ent_identifier:ib,source:kb.source,client_id:l.getNewClientID(),rootid:kb.rootid,comment_expand_mode:kb.commentexpandmode},mb,ob));}});},fetchSpamComments:function(ib,jb,kb,lb){t.trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ib,viewas:lb,comment_ids:jb,parent_comment_id:kb,source:null});},removePreview:function(ib,jb){var kb=la(jb.target),lb={commentid:ib.id,actiontype:r.UFIActionType.REMOVE_PREVIEW};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[lb]});t.trySend('/ajax/ufi/remove_preview.php',babelHelpers._extends({comment_id:ib.id,ft_ent_identifier:ib.ftentidentifier,source:jb.source},kb));},typingChange:function(ib,jb){new i(u.getURIBuilder().setString('feedback_id',ib).setEnum('update',jb?'start':'stop').getURI()).send();}};function la(ib){if(!ib)return {ft:{}};var jb={ft:ea(ib,['ft']).ft};n.addModuleData(jb,ib);return jb;}function ma(ib){j.defaultErrorHandler(ib);}function na(ib){var jb=ib.request.data;j.defaultErrorHandler(ib);var kb=jb.client_id||jb.comment_id,lb=q.getComment(kb),mb=lb.status===r.UFIStatus.PENDING_EDIT?r.UFIStatus.FAILED_EDIT:r.UFIStatus.FAILED_ADD;lb=m.setDeep(lb,{status:mb,allowRetry:oa(ib),body:{mentionstext:jb.comment_text,mentionsphoto:lb.photo_comment}});o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{comments:[lb]});}function oa(ib){var jb=ib.getError();if(ib.isBlockedAction())return false;if(ib.silentError)return true;if(jb===1357012||jb===1357006)return false;return true;}function pa(ib){var jb=ib.request.data,kb=jb.comment_id,lb=q.getComment(kb);lb=m.set(lb,{status:lb.priorstatus||null,priorstatus:undefined});o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{comments:[lb]});}function qa(ib){var jb=ib.request.data,kb=jb.comment_id,lb=q.getComment(kb);if(jb.like_action===lb.hasviewerliked){var mb=lb.hasviewerliked?-1:1,nb={commentid:kb,actiontype:r.UFIActionType.COMMENT_LIKE,viewerliked:!lb.hasviewerliked,likecount:(lb.likecount||0)+mb};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[nb]});}j.defaultErrorHandler(ib);}function ra(ib){var jb=ib.request.data,kb=jb.ft_ent_identifier;s.getFeedbackTarget(kb,function(lb){if(lb.hasviewerliked===jb.like_action){var mb=lb.hasviewerliked?-1:1,nb={actiontype:r.UFIActionType.LIKE_ACTION,actorid:lb.actorforpost,hasviewerliked:!lb.hasviewerliked,likecount:(lb.likecount||0)+mb,entidentifier:kb,likesentences:{current:lb.likesentences.alternate,alternate:lb.likesentences.current}};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[nb]});}});j.defaultErrorHandler(ib);}function sa(ib){var jb=ib.request.data,kb=jb.ft_ent_identifier;s.getFeedbackTarget(kb,function(lb){if(lb.hasviewersubscribed===jb.subscribe_action){var mb={actiontype:r.UFIActionType.SUBSCRIBE_ACTION,actorid:lb.actorforpost,hasviewersubscribed:!lb.hasviewersubscribed,entidentifier:kb};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[mb]});}});j.defaultErrorHandler(ib);}var ta={'/ajax/ufi/ban_user.php':{mode:t.IMMEDIATE,error_handler:ma},'/ajax/ufi/subscribe.php':{mode:t.BATCH_CONDITIONAL,error_handler:sa,batch_if:fb,batch_function:gb},'/ajax/ufi/id_comment_fetch.php':{mode:t.IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:t.IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:t.IMMEDIATE}},ua=v.getURIBuilder().getURI();ta[ua]={mode:t.IMMEDIATE,error_handler:na};var va=w.getURIBuilder().getURI();ta[va]={mode:t.IMMEDIATE,error_handler:pa};var wa=x.getURIBuilder().getURI();ta[wa]={mode:t.BATCH_CONDITIONAL,error_handler:qa,batch_if:db,batch_function:gb};var xa=y.getURIBuilder().getURI();ta[xa]={mode:t.IMMEDIATE,error_handler:pa};var ya=z.getURIBuilder().getURI();ta[ya]={mode:t.BATCH_CONDITIONAL,error_handler:ra,batch_if:eb,batch_function:gb};var za=aa.getURIBuilder().getURI();ta[za]={mode:t.IMMEDIATE,error_handler:na};var ab=ba.getURIBuilder().getURI();ta[ab]={mode:t.IMMEDIATE};var bb=ca.getURIBuilder().getURI();ta[bb]={mode:t.IMMEDIATE};var cb=da.getURIBuilder().getURI();ta[cb]={mode:t.IMMEDIATE};t.registerEndpoints(ta);function db(ib,jb){return ib&&ib.ft_ent_identifier==jb.ft_ent_identifier&&ib.comment_id==jb.comment_id;}function eb(ib,jb){return ib&&ib.ft_ent_identifier==jb.ft_ent_identifier;}function fb(ib,jb){return ib&&ib.ft_ent_identifier==jb.ft_ent_identifier;}function gb(ib,jb){return jb;}function hb(ib,jb){jb=parseInt(jb,10);var kb=!!jb,lb=ib.actorforpost,mb=ib.reactorids?ib.reactorids.slice(0):[],nb=mb.indexOf(lb),ob=0;if(kb){if(nb<0){mb.unshift(lb);ob=1;}}else if(nb>-1){mb.splice(nb,1);ob=-1;}var pb=Math.max(ib.reactioncount+ob,0),qb=ib.reactioncountreduced;if(qb&&!isNaN(qb))qb=pb.toString();var rb=ib.reactioncountmap||{},sb,tb=ib.viewerreaction;if(tb&&rb[tb]){rb[tb]['default']=Math.max((rb[tb]['default']||0)-1,0);sb=rb[tb].reduced;if(sb&&!isNaN(sb))rb[tb].reduced=rb[tb]['default'].toString();}if(kb&&rb[jb]){rb[jb]['default']=(rb[jb]['default']||0)+1;sb=rb[jb].reduced;if(sb&&!isNaN(sb))rb[jb].reduced=rb[jb]['default'].toString();}var ub=ib.userreactions||{};if(kb){ub[lb]=jb;}else delete ub[lb];return {actiontype:r.UFIActionType.REACTION,actorid:lb,entidentifier:ib.entidentifier,reactioncount:pb,reactioncountmap:rb,reactioncountreduced:qb,reactorids:mb,userreactions:ub,viewerreaction:jb};}f.exports=ka;},null);
__d("XFeedNUXSaveSeenStateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false}});},null,{});
__d('ProfileBrowserLink',['URI'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='/ajax/browser/dialog/',j='/browse/',k=function(m,n,o){return new h(m+n).setQueryData(o);},l={constructPageURI:function(m,n){return k(j,m,n);},constructDialogURI:function(m,n){return k(i,m,n);}};f.exports=l;},null);
__d('ProfileBrowserTypes',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={FRIEND_CHECKINS:'friendcheckins',LIKES:'likes',GROUP_MEMBERS:'group_members',GROUP_MESSAGE_VIEWERS:'group_message_viewers',MUTUAL_FRIENDS:'mutual_friends',TODO_LIST_ASSIGNEES:'todo_list_assignees',TOPIC_CONVERSATION_PARTICIPANTS:'topic_conversation_participants'};f.exports=h;},null);
__d("XUFICommentTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null,{});
__d("XUFIReactionProfileBrowserController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/browser\/",{ft_ent_identifier:{type:"String",required:true}});},null,{});
__d("XUFIReactionProfileDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/dialog\/",{reaction_type:{type:"Enum",enumType:0},ft_ent_identifier:{type:"String",required:true},__asyncDialog:{type:"Int"}});},null,{});
__d("XUFIReactionTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]},reaction_type:{type:"Enum",enumType:0},user_count:{type:"Int"}});},null,{});
__d("XUFIShareTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/share\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null,{});
__d('UFIShareLink.react',['Event','React','ReactDOM','Image.react','TrackingNodes','XUISpinner.react','cx','fbt','ix','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=i.PropTypes,s=i.createClass({displayName:'UFIShareLink',propTypes:{ufiExperiments:r.object},componentDidMount:function(){if(!this.props.onShareClick)return;this._clickEvent=h.listen(j.findDOMNode(this),'click',this.props.onShareClick);},componentWillUnmount:function(){if(!this.props.onShareClick)return;this._clickEvent.remove();},_onClick:function(event){event.preventDefault();this.props.onClick&&this.props.onClick(event);},render:function(){var t=o._("Send this to friends or post it on your timeline."),u='{ "tn": "'+l.encodeTN(l.types.SHARE_LINK)+'", "type": 25 }',v=this.props.ufiExperiments,w=null;if(v.showSlimUFI)w=i.createElement(k,{className:'UFIShareLinkIcon',src:p('/images/ufi/fbfeed/share_gray.png')});var x=null;if(this.props.rel!=='dialog')x=i.createElement(m,{className:"UFIShareLinkSpinner",showOnAsync:true});return (i.createElement('a',babelHelpers._extends({},this.props,{className:q(this.props.className,"share_action_link"),onClick:this._onClick,'data-ft':u,title:t}),w,o._("Share"),x));}});f.exports=s;},null);
__d('UFISubscribeLink.react',['React','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'UFISubscribeLink',propTypes:{subscribeAction:j.bool,onClick:j.func},render:function(){var l=this.props.subscribeAction?i._("Turn On Notifications"):i._("Turn Off Notifications"),m=this.props.subscribeAction?i._("Get a notification whenever someone comments."):i._("Stop getting notifications when someone comments.");return (h.createElement('a',{className:'UFISubscribeLink',href:'#',role:'button','aria-live':'polite',title:m,onClick:this.props.onClick},l));}});f.exports=k;},null);
__d('UFITimelineBlingBox.react',['ProfileBrowserLink','ProfileBrowserTypes','React','UFIBlingItem.react','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=j.createClass({displayName:'UFITimelineBlingBox',propTypes:{contextArgs:o.object.isRequired,'data-ft':o.string,'data-gt':o.string,actorid:o.any,commentOnClick:o.func,comments:o.number,commentsreduced:o.string,enableShowComments:o.bool,enableShowLikes:o.bool,feedbackFBID:o.any,likes:o.number,likesreduced:o.string,reshares:o.number,resharesreduced:o.string},render:function(){var q=[];if(this.props.likes&&this.props.enableShowLikes){var r=this._getProfileBrowserURI(),s=n._("See who likes this"),t=j.createElement('a',{ajaxify:r.dialog,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-gt':this.props['data-gt'],'data-hover':'tooltip','data-tooltip-alignh':'right','data-tooltip-uri':this._getLikeToolTipURI(),href:r.page,key:'like',rel:'dialog',role:'button',title:s},j.createElement(k,{contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:'UFIBlingBoxTimelineLikeIcon',itemKey:'like'}));q.push(t);}if(this.props.comments&&this.props.enableShowComments){var u=n._("Show comments"),v=j.createElement('a',{'aria-label':u,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right',href:'#',key:'comment',onClick:this.props.commentOnClick},j.createElement(k,{contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:'UFIBlingBoxTimelineCommentIcon',itemKey:'comment'}));q.push(v);}if(this.props.reshares){var w=n._("Show shares"),x=this._getShareViewURI(),y=j.createElement('a',{ajaxify:x.dialog,'aria-label':w,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right',href:x.page,key:'reshare',rel:'async'},j.createElement(k,{allowText:true,contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxTimelineReshareIcon',itemKey:'reshare'}));q.push(y);}return (j.createElement('span',null,q));},_getItemClassName:function(q){return (q.length>0?"mls":'')+(' '+"UFIBlingBoxTimelineItem");},_getLikeToolTipURI:function(){if(this.props.feedbackFBID){var q=new l('/ajax/like/tooltip.php').setQueryData({comment_fbid:this.props.feedbackFBID});return q.toString();}else return null;},_getProfileBrowserURI:function(){if(this.props.feedbackFBID){var q=i.LIKES,r={id:this.props.feedbackFBID,actorid:this.props.actorid},s=h.constructDialogURI(q,r),t=h.constructPageURI(q,r),u={dialog:s.toString(),page:t.toString()};return u;}},_getShareViewURI:function(){if(this.props.feedbackFBID){var q=new l('/ajax/shares/view').setQueryData({target_fbid:this.props.feedbackFBID}),r=new l('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedbackFBID}),s={dialog:q.toString(),page:r.toString()};return s;}}});f.exports=p;},null);
__d('UFIUIEvents',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='UFIUIEvents/ufiActionAddComment',i='UFIUIEvents/ufiActionLinkLike',j='UFIUIEvents/ufiActionLinkUnlike',k={UFIActionLinkLike:i,UFIActionLinkUnlike:j,UFIActionAddComment:h};f.exports=k;},null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/private_reply\/dialog\/",{activity_id:{type:"String",required:true}});},null,{});
__d('UFIPrivateReplyLink.react',['ActorURI','Link.react','PagesPrivateReplyConstants','React','XUIGrayText.react','XPagesMessagingPrivateReplyDialogController','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();'use strict';var o=j.Status,p=j.Type,q=k.PropTypes,r=k.createClass({displayName:'UFIPrivateReplyLink',propTypes:{actorID:q.string.isRequired,activityID:q.string.isRequired,context:q.shape({activityType:q.string.isRequired,status:q.string.isRequired,hasReplyPermission:q.bool.isRequired,pageID:q.string.isRequired,permalink:q.string}).isRequired},render:function(){var s=this.props.context;if(s.hasReplyPermission&&this.props.actorID===s.pageID){if(s.status===o.REPLYABLE){return this._renderMessageLink();}else if(s.status===o.ALREADY_REPLIED)return this._renderSeeReplyLink();return this._renderTooltip();}if(s.status===o.ALREADY_REPLIED)return this._renderIndicator();return null;},_renderMessageLink:function(){var s=h.create(m.getURIBuilder().setString('activity_id',this.props.activityID).getURI(),this.props.context.pageID);return (k.createElement(i,{href:s,rel:'dialog'},this._getLabel()));},_renderTooltip:function(){var s;switch(this.props.context.status){case o.EXPIRED:s=n._({"comments":"You can't send a message response to comments that are older than 6 months.","reviews":"You can't send a message response to reviews that are older than 6 months.","posts":"You can't send a message response to posts that are older than 6 months."},[n['enum'](this._getActivityTypeLabel(),{comments:'comments',reviews:'reviews',posts:'posts'})]);break;case o.NOT_USER_CREATED:s=n._("Pages can't send private messages to other Pages.");break;}return (k.createElement('span',null,k.createElement(l,{shade:'light','aria-label':s,'data-hover':s?'tooltip':null},this._getLabel())));},_renderSeeReplyLink:function(){return (k.createElement(i,{href:this.props.context.permalink||'#'},n._("See Response")));},_renderIndicator:function(){return (k.createElement('span',null,k.createElement(l,{shade:'light'},n._("Page responded privately"))));},_getLabel:function(){return n._("Message");},_getActivityTypeLabel:function(){switch(this.props.context.activityType){case p.COMMENT_PAGE_POST:case p.COMMENT_WALL_POST:case p.COMMENT_REVIEW:return 'comments';case p.REVIEW:return 'reviews';default:return 'posts';}}});f.exports=r;},null);
__d('UFIActionLinkController',['Arbiter','BootloadedComponent.react','Bootloader','ClickPointIdentifiersDEPRECATED','CommentPrelude','CSS','DataStore','DOM','DOMQuery','JSResource','Parent','React','ReactDOM','TrackingNodes','UFIBlingBox.react','UFICentralUpdates','UFICommentLink.react','UFICollapse','UFIConstants','UFIFeedbackTargets','UFIInstanceState','UFILikeLink.react','UFIReactionsLink.react','UFIReactionsTokens.react','UFIShareLink.react','UFISubscribeLink.react','UFITimelineBlingBox.react','UFIToplevelCommentList','UFIUserActions','UFIUIEvents','UFIPrivateReplyLink.react','URI','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){if(c.__markCompiled)c.__markCompiled();var oa;function pa(ra,sa,ta){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ua=p.scry(ra,sa)[0];if(ua){if(m.hasClass(ua,'prevent_react_replace'))return;var va=document.createElement('span');ua.parentNode.replaceChild(va,ua);va.appendChild(ua);if(typeof ta==="function")ta(va);}else var wa=h.subscribe('PhotoSnowlift.DATA_CHANGE',function(){h.unsubscribe(wa);pa(ra,sa,ta);},h.SUBSCRIBE_NEW);}var qa=function(ra,sa,ta,ua){this._id=sa.ftentidentifier;this._ftFBID=ta.targetfbid;this._source=sa.source;this._contextArgs=sa;this._ufiRoot=ra;this._ufiInstanceID=ua;this._isOnTimeline=this._isRenderingOnTimeline();if(this._isOnTimeline){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(ta.viewercanlike||ta.hasviewerliked)this._attemptInitializeLike();if(ta.cancomment)this._attemptInitializeComment();if(ta.viewercansubscribetopost)this._attemptInitializeSubscribe();this._attemptInitializeShare();this._attemptInitializeMessageReply();w.subscribe('feedback-updated',(function(va,wa){var xa=wa.updates;if(this._id in xa)this.render();}).bind(this));w.subscribe('feedback-id-changed',(function(va,wa){var xa=wa.updates;if(this._id in xa)this._id=xa[this._id];}).bind(this));w.subscribe('instance-updated',(function(va,wa){var xa=wa.updates[this._ufiInstanceID];if(xa&&xa.inlineShare)this.render();}).bind(this));};Object.assign(qa.prototype,{_attemptInitializeBling:function(){pa(this._ufiRoot,'^form .uiBlingBox',(function(ra){this._blingRoot=ra;if(this._dataReady)this._renderBling();}).bind(this));},_attemptInitializeTimelineBling:function(){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ra=p.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline')[0];if(ra){var sa=p.scry(ra,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=sa?true:false;var ta=p.scry(ra,'.fbTimelineFeedbackComments')[0];this._enableShowComments=ta?true:false;}this._blingTimelineRoot=ra;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeLike:function(){pa(this._ufiRoot,'^form .like_link',(function(ra){this._likeRoot=ra;if(this._dataReady)this._renderLike();}).bind(this));},_attemptInitializeComment:function(){pa(this._ufiRoot,'^form .comment_link',(function(ra){this._commentRoot=ra;if(this._dataReady)this._renderComment();}).bind(this));},_attemptInitializeSubscribe:function(){pa(this._ufiRoot,'^form .unsub_link',(function(ra){this._subscribeRoot=ra;if(this._dataReady)this._renderSubscribe();}).bind(this));},_attemptInitializeMessageReply:function(){pa(this._ufiRoot,'^form .message_reply_action_link',(function(ra){this._messageReplyRoot=ra;if(this._messageReplyRoot.previousSibling&&this._messageReplyRoot.previousSibling.nodeType===3){this._messageReplySeparator=this._messageReplyRoot.previousSibling;this._messageReplySeparatorData=this._messageReplySeparator.data;}if(this._dataReady)this._renderMessageReply();}).bind(this));},_attemptInitializeShare:function(){pa(this._ufiRoot,'^form .share_action_link',(function(ra){this._shareRoot=ra;m.addClass(this._shareRoot,"share_root");var sa=p.scry(this._shareRoot,'.share_action_link')[0];if(sa){this._shareURI=sa.getAttribute('href');this._shareRel=sa.getAttribute('rel');this._shareNowMenuURI=n.get(sa,'share-now-menu-uri');}if(this._dataReady)this._renderShare();}).bind(this));},render:function(){this._dataReady=true;if(this._isOnTimeline){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderComment();this._renderSubscribe();this._renderShare();this._renderMessageReply();},_renderBling:function(){if(this._blingRoot)aa.getFeedbackTarget(this._id,(function(ra){var sa,ta=u.getTrackingInfo(u.types.BLINGBOX),ua=new ma(ra.permalink).addQueryData({comment_tracking:ta}).toString(),va=ia.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount();if(this._contextArgs.hasReactions&&this._contextArgs.hasReactionsTokens&&ra.displayreactions){var wa=(function(event){event.preventDefault();if(this._contextArgs.feedbackMode==='expanded'){this._setInlineShareActive(false);}else{l.onBlingboxClick(event.currentTarget);y.toggle(this._ufiInstanceID);}}).bind(this);sa=s.createElement(ea,{commentCount:va,contextArgs:this._contextArgs,'data-comment-prelude-ref':'action_link_bling','data-ft':ta,feedback:ra,href:ua,onCommentClick:wa,onToggle:xa});}else{var xa=(function(event){l.onBlingboxClick(event.currentTarget);y.toggle(this._ufiInstanceID);event.preventDefault();}).bind(this);sa=s.createElement(v,{likes:ra.likecount,likesreduced:ra.likecountreduced,comments:va,commentsreduced:ra.commentcountreduced,reshares:ra.sharecount,resharesreduced:ra.sharecountreduced,nfb:ra.nfbcount,permalink:ua,contextArgs:this._contextArgs,onClick:xa,'data-ft':ta,'data-comment-prelude-ref':'action_link_bling'});}this._blingBox=t.render(sa,this._blingRoot);}).bind(this));},_renderTimelineBling:function(){if(this._blingTimelineRoot)aa.getFeedbackTarget(this._id,(function(ra){var sa=u.getTrackingInfo(u.types.BLINGBOX),ta=k.getUserActionID(k.types.TIMELINE_SEE_LIKERS),ua=(function(event){var xa=r.byTag(event.target,"form");l.uncollapse(xa,'action_link_timeline_bling');var ya=p.scry(xa,'a.UFIPagerLink');if(ya.length)ya[0].click();event.preventDefault();}).bind(this),va=ia.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount(),wa=s.createElement(ha,{comments:va,commentsreduced:ra.commentcountreduced,commentOnClick:ua,contextArgs:this._contextArgs,'data-ft':sa,'data-gt':ta,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:ra.likecount,likesreduced:ra.likecountreduced,reshares:ra.sharecount,resharesreduced:ra.sharecountreduced,actorid:ra.actorid});t.render(wa,this._blingTimelineRoot);}).bind(this));},_renderLike:function(){if(this._likeRoot)aa.getFeedbackTarget(this._id,(function(ra){var sa=!ra.hasviewerliked,ta=(function(event){var va=sa?ka.UFIActionLinkLike:ka.UFIActionLinkUnlike;h.inform(va,{ft_id:this._id,like_action:sa,target:event.target});ja.changeReaction(this._id,sa?z.LikeReaction:0,{source:this._source,target:event.target,rootid:this._contextArgs.rootid});event.preventDefault();h.inform('inlineShare/reflow');}).bind(this),ua=s.createElement(ca,{onClick:ta,likeAction:sa,ufiExperiments:this._contextArgs.ufiexperiments});if(this._contextArgs.hasReactions&&ra.canviewerreact)ua=s.createElement(da,{id:this._id,hasReactionsNUX:this._contextArgs.hasReactionsNUX&&!ra.hasviewerliked,reaction:ra.viewerreaction},ua);t.render(ua,this._likeRoot);}).bind(this));},_renderComment:function(){if(!this._commentRoot)return;var ra={onClick:(function(event){event.preventDefault();this._setInlineShareActive(false);}).bind(this)};if(this._contextArgs.commentajaxify)ra={ajaxify:this._contextArgs.commentajaxify,rel:'dialog'};var sa=s.createElement(x,babelHelpers._extends({ufiExperiments:this._contextArgs.ufiexperiments},ra));this._commentLink=t.render(sa,this._commentRoot);},_renderMessageReply:function(){if(this._messageReplyRoot)aa.getFeedbackTarget(this._id,(function(ra){this._messageReplyLink=null;if(ra.allowmessagelink){var sa=s.createElement(i,{bootloadPlaceholder:s.createElement('span',null),bootloadLoader:q('UFIMessageLink.react'),feedbackSource:this._source,postID:this._id});this._messageReplyLink=t.render(sa,this._messageReplyRoot);}else if(ra.messagereplycontext){var ta=s.createElement(la,{actorID:ra.actorforpost,activityID:this._id,context:ra.messagereplycontext});this._messageReplyLink=t.render(ta,this._messageReplyRoot);}if(!this._messageReplyLink||!t.findDOMNode(this._messageReplyLink)){if(this._messageReplySeparator)this._messageReplySeparator.data='';o.setContent(this._messageReplyRoot,null);return;}if(this._messageReplySeparator)this._messageReplySeparator.data=this._messageReplySeparatorData;}).bind(this));},_renderSubscribe:function(){if(this._subscribeRoot)aa.getFeedbackTarget(this._id,(function(ra){var sa=!ra.hasviewersubscribed,ta=(function(event){ja.changeSubscribe(this._id,sa,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:ra.commentexpandmode});event.preventDefault();}).bind(this),ua=s.createElement(ga,{onClick:ta,subscribeAction:sa});this._subscribeLink=t.render(ua,this._subscribeRoot);}).bind(this));},_onShareClick:function(event){if(this._getInlineShareLoaded()){this._setInlineShareActive(true);event.kill();}},_renderShare:function(ra){if(!(this._shareRoot&&this._shareURI))return;var sa=!this._getInlineShareActive()&&this._shareNowMenuURI,ta=this._ufiInstanceID,ua;if(sa&&oa){ua=s.createElement(oa,babelHelpers._extends({endpoint:this._shareNowMenuURI,endpointData:{ufi_id:ta}},ra),s.createElement(fa,{href:'#',ufiExperiments:this._contextArgs.ufiexperiments}));}else{var va=null;if(sa){va={onClick:this._bootloadShareMenu.bind(this,{openOnInit:true}),onFocus:this._bootloadShareMenu.bind(this,{focusOnInit:true}),onMouseOver:this._bootloadShareMenu.bind(this,{})};}else va={ajaxify:new ma(this._shareURI).addQueryData({ufi_id:ta}),rel:this._shareRel,onShareClick:this._onShareClick.bind(this)};ua=s.createElement(fa,babelHelpers._extends({ufiExperiments:this._contextArgs.ufiexperiments,href:'#'},va));}this._shareLink=t.render(ua,this._shareRoot);},_bootloadShareMenu:function(ra){j.loadModules(["UFIShareNowMenu.react"],(function(sa){oa=sa;this._renderShare(ra);}).bind(this));},_setInlineShareActive:function(ra){var sa=ba.getKeyForInstance(this._ufiInstanceID,'inlineShare');ba.updateState(this._ufiInstanceID,'inlineShare',babelHelpers._extends({},sa,{active:ra,toggling:true}));},_getInlineShareLoaded:function(){var ra=ba.getKeyForInstance(this._ufiInstanceID,'inlineShare');return !!(ra&&ra.loaded);},_getInlineShareActive:function(){var ra=ba.getKeyForInstance(this._ufiInstanceID,'inlineShare');return !!(ra&&ra.active);},_isRenderingOnTimeline:function(){if(this._source===z.UFIFeedbackSourceType.PROFILE){var ra=p.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline');return ra.length>0;}return false;}});f.exports=qa;},null);
__d("MentionsInputUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={generateDataFromTextWithEntities:function(i){var j=i.text,k=[];(i.ranges||[]).forEach(function(m){var n=m.entity;if(!n.external)k.push({uid:n.id,text:j.substr(m.offset,m.length),offset:m.offset,length:m.length,weakreference:!!n.weakreference});});var l={value:j,mentions:k};return l;}};f.exports=h;},null);
__d('ClipboardPhotoUploader',['ArbiterMixin','AsyncRequest','mixin'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,j(h));l=k&&k.prototype;function m(n,o){'use strict';l.constructor.call(this);this.uploadURIString=n;this.data=o;}m.prototype.handlePaste=function(event){'use strict';var n=m.getImages(event);for(var o=0;o<n.length;++o){var p=new FormData();p.append('pasted_file',n[o]);var q=new i();q.setURI(this.uploadURIString).setData(this.data).setRawData(p).setHandler((function(r){this.inform('upload_success',r);}).bind(this)).setErrorHandler((function(r){this.inform('upload_error',r);}).bind(this)).setAbortHandler((function(r){this.inform('upload_error',r);}).bind(this));this.inform('upload_start');q.send();break;}};m.getImages=function(event){'use strict';if(!event.clipboardData)return [];var n=event.clipboardData.items;if(!n)return [];var o,p=[];for(var q=0;q<n.length;++q){o=n[q];if(o.kind==='string')return [];if(o.kind==='file'&&o.type.indexOf('image/')!==-1)p.push(o.getAsFile());if(o.kind==='blob')p.push(o.blob);}return p;};f.exports=m;},null);
__d("InputCaretUtility",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={moveCaretToBeginning:function(i){if(typeof i.selectionStart==="number"){i.selectionStart=i.selectionEnd=0;}else if(i.createTextRange!==undefined){i.focus();var j=i.createTextRange();j.collapse(false);j.select();}},delayedMoveCaretToBeginning:function(i){setTimeout(function(){return h.moveCaretToBeginning(i);});}};f.exports=h;},null);
__d('LegacyMentionsInput.react',['Bootloader','CLogConfig','TypeaheadMetricsConfig','Event','InputCaretUtility','Keys','React','ReactDOM','DOM','cx','FocusListener'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();c('FocusListener');var r=n.PropTypes,s=n.createClass({displayName:'ReactLegacyMentionsInput',propTypes:{initialData:r.object,placeholder:r.string,datasource:r.object,ref:r.string,viewOptionsTypeObjects:r.object,viewOptionsTypeObjectsOrder:r.array,hashtags:r.bool,autoflip:r.bool,onEnterSubmit:r.func,onFocus:r.func,onBlur:r.func,onTypingStateChange:r.func,onPaste:r.func},componentDidMount:function(){this.props.initialData&&this._initializeTextarea(o.findDOMNode(this));},hasEnteredText:function(){return !!(this._mentionsInput&&this._mentionsInput.getValue().trim());},setSignature:function(t){var u=o.findDOMNode(this.refs.textarea);p.setAttributes(u,{value:t});l.delayedMoveCaretToBeginning(u);},submitComment:function(event){var t;if(event){t=event.target.value&&event.target.value.trim();}else{var u=o.findDOMNode(this.refs.textarea);if(u.value&&u.value!==u.placeholder)t=u.value;}t=t||'';var v={visibleValue:t,encodedValue:t};if(this._mentionsInput)v.encodedValue=this._mentionsInput.getRawValue().trim();var w=this.props.onEnterSubmit(v,event);if(w&&this._mentionsInput){this._mentionsInput.reset();event&&event.preventDefault();}},_handleKeydown:function(event){var t=event.nativeEvent,u=k.getKeyCode(t)==m.RETURN&&!k.$E(t).getModifiers().any,v=this._mentionsInput&&this._mentionsInput.getTypeahead().getView().getSelection();if(this.props.onEnterSubmit&&u&&!v)this.submitComment(event);},_handleFocus:function(){this.props.onFocus&&this.props.onFocus();this._initializeTextarea(o.findDOMNode(this.refs.root));},_handleBlur:function(){this.props.onBlur&&this.props.onBlur();},_initializeTextarea:function(t){if(this._mentionsInput||this._bootloadingMentions)return;this._bootloadingMentions=true;h.loadModules(["CompactTypeaheadRenderer","ContextualTypeaheadView","CLoggerX","InputSelection","MentionsInput","TextAreaControl","Typeahead","TypeaheadAreaCore","TypeaheadBestName","TypeaheadHoistFriends","TypeaheadMetrics","TypeaheadMetricsX","TypingDetector","UFIComments"],(function(u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){var ia=o.findDOMNode(this.refs.textarea);new z(ia);if(i.gkResults){var ja=ha.getComment(this.props.replyCommentID),ka=ja?ja.fbid:null;w.trackMentionsInput(ia,ka);}if(this.props.onTypingStateChange){var la=new ga(ia);la.init();la.subscribe('change',this.props.onTypingStateChange);}var ma={autoSelect:true,renderer:u,causalElement:ia,autoflip:this.props.autoflip};if(this.props.viewOptionsTypeObjects)ma.typeObjects=this.props.viewOptionsTypeObjects;if(this.props.viewOptionsTypeObjectsOrder)ma.typeObjectsOrder=this.props.viewOptionsTypeObjectsOrder;var na=new aa(this.props.datasource,{ctor:v,options:ma},{ctor:ba},o.findDOMNode(this.refs.typeahead)),oa=[ca,da];if(j.gkResults){var pa=new fa({extraData:{event_name:'mention_metric_x'}});pa.init(na);}var qa=new ea({extraData:{event_name:'mentions',from_location:'comments'}});aa.initNow(na,oa,qa);this._mentionsInput=new y(t,na,ia,{hashtags:this.props.hashtags});this._mentionsInput.init({},this.props.initialData);if(this.props.initialData)x.set(ia,ia.value.length);if(this.props.onPaste)k.listen(ia,'paste',this.props.onPaste);this._bootloadingMentions=false;}).bind(this));},focus:function(){try{o.findDOMNode(this.refs.textarea).focus();}catch(t){}},render:function(){var t="textInput"+(' '+"mentionsTextarea")+(' '+"uiTextareaAutogrow")+(' '+"uiTextareaNoResize")+(' '+"UFIAddCommentInput");return (n.createElement('div',{ref:'root',className:'uiMentionsInput textBoxContainer ReactLegacyMentionsInput'},n.createElement('div',{className:'highlighter'},n.createElement('div',null,n.createElement('span',{className:'highlighterContent hidden_elem'}))),n.createElement('div',{ref:'typeahead',className:'uiTypeahead mentionsTypeahead'},n.createElement('div',{className:'wrap'},n.createElement('input',{type:'hidden',autoComplete:'off',className:'hiddenInput'}),n.createElement('div',{className:'innerWrap'},n.createElement('textarea',{ref:'textarea',name:'add_comment_text',className:t,title:this.props.placeholder,placeholder:this.props.placeholder,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyDown:this._handleKeydown})))),n.createElement('input',{type:'hidden',autoComplete:'off',className:'mentionsHidden',defaultValue:''})));}});f.exports=s;},null);
__d('LitestandStoryInsertionStatus',['ArbiterMixin'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='check',j={registerBlocker:function(k){return j.subscribe(i,function(l,m){if(m.can_insert&&k())m.can_insert=false;});},canInsert:function(){var k={can_insert:true};j.inform(i,k);return k.can_insert;}};Object.assign(j,h);f.exports=j;},null);
__d('PageAdminSignatureSettings',['Arbiter','AdminSignatureConstants','invariant'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){'use strict';this.$PageAdminSignatureSettings1();if(!!m)this.$PageAdminSignatureSettings2=m;if(l instanceof k){!!!m?j(0):undefined;this.$PageAdminSignatureSettings3(l);}else if(l!==null&&l!==undefined){this.$PageAdminSignatureSettings4=l.isValid;if(!this.$PageAdminSignatureSettings4)return;this.$PageAdminSignatureSettings5=l.signature;this.$PageAdminSignatureSettings6=l.shouldAttachToPost;this.$PageAdminSignatureSettings7=l.shouldAttachToComment;this.$PageAdminSignatureSettings8=l.shouldAttachToMessage;this.$PageAdminSignatureSettings9=l.everPromptedUser;this.$PageAdminSignatureSettings10=l.pageID;this.$PageAdminSignatureSettings11=l.userID;}h.subscribe(i.EVENT_ADMIN_SIGNATURE_SETTING_CHANGED,(function(n,o){return this.$PageAdminSignatureSettings12(n,o);}).bind(this));h.subscribe(i.EVENT_ADMIN_SIGNATURE_PROMPTED,(function(n,o){return this.$PageAdminSignatureSettings13(n,o);}).bind(this));}k.prototype.getIsValid=function(){'use strict';return this.$PageAdminSignatureSettings4;};k.prototype.getIsValidWithActor=function(){'use strict';return this.getIsValid()&&this.$PageAdminSignatureSettings2!==null&&this.$PageAdminSignatureSettings2===this.$PageAdminSignatureSettings10;};k.prototype.getPageID=function(){'use strict';return this.$PageAdminSignatureSettings10;};k.prototype.getUserID=function(){'use strict';return this.$PageAdminSignatureSettings11;};k.prototype.getSignature=function(){'use strict';return this.$PageAdminSignatureSettings5;};k.prototype.getShouldAttachToPost=function(){'use strict';return this.$PageAdminSignatureSettings6;};k.prototype.getShouldAttachToComment=function(){'use strict';return this.$PageAdminSignatureSettings7;};k.prototype.getShouldAttachToMessage=function(){'use strict';return this.$PageAdminSignatureSettings8;};k.prototype.getEverPromptedUser=function(){'use strict';return this.$PageAdminSignatureSettings9;};k.prototype.$PageAdminSignatureSettings1=function(){'use strict';this.$PageAdminSignatureSettings9=false;this.$PageAdminSignatureSettings10="";this.$PageAdminSignatureSettings7=false;this.$PageAdminSignatureSettings8=false;this.$PageAdminSignatureSettings6=false;this.$PageAdminSignatureSettings5="";this.$PageAdminSignatureSettings11="";this.$PageAdminSignatureSettings4=false;this.$PageAdminSignatureSettings2=null;};k.prototype.$PageAdminSignatureSettings3=function(l){'use strict';this.$PageAdminSignatureSettings9=l.$PageAdminSignatureSettings9;this.$PageAdminSignatureSettings10=l.$PageAdminSignatureSettings10;this.$PageAdminSignatureSettings7=l.$PageAdminSignatureSettings7;this.$PageAdminSignatureSettings8=l.$PageAdminSignatureSettings8;this.$PageAdminSignatureSettings6=l.$PageAdminSignatureSettings6;this.$PageAdminSignatureSettings5=l.$PageAdminSignatureSettings5;this.$PageAdminSignatureSettings11=l.$PageAdminSignatureSettings11;this.$PageAdminSignatureSettings4=l.$PageAdminSignatureSettings4;};k.prototype.$PageAdminSignatureSettings13=function(l,m){'use strict';if(m.userID!==this.$PageAdminSignatureSettings11)return;this.$PageAdminSignatureSettings9=true;};k.prototype.$PageAdminSignatureSettings12=function(l,m){'use strict';if(m.userID!==this.$PageAdminSignatureSettings11||m.pageID!==this.$PageAdminSignatureSettings10)return;switch(m.settingChanged){case i.SETTING_ATTACH_TO_POST:this.$PageAdminSignatureSettings6=m.newValue;break;case i.SETTING_ATTACH_TO_MESSAGE:this.$PageAdminSignatureSettings8=m.newValue;break;case i.SETTING_ATTACH_TO_COMMENT:this.$PageAdminSignatureSettings7=m.newValue;break;default:j(0);}};f.exports=k;},null);
__d("XPagesAdminSignatureSettingsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/admin\/signature\/settings\/",{});},null,{});
__d("XPagesAdminSignaturePromptDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/admin\/signature\/prompt\/",{__asyncDialog:{type:"Int"}});},null,{});
__d('PageAdminSignatureMonitor',['Arbiter','AsyncRequest','AdminSignatureConstants','DOM','DOMQuery','Event','InputCaretUtility','PageAdminSignatureSettings','XPagesAdminSignatureSettingsController','XPagesAdminSignaturePromptDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r={registerComposerControlForSignature:function(s,t,u,v){if(!t||!t.isValid)return;var w=this._getUnderlyingTextControl(s),x=new o(t,u);m.listen(w,'focus',(function(){this._handleInputFieldFocusForSignature(w,x,x.getShouldAttachToPost(),function(y){return y.value;},function(y,z){if(v)z='\n\n'.concat(z);k.setAttributes(y,{value:z});n.delayedMoveCaretToBeginning(y);});}).bind(this));},handleReactInputFieldFocusForSignature:function(s,t,u){this._handleInputFieldFocusForSignature(s,t,u,function(v){return v.hasEnteredText();},function(v,w){return v.setSignature(w);});},prepareConfirmationDialog:function(s,t,u){s.subscribe('confirm',(function(){s.hide();this._notifyPromptConfirmation(t,u,true);}).bind(this));s.subscribe('cancel',(function(){this._notifyPromptConfirmation(t,u,false);}).bind(this));},_promptForAutoSignature:function(s){h.inform(j.EVENT_ADMIN_SIGNATURE_PROMPTED,{userID:s.getUserID()});var t=q.getURIBuilder().getURI();new i().setURI(t).setData({pageID:s.getPageID()}).send();},_handleInputFieldFocusForSignature:function(s,t,u,v,w){if(!t||!t.getIsValidWithActor())return;if(!t.getEverPromptedUser()){this._promptForAutoSignature(t);}else if(u&&!v(s))w(s,t.getSignature());},_notifyPromptConfirmation:function(s,t,u){var v=p.getURIBuilder().getURI();new i().setURI(v).setData({pageID:s,signatureOption:j.SETTING_EVER_PROMPTED,signatureOptionValue:u}).send();this._aribiterNotifyPromptConfirmation(s,t,u);},_getUnderlyingTextControl:function(s){return l.find(s,'textarea');},_aribiterNotifyPromptConfirmation:function(s,t,u){var v=[j.SETTING_ATTACH_TO_POST,j.SETTING_ATTACH_TO_COMMENT,j.SETTING_ATTACH_TO_MESSAGE];v.forEach(function(w){h.inform(j.EVENT_ADMIN_SIGNATURE_SETTING_CHANGED,{pageID:s,userID:t,settingChanged:w,newValue:u});});}};f.exports=r;},null);
__d('SnowflakePermalinkUtils',['URI'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=/\/[^/]+\/(albums\/([^/]+)|posts\/([a-zA-Z]+[^/]+))\/([^/]+\/)?/,j=/\/[^/]+\/(albums|posts)\/([^/]+)\/([^/]+\/)?/,k={isPermalinkURI:function(l){l=new h(l);return i.test(l.getPath());},parseURI:function(l){if(!this.isPermalinkURI(l))return {};l=new h(l);var m=l.getPath().match(j);return {setToken:m[2],entIdentifierToken:m[3],photoID:l.getQueryData().photo_id};}};f.exports=k;},null);
__d('UFIActorIcon.react',['React','Image.react','UFIConfig','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.createClass({displayName:'UFIActorIcon',render:function(){var m=h.createElement(i,this.props);if(j.rAI)m=h.createElement('div',{className:"_4cd"},m);return m;}});f.exports=l;},null);
__d('CloseButton.react',['React','Image.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.createClass({displayName:'CloseButton',render:function(){var m=this.props,n=m.size||'medium',o=m.appearance||'normal',p=n==='small',q=n==='huge',r=o==='dark',s=o==='inverted',t=m.ajaxify||null,u=m.rel||null,v="uiCloseButton"+(p?' '+"uiCloseButtonSmall":'')+(q?' '+"uiCloseButtonHuge":'')+(p&&r?' '+"uiCloseButtonSmallDark":'')+(p&&s?' '+"uiCloseButtonSmallInverted":'')+(!p&&r?' '+"uiCloseButtonDark":'')+(!p&&s?' '+"uiCloseButtonInverted":'');return (h.createElement('a',babelHelpers._extends({},this.props,{ajaxify:t,href:'#',role:'button','aria-label':m.tooltip,'data-hover':m.tooltip&&'tooltip','data-tooltip-alignh':m.tooltip&&'center',className:k(this.props.className,v),rel:u}),h.createElement(i,{className:'uiCloseButtonHighContrast',src:'/images/chat/tab/close.png'})));}});f.exports=l;},null);
__d('UFIAttachedPhotoPreview.react',['BootloadedComponent.react','CloseButton.react','DOMContainer.react','HTML','LoadingIndicator.react','React','XUISpinner.react','JSResource','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();'use strict';var q=m.PropTypes,r=80,s=m.createClass({displayName:'UFIAttachedPhotoPreview',propTypes:{attachedPhoto:q.object,attachedSticker:q.object,onRemoveAttachedPhotoPreview:q.func,onRemoveAttachedStickerPreview:q.func,subtitle:q.string,isLoadingPhoto:q.bool},_getScaledDimensions:function(t,u){var v,w,x;if(u>t){x=r/u;v=t*x;w=u*x;}else{x=r/t;v=t*x;w=u*x;}return {height:Math.round(v),width:Math.round(w)};},render:function(){var t=null,u=this.props.attachedPhoto||this.props.attachedSticker;if(u&&this.props.attachedSticker){var v=this._getScaledDimensions(u.metadata.height,u.metadata.width),w=null,x=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){w=u.metadata.sprite_uri_2x;x=u.metadata.source_uri_2x;}else{w=u.metadata.sprite_uri;x=u.metadata.source_uri;}t=m.createElement(h,{bootloadPlaceholder:m.createElement(n,null),bootloadLoader:o('Sticker.react'),animationTrigger:'load_and_hover',frameCount:u.metadata.frameCount,frameRate:u.metadata.frameRate,framesPerCol:u.metadata.framesPerCol,framesPerRow:u.metadata.framesPerRow,spriteURI:w,sourceHeight:v.height,sourceURI:x,sourceWidth:v.width});}else if(u&&this.props.attachedPhoto){var y=u.markupPreview;if(k.isHTML(y.markup))y=k.replaceJSONWrapper(y.markup).getRootNode();t=m.createElement(j,null,y);}else if(this.props.isLoadingPhoto)t=m.createElement(l,{color:'white',className:'UFICommentPhotoAttachedPreviewLoadingIndicator',size:'medium'});var z=null,aa=this.props.attachedPhoto?this.props.onRemoveAttachedPhotoPreview:this.props.onRemoveAttachedStickerPreview;if(t!=null){var ba=null;if(this.props.attachedSticker){ba=p._("Remove Sticker");}else if(this.props.attachedPhoto)ba=p._("Remove Photo");z=m.createElement('div',{className:'UFICommentPhotoAttachedPreview pas'},t,m.createElement(i,{tooltip:ba,onClick:aa}));}return z;}});f.exports=s;},null);
__d('UFIAttachPhotoSection.react',['Bootloader','DOM','Event','Focus','React','ReactDOM','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();'use strict';var p=l.PropTypes,q='/ajax/ufi/upload/',r=l.createClass({displayName:'UFIAttachPhotoSection',propTypes:{getPhotoUploadData:p.func.isRequired,prepareForAttachedPhotoPreview:p.func.isRequired,onPhotoUploadComplete:p.func.isRequired,setFileInput:p.func.isRequired,attachment:p.object},componentDidMount:function(){var s=m.findDOMNode(this.refs.PhotoInputContainer),t=m.findDOMNode(this.refs.PhotoInputControl),u=o._("Attach a Photo"),v=i.create('input',{accept:'image/*',className:"_n",name:'file',type:'file',title:u,'aria-label':u});i.appendContent(t,v);var w=j.listen(s,'click',(function(event){h.loadModules(["FileInput","FileInputUploader","Input"],(function(x,y,z){var aa=new x(s,t,v),ba=new y().setAllowCrossPageTransition(true).setURI(q).setData(this.props.getPhotoUploadData());aa.subscribe('change',(function(event){if(aa.getValue()){this.props.prepareForAttachedPhotoPreview();ba.setInput(aa.getInput()).send();}}).bind(this));ba.subscribe('success',(function(ca,da){aa.clear();this.props.onPhotoUploadComplete(da.response);}).bind(this));ba.subscribe('failure',(function(ca,da){aa.clear();this.props.onPhotoUploadComplete(da.response);}).bind(this));k.setWithoutOutline(t);this.props.setFileInput(aa,ba);}).bind(this));w.remove();}).bind(this));},render:function(){var s=this.props.attachment,t=s?"UFICommentPhotoAttachedIcon":"UFICommentPhotoIcon",u="UFIPhotoAttachLinkWrapper _m";return (l.createElement('div',{ref:'PhotoInputContainer',className:u,'data-hover':'tooltip','data-tooltip-alignh':'center','aria-label':o._("Attach a Photo")},l.createElement('i',{ref:'PhotoInputControl',className:t})));}});f.exports=r;},null);
__d('cssVar',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){throw new Error('cssVar'+'("'+i+'"): Unexpected class transformation.');}f.exports=h;},null);
__d('UFIBusinessActorIcon.react',['React','cssVar','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'UFIBusinessActorIcon',propTypes:{firstName:k.string.isRequired,lastName:k.string.isRequired,classNames:k.string,textClassNames:k.string},render:function(){var m=this._getInitials(this.props.firstName,this.props.lastName);return (h.createElement('div',{className:this.props.classNames,style:{backgroundColor:"#edf9fd"}},h.createElement('div',{className:this.props.textClassNames},m)));},_getInitials:function(m,n){if(!(typeof m==='string')||!(typeof n==='string'))return '?';var o;if(this._isLatinLanguage(m+n)){o=m.trim()[0]+n.trim()[0];o=o.toUpperCase();}else o=m.trim()[0];return o;},_isLatinLanguage:function(m){if(!(typeof m==='string'))return false;var n=m.replace(/[\s.-]+/g,'');return (/^[a-zA-Z]+$/.test(n));}});f.exports=l;},null);
__d('ImageBlock.react',['LeftRight.react','React','cx','invariant','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(p){!(p.children&&(p.children.length===2||p.children.length===3))?k(0):undefined;}function n(p){return "img"+(' '+"_8o")+(p==='small'?' '+"_8r":'')+(p==='medium'?' '+"_8s":'')+(p==='large'?' '+"_8t":'');}var o=i.createClass({displayName:'ImageBlock',render:function(){m(this.props);var p=this.props.children[0],q=this.props.children[1],r=this.props.children[2],s=this.props.spacing||'small',t={className:l(p.props.className,n(s),this.props.imageClassName)};if(p.type==='img'){if(p.props.alt===undefined)t.alt='';}else if((p.type==='a'||p.type==='link')&&p.props.tabIndex===undefined&&p.props.title===undefined&&p.props['aria-label']===undefined){t.tabIndex='-1';t['aria-hidden']='true';}p=i.cloneElement(p,t);var u=l(this.props.contentClassName,"_42ef"+(s==='small'?' '+"_8u":'')),v;if(!r){v=i.createElement('div',{className:u},q);}else v=i.createElement(h,{className:u,direction:h.DIRECTION.right},q,r);return (i.createElement(h,babelHelpers._extends({},this.props,{direction:h.DIRECTION.left}),p,v));}});f.exports=o;},null);
__d('UFIImageBlock.react',['ImageBlock.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=i.createClass({displayName:'UFIImageBlock',render:function(){return (i.createElement(h,babelHelpers._extends({},this.props,{imageClassName:"UFIImageBlockImage",contentClassName:"UFIImageBlockContent"}),this.props.children));}});f.exports=k;},null);
__d('UFIStickerButton.react',['Bootloader','ContextualLayerAutoFlip','Link.react','React','ReactLayeredComponentMixin','StickerInterfaces','cx','fbt','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=k.PropTypes,r=k.createClass({displayName:'UFIStickerButton',propTypes:{onStickerFlyoutShow:q.func,onStickerSelected:q.func.isRequired,onEmoticonSelected:q.func,showTooltip:q.bool,stickerInterface:q.oneOf(p(m))},mixins:[l],getDefaultProps:function(){return {showTooltip:true,stickerInterface:m.COMMENTS};},getInitialState:function(){return {renderFlyout:null,flyoutShown:false};},render:function(){var s=o._("Post a sticker");return (k.createElement(j,{'aria-label':this.props.showTooltip?s:null,className:'UFICommentStickerButton','data-hover':'tooltip','data-tooltip-alignh':'center',onClick:this._onLinkClicked,onMouseDown:this._prepareForClick},k.createElement('div',{ref:'icon',tabIndex:0,className:'UFICommentStickerIcon'}),this.props.children));},renderLayers:function(){return !this.state.renderFlyout?{}:this.state.renderFlyout();},_hideFlyout:function(){this.setState({flyoutShown:false});},_prepareForClick:function(){this._clickGuard=this.state.flyoutShown;},_onLinkClicked:function(){if(this.state.renderFlyout!==null){if(!this._clickGuard){this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();this.setState({flyoutShown:true});}return;}h.loadModules(["XUIContextualDialog.react","StickersFlyout.react"],(function(s,t){this.setState({flyoutShown:true,renderFlyout:(function(){return {contextualDialog:k.createElement(s,{alignment:'right',behaviors:{flip:i},className:"_5e-r",contextRef:(function(){return this.refs.icon;}).bind(this),onBlur:this._hideFlyout,position:'above',shown:this.state.flyoutShown,hasActionableContext:true,width:278},k.createElement('div',null,k.createElement(t,{onEscKeyDown:this._hideFlyout,onStickerSelect:this._onStickerSelected,onEmoticonSelect:this._onEmoticonSelected,stickerInterface:this.props.stickerInterface,shown:this.state.flyoutShown})))};}).bind(this)});this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();}).bind(this));},_onStickerSelected:function(s,event){this.props.onStickerSelected(s,event);this._hideFlyout();},_onEmoticonSelected:function(s){this.props.onEmoticonSelected(s);this._hideFlyout();}});f.exports=r;},null);
__d('dotAccess',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=j.split('.');do{var m=l.shift();i=i[m]||k&&(i[m]={});}while(l.length&&i);return i;}f.exports=h;},null);
__d('UFIAddComment.react',['ActorURI','Arbiter','AsyncRequest','Bootloader','ClipboardPhotoUploader','getActiveElement','Event','Keys','LegacyMentionsInput.react','Link.react','LitestandStoryInsertionStatus','PageAdminSignatureMonitor','React','ReactDOM','ReactLayeredComponentMixin','Run','SnowflakePermalinkUtils','TrackingNodes','UFIActorIcon.react','UFIAddCommentAction','UFIAttachedPhotoPreview.react','UFIAttachPhotoSection.react','UFIBusinessActorIcon.react','UFIConfig','UFIConstants','UFIImageBlock.react','UFIStickerButton.react','URI','XFeedNUXSaveSeenStateController','cx','dotAccess','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){if(c.__markCompiled)c.__markCompiled();var oa=t.PropTypes,pa=ma._("Write a comment..."),qa=ma._("Write a reply..."),ra="fcg fss UFICommentTip",sa=19,ta='/ajax/ufi/upload/',ua='/ajax/ufi/sticker_preview/',va=t.createClass({displayName:'UFIAddComment',mixins:[v],propTypes:{contextArgs:oa.object.isRequired,viewerActor:oa.object.isRequired,allowPhotoAttachments:oa.bool,allowStickerAttachments:oa.bool,attachedSticker:oa.object,editingComment:oa.object.isRequired,feedbackIsRanked:oa.bool,hide:oa.bool,initialData:oa.object,isEditing:oa.bool,isFirstComponent:oa.bool,isLastComponent:oa.bool,isSnowlift:oa.bool,isQAndA:oa.bool,mentionsDataSource:oa.object,onTypingStateChange:oa.func,replyCommentID:oa.string,showSendOnEnterTip:oa.bool,subtitle:oa.any,targetID:oa.string,withoutSeparator:oa.bool},contextTypes:{dispatch:oa.func},getInitialState:function(){var wa=la(this.props,'editingComment.photo_comment');return {attachedPhoto:wa||null,attachedSticker:this.props.attachedSticker||null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,renderStickerNUX:null,stickerNUXVisible:false,isFocused:this.props.isEditing};},_onKeyDown:function(event){if(this.props.isEditing&&n.getKeyCode(event.nativeEvent)===o.ESC)this.context.dispatch(aa.cancel());if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){w.onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var wa=m();if(n.getKeyCode(event.nativeEvent)===o.ESC)wa.blur();},_handleUnsavedChanges:function(){var wa=b.PageTransitions;if(wa){var xa=ia.getNextURI(),ya=wa.getMostRecentURI();if(xa.getQueryData().hasOwnProperty('theater')||ya.getQueryData().hasOwnProperty('theater')||xa.getQueryData().hasOwnProperty('sdialog')||x.isPermalinkURI(xa)||x.isPermalinkURI(ya))return;var za=b.DialogNavigationStack;if(za&&za.isActiveURI(xa))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return ma._("You haven't finished your comment yet. Do you want to leave without finishing?");},_blur:function(){this.setState({stickerNUXVisible:false});setTimeout((function(){if(this.isMounted())this.setState({isFocused:false});}).bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function(event){var wa=new l(ta,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[wa.subscribe('upload_start',this._prepareForAttachedPhotoPreview),wa.subscribe('upload_error',this._onRemoveAttachedPhotoPreviewClicked),wa.subscribe('upload_success',(function(xa,ya){this._onPhotoUploadComplete(ya);}).bind(this))];wa.handlePaste(event);},_onEnterSubmit:function(wa,event){var xa=this.state.attachedPhoto||this.state.attachedSticker,ya=this.props.isEditing||xa;if(this.state.isLoadingPhoto){return false;}else if(!wa.encodedValue.trim()&&!ya)return false;wa.encodedValue=wa.encodedValue.trim();if(xa){wa.attachedPhoto=this.state.attachedPhoto;wa.attachedSticker=this.state.attachedSticker;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedSticker:null});}else{wa.attachedPhoto=null;wa.attachedSticker=null;}if(this.props.onCommentSubmit){this.props.onCommentSubmit(wa,event);}else this.context.dispatch(aa.submitEdit(this.props.editingComment,wa,event.target));return true;},_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(wa){wa.unsubscribe();});},componentWillMount:function(){this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=r.registerBlocker((function(){return this.state.isCommenting;}).bind(this));},componentWillUnmount:function(){this._cancelCurrentSubscriptions();if(this._remixedImageToken)i.unsubscribe(this._remixedImageToken);if(this._focusCommentFieldToken)i.unsubscribe(this._focusCommentFieldToken);this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;},focus:function(){var wa={isCommenting:true,isFocused:true};if(this.props.allowStickerAttachments&&ea.shouldShowStickerNUX){var xa=ja.getURIBuilder().setString('key','sticker_comments').setBool('seen',true).getURI();new j(xa).send();if(this.state.renderStickerNUX===null)k.loadModules(["XUIAmbientNUX.react"],(function(za){wa.renderStickerNUX=(function(){return {ambientNUX:t.createElement(za,{contextRef:(function(){return this.refs.sticker_button;}).bind(this),shown:this.state.stickerNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideStickerNUX},ma._("Now you can comment with a sticker!"))};}).bind(this);}).bind(this));ea.shouldShowStickerNUX=false;wa.stickerNUXVisible=true;}var ya=this.props.contextArgs.pagesAdminSignatureSettings;if(ya)s.handleReactInputFieldFocusForSignature(this.refs.mentionsinput,ya,ya.getShouldAttachToComment());this.setState(wa);},renderLayers:function(){return !this.state.renderStickerNUX?{}:this.state.renderStickerNUX();},_setFileInput:function(wa,xa){this.setState({fileInput:wa,fileUploader:xa});},render:function(){var wa=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,xa=null;if(this.props.subtitle){xa=t.createElement('span',{className:ra},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){xa=t.createElement('span',{className:ra},ma._("{cancel}",[ma.param('cancel',t.createElement(q,{onClick:(function(){return (this.context.dispatch(aa.cancel()));}).bind(this)},ma._("Cancel")))]));}else if(this.props.isEditing){xa=t.createElement('span',{className:ra},ma._("Press Esc to {cancel}.",[ma.param('cancel',t.createElement(q,{onClick:(function(){return (this.context.dispatch(aa.cancel()));}).bind(this)},ma._("cancel")))]));}else if(this.props.showSendOnEnterTip)xa=t.createElement('span',{className:ra},ma._("Press Enter to post."));var ya=null,za=null,ab=this.state.attachedPhoto||this.state.attachedSticker,bb=null;if(this.props.allowStickerAttachments&&!ab)za=t.createElement(ha,{ref:'sticker_button',onStickerSelected:this.onStickerSelected,onEmoticonSelected:this._insertEmoticonIntoCommentText});if(this.props.allowPhotoAttachments){bb=this._onPaste;ya=t.createElement(ca,{getPhotoUploadData:this._getPhotoUploadData,prepareForAttachedPhotoPreview:this._prepareForAttachedPhotoPreview,onPhotoUploadComplete:this._onPhotoUploadComplete,setFileInput:this._setFileInput,attachment:ab});}var cb=y.getTrackingInfo(y.types.ADD_COMMENT_BOX),db=na("img"+(' '+"UFIActorImage")+(' '+"_54ru")+(!wa?' '+"hidden_elem":'')),eb=this.props.viewerActor.isBusinessPersona?t.createElement(da,{firstName:this.props.viewerActor.firstName,lastName:this.props.viewerActor.lastName,classNames:db,textClassNames:"UFIBusinessActorIconText"}):t.createElement(z,{className:db,src:this.props.viewerActor.thumbSrc,alt:this.props.viewerActor.name}),fb=t.createElement('div',{className:'UFIReplyActorPhotoWrapper',onClick:this.focus},eb),gb=na((this.props.hide?"noDisplay":'')+(' '+"UFIRow")+(' '+"UFIComponent")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),hb;if(!!this.props.replyCommentID){hb=qa;}else if(this.props.isQAndA){hb=ma._("Ask a question...");}else if(this.props.source===fa.UFIFeedbackSourceType.TOPIC_CONVERSATION){hb=ma._("Discuss this topic...");}else if(!this.props.contextArgs.hasComments&&this.props.contextArgs.commentPlaceholderText){hb=this.props.contextArgs.commentPlaceholderText;}else hb=pa;var ib=this.props.contextArgs.viewoptionstypeobjects,jb=this.props.contextArgs.viewoptionstypeobjectsorder;if(this.props.attachedPhoto&&!this.props.subtitle)xa=null;var kb=t.createElement(ba,{attachedPhoto:this.state.attachedPhoto,attachedSticker:this.state.attachedSticker,onRemoveAttachedPhotoPreview:this._onRemoveAttachedPhotoPreviewClicked,onRemoveAttachedStickerPreview:this._onRemoveAttachedStickerPreviewClicked,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto}),lb=this.props.allowStickerAttachments?na("UFIMentionsInputWrap","UFIStickersEnabledInput"):"UFIMentionsInputWrap",mb,nb,ob;if(this.props.contextArgs.mentionsinput){var pb=this.props.contextArgs.mentionsinput;mb=pb.inputComponent;nb=pb.viewComponent;ob=pb.viewProps;}else mb=p;return (t.createElement('li',{className:gb,onKeyDown:this._onKeyDown,'data-ft':cb},t.createElement(ga,{className:lb},fb,t.createElement('div',{className:'UFICommentContainer'},t.createElement('div',{className:'UFIInputContainer'},t.createElement(mb,{replyCommentID:this.props.replyCommentID,initialData:this.props.initialData,placeholder:hb,datasource:this.props.mentionsDataSource,ref:'mentionsinput',viewComponent:nb,viewProps:ob,viewOptionsTypeObjects:ib,viewOptionsTypeObjectsOrder:jb,hashtags:this.props.contextArgs.sht,showHashtagTypeahead:this.props.contextArgs.showHashtagTypeahead,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onTypingStateChange:this.props.onTypingStateChange,onPaste:bb,showBusinessTypeahead:this.props.contextArgs.showBusinessTypeahead,ftEntIdentifier:this.props.contextArgs.ftentidentifier}),t.createElement('div',{className:"UFICommentAttachmentButtons clearfix"},ya,za)),kb,xa))));},componentDidUpdate:function(wa,xa,ya){if(!xa.attachedPhoto&&this.state.attachedPhoto||!xa.attachedSticker&&this.state.attachedSticker||!xa.isCommenting&&this.state.isCommenting)this.refs.mentionsinput.focus();if(wa.viewerActor.id!==this.props.viewerActor.id){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedPhotoPreviewClicked();}},componentDidMount:function(){if(!this.props.allowPhotoAttachments)return;if(this.props.replyCommentID===null){this._focusCommentFieldToken=i.subscribe('focusCommentField'+this.props.contextArgs.feedbackID,(function(wa){this.refs.mentionsinput.focus();}).bind(this));i.inform('finishedMounting'+this.props.contextArgs.feedbackID);if(this.props.isSnowlift)this._remixedImageToken=i.subscribe('newRemixedImage'+this.props.contextArgs.feedbackID,(function(wa,xa){var event={clipboardData:{items:[xa]}};this._onPaste(event);}).bind(this));}},insertMention:function(wa){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(wa);},_getPhotoUploadData:function(){var wa=this.props.viewerActor.id,xa={profile_id:wa,target_id:this.props.targetID,source:sa};xa[h.PARAMETER_ACTOR]=wa;return xa;},_onPhotoUploadComplete:function(wa){if(!this.state.isLoadingPhoto)return;var xa=wa.getPayload();if(xa&&xa.fbid){this.setState({attachedPhoto:xa,isLoadingPhoto:false});}else this._onRemoveAttachedPhotoPreviewClicked(null);},_onRemoveAttachedPhotoPreviewClicked:function(event){this.setState({attachedPhoto:null,isLoadingPhoto:false});},_prepareForAttachedPhotoPreview:function(){this.setState({attachedPhoto:null,isLoadingPhoto:true});},_onStickerUploadComplete:function(wa){if(!this.state.isLoadingPhoto)return;var xa=wa.getPayload();if(xa&&xa.fbid){this.setState({attachedSticker:xa,isLoadingPhoto:false});}else{k.loadModules(["Dialog"],function(ya){var za=ma._("Sticker Failed"),ab=ma._("There was a problem attaching the sticker.");new ya().setTitle(za).setBody(ab).setButtons(ya.OK).show();});this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function(event){this.setState({attachedSticker:null,isLoadingPhoto:false});},onStickerSelected:function(wa,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this._prepareForAttachedStickerPreview(wa);return;}this.sendSticker(wa,event);},_prepareForAttachedStickerPreview:function(wa){this.setState({attachedSticker:null,isLoadingPhoto:true});new j(ua).setData({sticker_id:wa}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},sendSticker:function(wa,event){var xa={encodedValue:'',visibleValue:'',attachedPhoto:null,attachedSticker:{fbid:wa}};this.props.onCommentSubmit(xa,event);},_insertEmoticonIntoCommentText:function(wa){k.loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],(function(xa,ya,za,ab){var bb=xa.symbols[wa];if(!bb)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(bb);return;}if(!this._selectionPosition)this._selectionPosition=new ab(u.findDOMNode(this.refs.mentionsinput.refs.textarea));var cb=this.refs.mentionsinput.refs.getTextFieldDOM(),db=za.getInstance(cb),eb=db.getValue(),fb=ya.insertEmoticon(bb,eb,this._selectionPosition.getPos());db.setValue(fb.result);this._selectionPosition.setPos(fb.start,fb.end);}).bind(this));},_hideStickerNUX:function(){this.setState({stickerNUXVisible:false});}});f.exports=va;},null);
__d('UFIAddCommentController',['Arbiter','MentionsInputUtils','Parent','UFIAddComment.react','React','ReactDOM','ShortProfiles','UFICentralUpdates','UFIFeedbackTargets','UFIInstanceState','UFIUIEvents','UFIUserActions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();function t(u,v,w,x){this.id=v;this._ufiInstanceID=x.instanceid;this._contextArgs=x;this._contextArgs.feedbackID=v;this._replyCommentID=w;this._replyCommentParentID=null;if(u){this.root=u;if(!this._contextArgs.rootid)this._contextArgs.rootid=u.id;this.render();o.subscribe('instance-updated',(function(y,z){var aa=z.updates;if(this._ufiInstanceID in aa)this.render();}).bind(this));o.subscribe('feedback-updated',(function(y,z){var aa=z.updates;if(this.id in aa)this.render();}).bind(this));}o.subscribe('feedback-id-changed',(function(y,z){var aa=z.updates;if(this.id in aa)this.id=aa[this.id];}).bind(this));}Object.assign(t.prototype,{_onCommentSubmit:function(u,event){s.addComment(this.id,u.visibleValue,u.encodedValue,{source:this._contextArgs.source,ufiinstanceid:this._ufiInstanceID,target:event.target,replyid:this._replyCommentID,rootid:this._contextArgs.rootid,attachedphoto:u.attachedPhoto,attachedsticker:u.attachedSticker,feedcontext:this._contextArgs.feedcontext,replycommentparentid:this._replyCommentParentID});p.getFeedbackTarget(this.id,(function(v){var w=j.byTag(this.root,'form');if(w)h.inform('ufi/comment',{form:w,isinverted:v.isranked||this._contextArgs.isstreaming});if(v.showtopicconversationcreationpivot)h.inform(r.UFIActionAddComment,{feedback:v,target:event.target});}).bind(this));return false;},_onTypingStateChange:function(u,v){s.typingChange(this.id,v);},renderAddComment:function(u,v,w,x,y,z,aa,ba,ca,da,ea){this._replyCommentParentID=ea;var fa=this._contextArgs.logtyping?this._onTypingStateChange.bind(this):null,ga=null,ha=q.getKeyForInstance(this._ufiInstanceID,'isediting')&&!this._replyCommentID;p.getFeedbackTarget(this.id,(function(ia){this._contextArgs.feedbackisranked=ia.isranked;}).bind(this));return (l.createElement(k,{hide:ha,replyCommentID:this._replyCommentID,viewerActor:u,targetID:v,initialData:ga,ref:y,withoutSeparator:z,onCommentSubmit:this._onCommentSubmit.bind(this),editingComment:{},mentionsDataSource:w,onTypingStateChange:fa,showSendOnEnterTip:x,allowPhotoAttachments:ba&&!this._contextArgs.isstreaming,allowStickerAttachments:ca&&!this._contextArgs.isstreaming,source:this._contextArgs.source,contextArgs:this._contextArgs,subtitle:aa,isQAndA:da,isSnowlift:this._contextArgs.issnowlift,feedbackIsRanked:this._contextArgs.feedbackisranked}));},renderEditComment:function(u,v,w,x,y,z,aa){var ba;if(w.attachment)ba=w.attachment.type=='sticker'?w.attachment:null;var ca=i.generateDataFromTextWithEntities(w.body);return (l.createElement(k,{viewerActor:u,targetID:v,initialData:ca,mentionsDataSource:x,source:this._contextArgs.source,contextArgs:this._contextArgs,isEditing:true,editingComment:w,attachedSticker:ba,allowPhotoAttachments:y,allowStickerAttachments:z,isQAndA:aa}));},render:function(){if(!this.root)throw new Error('render called on UFIAddCommentController with no root');p.getFeedbackTarget(this.id,(function(u){if(u.cancomment&&u.actorforpost)n.get(u.actorforpost,(function(v){var w=this.renderAddComment(v,u.ownerid,u.mentionsdatasource,u.showsendonentertip,null,null,u.subtitle,u.allowphotoattachments,u.allowstickerattachments,u.isqanda,null);this._addComment=m.render(w,this.root);}).bind(this));}).bind(this));}});f.exports=t;},null);
__d('ScrollSuppressor',['ScrollAwareDOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i=0,j=null,k={start:function(){if(j)return;j=h.subscribe('scroll',function(){if(i>0){i-=1;return false;}return true;});},stop:function(){if(j){h.unsubscribe(j);j=null;}},increment:function(){i+=1;}};f.exports=k;},null);
__d('ScrollableArea.react',['Bootloader','React','ReactDOM','Style','cx','joinClasses','Scrollable'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();c('Scrollable');var n=i.PropTypes,o="uiScrollableArea native",p="uiScrollableAreaWrap scrollable",q="uiScrollableAreaBody",r="uiScrollableAreaContent",s=i.createClass({displayName:'ReactScrollableArea',propTypes:{width:n.number,height:n.oneOfType([n.number,n.string]),onScroll:n.func,shadow:n.bool,fade:n.bool,persistent:n.bool},render:function(){var t={height:this.props.height};return (i.createElement('div',babelHelpers._extends({},this.props,{className:m(this.props.className,o),ref:'root',style:babelHelpers._extends({},this.props.style||{},t)}),i.createElement('div',{className:p,ref:'wrap'},i.createElement('div',{className:q,ref:'body'},i.createElement('div',{className:r},this.props.children)))));},getArea:function(){return this._area;},componentDidMount:function(){h.loadModules(["ScrollableArea"],this._loadScrollableArea);},componentDidUpdate:function(t){if(t.width!==this.props.width)this._setWidthFromProps();var u=this.getArea();if(u)u.throttledAdjustGripper();},componentWillUnmount:function(){this._area&&this._area.destroy();},_loadScrollableArea:function(t){this._area=t.fromNative(j.findDOMNode(this.refs.root),{fade:this.props.fade,persistent:this.props.persistent,shadow:this.props.shadow===undefined?true:this.props.shadow});this._setWidthFromProps();this.props.onScroll&&this._area.subscribe('scroll',this.props.onScroll);},_setWidthFromProps:function(){var t=j.findDOMNode(this.refs.body);k.set(t,'width',this.props.width+'px');}});f.exports=s;},null);
__d('isValidUniqueID',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return (i!==null&&i!==undefined&&i!==''&&(typeof i==='string'||typeof i==='number'));}f.exports=h;},null);
__d('SearchableEntry',['HTML','isValidUniqueID','invariant','FbtResult'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(n){if(!n){return '';}else if(typeof n==='string'){return n;}else if(typeof n==='object'){var o=h.replaceJSONWrapper(n);if(h.isHTML(o)){var p=o.getRootNode();return p.textContent||p.innerText||'';}else return '';}else return '';}function m(n){'use strict';!i(n.uniqueID)?j(0):undefined;this.$SearchableEntry1=n.uniqueID+'';if(n.title instanceof k)n.title=n.title.toString();!(!!n.title&&typeof n.title==='string')?j(0):undefined;this.$SearchableEntry2=n.title;this.$SearchableEntry3=n.order||0;this.$SearchableEntry4=l(n.subtitle);this.$SearchableEntry5=n.keywordString||'';this.$SearchableEntry6=n.photo||'';this.$SearchableEntry7=n.uri||'';this.$SearchableEntry8=n.type||'';var o=n.auxiliaryData||{};this.$SearchableEntry9=o;}m.prototype.getUniqueID=function(){'use strict';return this.$SearchableEntry1;};m.prototype.getOrder=function(){'use strict';return this.$SearchableEntry3;};m.prototype.getTitle=function(){'use strict';return this.$SearchableEntry2;};m.prototype.getSubtitle=function(){'use strict';return this.$SearchableEntry4;};m.prototype.getKeywordString=function(){'use strict';return this.$SearchableEntry5;};m.prototype.getPhoto=function(){'use strict';return this.$SearchableEntry6;};m.prototype.getURI=function(){'use strict';return this.$SearchableEntry7;};m.prototype.getType=function(){'use strict';return this.$SearchableEntry8;};m.prototype.getAuxiliaryData=function(){'use strict';return this.$SearchableEntry9;};f.exports=m;},null);
__d('ShareNowConstants',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={error:h._("This post could not be shared at this time. Please try again later."),success:h._("Your share was posted.")};},null);
__d('UFIAddCommentLink.react',['React','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'UFIAddCommentLink',propTypes:{'data-ft':l.string,isFirstCommentComponent:l.bool,isFirstComponent:l.bool,isLastCommentComponent:l.bool,isLastComponent:l.bool,isQAndA:l.bool,onClick:l.func},render:function(){var n=k("UFIRow"+(' '+"UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),o;if(this.props.isQAndA){o=j._("Ask a question...");}else o=j._("Write a comment...");return (h.createElement('li',{className:n,'data-ft':this.props['data-ft']},h.createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},o)));}});f.exports=m;},null);
__d('HovercardLink',['Bootloader','URI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={getBaseURI:function(){return new i('/ajax/hovercard/hovercard.php');},constructEndpoint:function(k,l){return j.constructEndpointWithGroupAndLocation(k,l,null);},constructEndpointWithLocation:function(k,l){return j.constructEndpointWithGroupAndLocation(k,null,l);},constructEndpointWithGroupAndLocation:function(k,l,m,n){return j.constructEndpointWithGroupLocationAndExtraParams(k,l,m,n);},constructEndpointWithGroupLocationAndExtraParams:function(k,l,m,n){var o=arguments.length<=4||arguments[4]===undefined?null:arguments[4];h.loadModules(["Hovercard"],function(){});var p=new i(j.getBaseURI()).setQueryData({id:k.id}),q={};if(o!==null)for(var r in o)q[r]=o[r];if((k.weakreference||n)&&l)q.group_id=l;if(m)q.hc_location=m;p.addQueryData({extragetparams:JSON.stringify(q)});return p;}};f.exports=j;},null);
__d('Newline.react',['React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=h.createClass({displayName:'Newline',render:function(){return h.createElement('br',this.props);}});f.exports=i;},null);
__d('Text.react',['React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=h.createClass({displayName:'Text',render:function(){return (h.createElement('span',this.props,this.props.children));}});f.exports=i;},null);
__d('ES6StringUtils',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={fromCodePoint:function(){"use strict";for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];if(String.fromCodePoint)return String.fromCodePoint.apply(this,j);var l=[];for(var m=0;m<j.length;m++){var n=Number(j[m]);if(!isFinite(n)||Math.floor(n)!=n||n<0||1114111<n)throw RangeError('Invalid code point '+n);if(n<65536){l.push(String.fromCharCode(n));}else{n-=65536;l.push(String.fromCharCode((n>>10)+55296),String.fromCharCode(n%1024+56320));}}return l.join('');},codePointAt:function(i){"use strict";if(this==null)throw TypeError('Invalid context: '+this);if(String.prototype.codePointAt)return String.prototype.codePointAt.call(this,i);var j=String(this),k=j.length;i=i?Number(i):0;if(i!=i)i=0;if(i<0||k<=i)return undefined;var l=j.charCodeAt(i);if(55296<=l&&l<=56319&&k>i+1){var m=j.charCodeAt(i+1);if(56320<=m&&m<=57343)return (l-55296)*1024+m-56320+65536;}return l;}};f.exports=h;},null);
__d('UnicodeUtils',['ES6StringUtils'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i=55296,j=57343,k=/[\uD800-\uDFFF]/;function l(t){return i<=t&&t<=j;}function m(t){return k.test(t);}function n(t,u){return 1+l(t.charCodeAt(u));}function o(t){if(!m(t))return t.length;var u=0;for(var v=0;v<t.length;v+=n(t,v))u++;return u;}function p(t,u,v){u=u||0;v=v===undefined?Infinity:v||0;if(!m(t))return t.substr(u,v);var w=t.length;if(w<=0||u>w||v<=0)return '';var x=0;if(u>0){for(;u>0&&x<w;u--)x+=n(t,x);if(x>=w)return '';}else if(u<0){for(x=w;u<0&&0<x;u++)x-=n(t,x-1);if(x<0)x=0;}var y=w;if(v<w)for(y=x;v>0&&y<w;v--)y+=n(t,y);return t.substring(x,y);}function q(t,u,v){u=u||0;v=v===undefined?Infinity:v||0;if(u<0)u=0;if(v<0)v=0;var w=Math.abs(v-u);u=u<v?u:v;return p(t,u,w);}function r(t){var u=[];for(var v=0;v<t.length;v+=n(t,v)){var w=h.codePointAt.call(t,v);u.push(w);}return u;}var s={isCodeUnitInSurrogateRange:l,getUTF16Length:n,strlen:o,substr:p,substring:q,getCodePoints:r};f.exports=s;},null);
__d('BaseTextWithEntities.react',['Newline.react','React','ReactFragment','Text.react','UnicodeUtils'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();'use strict';var m=i.PropTypes;function n(r,s){return r.offset-s.offset;}var o=/(\r\n|[\r\n])/,p=m.shape({length:m.number.isRequired,offset:m.number.isRequired}),q=i.createClass({displayName:'BaseTextWithEntities',propTypes:{aggregatedRanges:m.array,imageRanges:m.array,ranges:m.arrayOf(p),rangeRenderer:m.func.isRequired,text:m.string.isRequired,textRenderer:m.func.isRequired},_getSortedRanges:function(){var r=[];[this.props.ranges,this.props.aggregatedRanges,this.props.imageRanges].filter(function(s){return s!=null;}).forEach(function(s){return r=r.concat(s);});return r.sort(n);},_renderText:function(r){var s=r.split(o),t={};for(var u=0;u<s.length;u++){var v=s[u];if(v){var w='text'+u;if(u%2===1){t[w]=i.createElement(h,null);}else t[w]=this.props.textRenderer(s[u]);}}return j.create(t);},render:function(){var r=0,s=this.props.text,t=this._getSortedRanges(),u={},v=t.length;for(var w=0,x=v;w<x;w++){var y=t[w];if(y.offset<r)continue;if(y.offset>r)u['text'+w]=this._renderText(l.substring(s,r,y.offset));var z=l.substr(s,y.offset,y.length);u['range'+w]=this.props.rangeRenderer(z,y);r=y.offset+y.length;}if(s.length>r)u.end=this._renderText(l.substr(s,r));return (i.createElement(k,{className:this.props.className,style:this.props.style},j.create(u)));}});f.exports=q;},null);
__d('TransformTextToDOMMixin',['DOMQuery','createArrayFromMixed','flattenArray'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=3,l={transform:function(m,n){return j(m.map((function(o){if(!h.isElementNode(o)){var p=o,q=[],r=this.MAX_ITEMS||k;while(r--){var s=n?[p].concat(n):[p],t=this.match.apply(this,s);if(!t)break;q.push(p.substring(0,t.startIndex));q.push(t.element);p=p.substring(t.endIndex);}p&&q.push(p);return q;}return o;}).bind(this)));},params:function(){var m=this;return {__params:true,obj:m,params:i(arguments)};}};f.exports=l;},null);
__d("Utf16",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={decode:function(i){switch(i.length){case 1:return i.charCodeAt(0);case 2:return 65536|(i.charCodeAt(0)-55296)*1024|i.charCodeAt(1)-56320;}},encode:function(i){if(i<65536){return String.fromCharCode(i);}else return String.fromCharCode(55296+(i-65536>>10))+String.fromCharCode(56320+i%1024);}};f.exports=h;},null);
__d('SupportedEmoji',['cx','Utf16'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=new RegExp("([\u203C\u2049\u2100-\u21FF\u2300-\u27FF"+"\u2900-\u29FF\u2B00-\u2BFF\u3000-\u30FF\u3200-\u32FF]|"+"\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])([\uFE00-\uFE0F])?"),k={126980:"_4_o0",127378:"_4_o1",127385:"_4_o2",127386:"_4_o3",127489:"_4_o4",127490:"_4_o5",127514:"_4_o6",127535:"_4_o7",127539:"_4_o8",127541:"_4_o9",127542:"_4_oa",127543:"_4_ob",127544:"_4_oc",127545:"_4_od",127546:"_4_oe",127568:"_4_of",127744:"_2b_",127746:"_2c0",127747:"_4_og",127748:"_4_oh",127749:"_4_oi",127750:"_4_oj",127751:"_4_ok",127752:"_4_ol",127754:"_2c1",127769:"_2c2",127775:"_2c3",127793:"_2c4",127796:"_2c5",127797:"_2c6",127799:"_2c7",127800:"_2c8",127801:"_2c9",127802:"_2ca",127803:"_2cb",127806:"_2cc",127808:"_2cd",127809:"_2ce",127810:"_2cf",127811:"_2cg",127813:"_4_om",127814:"_4_on",127817:"_4_oo",127818:"_2ch",127822:"_2ci",127827:"_2cj",127828:"_2ck",127832:"_4_op",127833:"_4_oq",127834:"_4_or",127835:"_4_os",127836:"_4_ot",127837:"_4_ou",127838:"_4_ov",127839:"_4_ow",127841:"_4_ox",127842:"_4_oy",127843:"_4_oz",127846:"_4_o-",127847:"_4_o_",127856:"_4_p0",127857:"_4_p1",127858:"_4_p2",127859:"_4_p3",127860:"_4_p4",127861:"_4_p5",127862:"_4_p6",127864:"_2cl",127866:"_2cm",127867:"_4_p7",127872:"_4_p8",127873:"_2cn",127875:"_2co",127876:"_2cp",127877:"_2cq",127880:"_2cr",127881:"_2cs",127884:"_4_p9",127885:"_2ct",127886:"_2cu",127887:"_2cv",127888:"_2cw",127890:"_4_pa",127891:"_2cx",127905:"_4_pb",127906:"_4_pc",127908:"_4_pd",127909:"_4_pe",127910:"_4_pf",127911:"_4_pg",127912:"_4_ph",127913:"_4_pi",127915:"_4_pj",127916:"_4_pk",127917:"_4_pl",127919:"_4_pm",127921:"_4_pn",127925:"_2cy",127926:"_2cz",127927:"_4_po",127928:"_4_pp",127930:"_4_pq",127932:"_2c-",127934:"_4_pr",127935:"_4_ps",127936:"_4_pt",127937:"_4_pu",127942:"_4_pv",127944:"_4_pw",127968:"_4_px",127969:"_4_py",127970:"_4_pz",127971:"_4_p-",127973:"_4_p_",127974:"_4_q0",127975:"_4_q1",127976:"_4_q2",127977:"_4_q3",127978:"_4_q4",127979:"_4_q5",127980:"_4_q6",127981:"_4_q7",127983:"_4_q8",127984:"_4_q9",128013:"_2c_",128014:"_2d0",128017:"_2d1",128018:"_2d2",128020:"_2d3",128023:"_2d4",128024:"_2d5",128025:"_2d6",128026:"_2d7",128027:"_2d8",128031:"_2d9",128032:"_2da",128033:"_2db",128037:"_2dc",128038:"_2dd",128039:"_2de",128040:"_2df",128041:"_2dg",128043:"_2dh",128044:"_2di",128045:"_2dj",128046:"_2dk",128047:"_2dl",128048:"_2dm",128049:"_2dn",128051:"_2do",128052:"_2dp",128053:"_2dq",128054:"_491",128055:"_2dr",128056:"_2ds",128057:"_2dt",128058:"_2du",128059:"_2dv",128062:"_2dw",128064:"_2dx",128066:"_2dy",128067:"_2dz",128068:"_2d-",128069:"_2d_",128070:"_2e0",128071:"_2e1",128072:"_2e2",128073:"_2e3",128074:"_2e4",128075:"_2e5",128076:"_2e6",128077:"_2e7",128078:"_2e8",128079:"_2e9",128080:"_2ea",128081:"_4_qa",128082:"_4_qb",128084:"_4_qc",128085:"_4_qd",128087:"_4_qe",128088:"_4_qf",128089:"_4_qg",128092:"_4_qh",128095:"_4_qi",128096:"_4_qj",128097:"_4_qk",128098:"_4_ql",128102:"_2eb",128103:"_2ec",128104:"_2ed",128105:"_2ee",128107:"_2ef",128110:"_2eg",128111:"_2eh",128113:"_2ei",128114:"_2ej",128115:"_2ek",128116:"_2el",128117:"_2em",128118:"_2en",128119:"_2eo",128120:"_2ep",128123:"_2eq",128124:"_2er",128125:"_2es",128126:"_2et",128127:"_2eu",128128:"_2ev",128130:"_2ew",128131:"_2ex",128132:"_4_qm",128133:"_2ey",128136:"_4_qn",128137:"_4_qo",128138:"_4_qp",128139:"_2ez",128140:"_4_qq",128141:"_4_qr",128142:"_4_qs",128143:"_2e-",128144:"_2e_",128145:"_2f0",128146:"_4_qt",128147:"_2f1",128148:"_2f2",128150:"_2f3",128151:"_2f4",128152:"_2f5",128153:"_2f6",128154:"_2f7",128155:"_2f8",128156:"_2f9",128157:"_2fa",128158:"_4_qu",128159:"_4_qv",128160:"_4_qw",128161:"_4_qx",128162:"_2fb",128163:"_4_qy",128164:"_2fc",128166:"_2fd",128167:"_4_qz",128168:"_2fe",128169:"_2ff",128170:"_2fg",128176:"_4_q-",128178:"_4_q_",128180:"_4_r0",128181:"_4_r1",128186:"_4_r2",128187:"_2fh",128188:"_4_r3",128189:"_2fi",128190:"_2fj",128191:"_2fk",128192:"_2fl",128214:"_4_r4",128221:"_4_r5",128222:"_2fm",128224:"_2fn",128225:"_4_r6",128226:"_4_r7",128227:"_4_r8",128232:"_4_r9",128233:"_4_ra",128234:"_4_rb",128235:"_4_rc",128236:"_4_rd",128237:"_4_re",128238:"_4_rf",128241:"_2fo",128242:"_2fp",128243:"_4_rg",128244:"_4_rh",128246:"_4_ri",128247:"_4_rj",128250:"_2fq",128251:"_4_rk",128252:"_4_rl",128264:"_4_rm",128269:"_4_rn",128270:"_4_ro",128271:"_4_rp",128272:"_4_rq",128273:"_4_rr",128274:"_4_rs",128275:"_4_rt",128276:"_2fr",128286:"_4_ru",128293:"_492",128296:"_4_rv",128299:"_4_rw",128304:"_4_rx",128305:"_4_ry",128306:"_4_rz",128307:"_4_r-",128308:"_4_r_",128309:"_4_s0",128310:"_4_s1",128311:"_4_s2",128312:"_4_s3",128313:"_4_s4",128507:"_4_s5",128508:"_4_s6",128509:"_4_s7",128513:"_2fs",128514:"_2ft",128515:"_2fu",128516:"_2fv",128518:"_2fw",128521:"_2fx",128522:"_1q3y",128524:"_2fz",128525:"_2f-",128527:"_2f_",128530:"_2g0",128531:"_2g1",128532:"_2g2",128534:"_2g3",128536:"_2g4",128538:"_2g5",128540:"_2g6",128541:"_2g7",128542:"_2g8",128544:"_2g9",128545:"_2ga",128546:"_2gb",128547:"_2gc",128548:"_2gd",128549:"_2ge",128552:"_2gf",128553:"_2gg",128554:"_2gh",128555:"_2gi",128557:"_2gj",128560:"_2gk",128561:"_2gl",128562:"_2gm",128563:"_2gn",128565:"_2go",128567:"_2gp",128568:"_2gq",128569:"_2gr",128570:"_2gs",128571:"_2gt",128572:"_2gu",128573:"_2gv",128575:"_2gw",128576:"_2gx",128587:"_2gy",128588:"_2gz",128589:"_2g-",128591:"_2g_",128640:"_4_s8",128643:"_4_s9",128644:"_4_sa",128645:"_4_sb",128649:"_4_sc",128652:"_4_sd",128655:"_4_se",128657:"_4_sf",128658:"_4_sg",128659:"_4_sh",128661:"_4_si",128663:"_4_sj",128665:"_4_sk",128666:"_4_sl",128674:"_4_sm",128676:"_4_sn",128677:"_4_so",128679:"_4_sp",128684:"_4_sq",128685:"_4_sr",128690:"_4_ss",128697:"_4_st",128698:"_4_su",128699:"_4_sv",128700:"_4_sw",128701:"_4_sx",128702:"_4_sy",128704:"_4_sz",9642:"_4_s-",9643:"_4_s_",9723:"_4_t0",9724:"_4_t1",9725:"_4_t2",9726:"_4_t3",9742:"_4_t4",9757:"_2h0",9786:"_2h1",9855:"_4_t5",9888:"_4_t6",9889:"_2h2",9898:"_4_t7",9899:"_4_t8",9917:"_4_t9",9918:"_4_ta",9924:"_2h3",9940:"_4_tb",9962:"_4_tc",9970:"_4_td",9971:"_4_te",9973:"_4_tf",9978:"_4_tg",9981:"_4_th",9994:"_2h4",9995:"_2h5",9996:"_2h6",10060:"_4_ti",10062:"_4_tj",10145:"_4_tk",10175:"_4_tl",11013:"_4_tm",11014:"_4_tn",11015:"_4_to",11035:"_4_tp",11036:"_4_tq",11088:"_4_tr",11093:"_4_ts",12349:"_4_tt",8598:"_4_tu",8599:"_4_tv",8600:"_4_tw",8601:"_4_tx",9728:"_2h7",9729:"_2h8",9748:"_2h9",9749:"_2ha",9824:"_4_ty",9827:"_4_tz",9829:"_4_t-",9830:"_4_t_",9832:"_4_u0",9986:"_4_u1",9992:"_4_u2",9993:"_4_u3",10006:"_4_u4",10024:"_2hb",10035:"_4_u5",10036:"_4_u6",10067:"_4_u7",10068:"_4_u8",10069:"_4_u9",10071:"_4_ua",10084:"_2hc",10548:"_4_ub",10549:"_4_uc",12951:"_4_ud",12953:"_4_ue"},l=function(m){var n=0;while(m.length>0){var o=j.exec(m);if(!o||!o.length)return false;var p=o[1],q=o.index,r=i.decode(p),s=k[r];if(!s){n+=q+1;m=m.substr(q+1);continue;}o.index+=n;o.emoji=s;return o;}return false;};f.exports={findEmoji:l,emoji:k,_utf16Regex:j};},null);
__d('DOMEmoji',['CSS','JSXDOM','TransformTextToDOMMixin','SupportedEmoji','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={MAX_ITEMS:40,match:function(n){var o=k.findEmoji(n);if(!o||!o.length)return false;var p=o[0],q=o.index,r=o.emoji;return {startIndex:q,endIndex:q+p.length,element:this._element(r)};},_element:function(n){var o=i.span(null);h.addClass(o,"_1az");h.addClass(o,"_1a-");h.addClass(o,n);return o;}};f.exports=Object.assign(m,j);},null);
__d("EmoticonsList",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={emotes:{":)":"smile",":-)":"smile",":]":"smile","=)":"smile","(:":"smile","(=":"smile",":(":"frown",":-(":"frown",":[":"frown","=(":"frown",")=":"frown",":poop:":"poop",":putnam:":"putnam",":P":"tongue",":-P":"tongue",":-p":"tongue",":p":"tongue","=P":"tongue","=D":"grin",":-D":"grin",":D":"grin",":o":"gasp",":-O":"gasp",":O":"gasp",":-o":"gasp",";)":"wink",";-)":"wink","8-)":"glasses","B-)":"glasses","B|":"sunglasses","8-|":"sunglasses","8|":"sunglasses","B-|":"sunglasses",">:(":"grumpy",">:-(":"grumpy",":/":"unsure",":-/":"unsure",":\\":"unsure",":-\\":"unsure","=/":"unsure","=\\":"unsure",":'(":"cry","3:)":"devil","3:-)":"devil","O:)":"angel","O:-)":"angel",":*":"kiss",":-*":"kiss","<3":"heart","&lt;3":"heart","":"heart","^_^":"kiki","^~^":"kiki","-_-":"squint","o.O":"confused","O.o":"confused_rev",">:o":"upset",">:O":"upset",">:-O":"upset",">:-o":"upset",">_<":"upset",">.<":"upset",":v":"pacman",":V":"pacman",":|]":"robot",":3":"colonthree","<(\")":"penguin","(^^^)":"shark","(y)":"like",":like:":"like","(Y)":"like"},symbols:{smile:":)",frown:":(",poop:":poop:",putnam:":putnam:",tongue:":P",grin:"=D",gasp:":o",wink:";)",glasses:"8-)",sunglasses:"B|",grumpy:">:(",unsure:":/",cry:":'(",devil:"3:)",angel:"O:)",kiss:":*",heart:"<3",kiki:"^_^",squint:"-_-",confused:"o.O",confused_rev:"O.o",upset:">:o",pacman:":v",robot:":|]",colonthree:":3",penguin:"<(\")",shark:"(^^^)",like:"(y)"},regexp:/(^|[\s'".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:poop:|:putnam:|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:'\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\^~\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:V|:\|\]|:3|<\("\)(?!\))|\(\^\^\^\)(?!\))|\(y\)(?!\))|:like:|\(Y\)(?!\)))([\s'".,!?]|<br>|$)/,noncapturingRegexp:/(?:^|[\s'".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:poop:|:putnam:|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:'\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\^~\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:V|:\|\]|:3|<\("\)(?!\))|\(\^\^\^\)(?!\))|\(y\)(?!\))|:like:|\(Y\)(?!\)))(?:[\s'".,!?]|<br>|$)/};},null);
__d('DOMEmote',['CSS','EmoticonsList','JSXDOM','TransformTextToDOMMixin','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={MAX_ITEMS:40,match:function(n){var o=i.regexp.exec(n);if(!o||!o.length)return false;var p=o[2],q=o.index+o[1].length;return {startIndex:q,endIndex:q+p.length,element:this._element(p,i.emotes[p])};},_element:function(n,o){var p=l._("{emoticonName} emoticon",[l.param('emoticonName',o)]),q=j.span({className:"emoticon_text"},p),r=j.span({title:n,className:"emoticon"});h.addClass(r,'emoticon_'+o);return [q,r];}};f.exports=Object.assign(m,k);},null);
__d('transformTextToDOM',['createArrayFromMixed'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){var l=[j];k=h(k);k.forEach(function(m){var n,o=m;if(m.__params){n=m.params;o=m.obj;}l=o.transform(l,n);});return l;}f.exports=i;},null);
__d('emojiAndEmote',['DOMEmoji','DOMEmote','transformTextToDOM'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=function(l){var m=[h,i];return j(l,m);};f.exports=k;},null);
__d('Emoji',['DOMEmoji','JSXDOM','emojiAndEmote','transformTextToDOM'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={htmlEmojiAndEmote:function(m,n){return i.span(null,j(m)).innerHTML;},htmlEmojiAndEmoteWithoutFBID:function(m,n){return i.span(null,j(m,false)).innerHTML;},htmlEmoji:function(m){return i.span(null,k(m,h)).innerHTML;}};f.exports=l;},null);
__d('Emote',['DOMEmote','JSXDOM','transformTextToDOM'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={htmlEmoteWithoutFBID:function(l,m){return i.span(null,j(l,h)).innerHTML;},htmlEmote:function(l,m){return (i.span(null,j(l,[h])).innerHTML);}};f.exports=k;},null);
__d('TextWithEmoticons.react',['Emoji','Emote','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=j.createClass({displayName:'ReactTextWithEmoticons',render:function(){if(!this.props.renderEmoticons&&!this.props.renderEmoji)return j.createElement('span',null,this.props.text);var l;if(this.props.renderEmoticons&&this.props.renderEmoji){l=h.htmlEmojiAndEmoteWithoutFBID(this.props.text);}else if(this.props.renderEmoticons){l=i.htmlEmoteWithoutFBID(this.props.text);}else l=h.htmlEmoji(this.props.text);return j.createElement('span',{dangerouslySetInnerHTML:{__html:l}});}});f.exports=k;},null);
__d('TextWithEntities.react',['Link.react','React','BaseTextWithEntities.react','TextWithEmoticons.react'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();'use strict';function l(n){return n.replace(/<3\b|&hearts;/g,'\u2665');}var m=i.createClass({displayName:'TextWithEntities',_renderText:function(n){if(this.props.renderEmoticons||this.props.renderEmoji){return (i.createElement(k,{text:n,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}));}else return l(n);},_renderRange:function(n,o){if(this.props.interpolator){return this.props.interpolator(n,o);}else return (i.createElement(h,{href:o.entity},n));},render:function(){return (i.createElement(j,babelHelpers._extends({},this.props,{textRenderer:this._renderText,rangeRenderer:this._renderRange,ranges:this.props.ranges,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:this.props.text})));}});f.exports=m;},null);
__d('UFICommentLikeCount.react',['NumberFormat','ProfileBrowserLink','ProfileBrowserTypes','React','URI','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();'use strict';var n=k.PropTypes,o=function(q,r){var s=new l('/ajax/like/tooltip.php').setQueryData({comment_fbid:q.fbid,comment_from:q.author,comment_likecount:q.likecount||0,comment_id:q.id,cache_buster:q.likeconfirmhash||0});if(r)s.addQueryData({viewas:r});return s;},p=k.createClass({displayName:'UFICommentLikeCount',propTypes:{comment:n.object.isRequired,contextArgs:n.object.isRequired},render:function(){var q=this.props.comment,r=h.formatIntegerWithDelimiter(q.likecount||0,this.props.contextArgs.numberdelimiter),s=j.LIKES,t={id:q.fbid},u=o(this.props.comment,this.props.contextArgs.viewas),v=k.createElement('i',{className:"UFICommentLikeIcon"}),w=k.createElement('span',null,r),x="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":'');return (k.createElement('a',{ajaxify:i.constructDialogURI(s,t).toString(),className:x,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':u.toString(),href:i.constructPageURI(s,t).toString(),rel:'dialog',role:'button'},v,w));}});f.exports=p;},null);
__d('Timestamp.react',['LiveTimer','React','ReactDOM','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'Timestamp',propTypes:{autoUpdate:l.bool},getDefaultProps:function(){return {autoUpdate:false};},componentDidMount:function(){if(this.props.autoUpdate)h.addTimeStamps(j.findDOMNode(this));},componentDidUpdate:function(n,o){if(this.props.autoUpdate&&this.props.time!==n.time)h.loop();},render:function(){var n=h.renderRelativeTimeToServer(this.props.time,this.props.shorten,this.props.minimize);return (i.createElement('abbr',babelHelpers._extends({},this.props,{className:k(this.props.className,"livetimestamp"),title:this.props.verbose,'data-utime':this.props.time,'data-minimize':this.props.minimize?true:null,'data-shorten':this.props.shorten?true:null}),n.text.toString()||this.props.text));}});f.exports=m;},null);
__d('UFICommentMetadata.react',['Bootloader','BootloadedComponent.react','JSResource','React','ReactDOM','Timestamp.react','TrackingNodes','UFIConstants','URI','XUISpinner.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();'use strict';var t=k.PropTypes,u=o.UFIStatus,v=' \u00b7 ',w="UFIFailureMessageIcon",x="UFIFailureMessage",y="uiLinkSubtle",z=function(ba){var ca=ba.status;return ca===u.FAILED_ADD||ca===u.FAILED_EDIT;},aa=k.createClass({displayName:'UFICommentMetadata',propTypes:{comment:t.object.isRequired,onRetrySubmit:t.func,permalink:t.string,shortenTimestamp:t.bool,showPermalink:t.bool,permalinkTarget:t.string},render:function(){var ba=this.props,ca=ba.comment,da=ba.onRetrySubmit,ea,fa;if(z(ca)){ea=[k.createElement('span',{key:'failure',className:x},k.createElement('i',{className:w}),s._("Unable to post comment.")),ca.allowRetry&&da?[' ',k.createElement('a',{key:'rety-submit',onClick:da,href:'#',role:'button'},s._("Try Again"))]:null];}else{var ga=n.getTrackingInfo(n.types.SOURCE);fa=k.createElement(m,{shorten:this.props.shortenTimestamp,time:ca.timestamp.time,text:ca.timestamp.text,verbose:ca.timestamp.verbose});if(this.props.showPermalink)fa=k.createElement('a',{key:'timestamp-message',className:y,href:this.props.permalink,'data-ft':ga,target:this.props.permalinkTarget},fa);}var ha=null;if(ca.originalTimestamp){var ia=new p('/ajax/edits/browser/comment').addQueryData({comment_token:ca.id}).toString();ha=[v,k.createElement('a',{ajaxify:ia,'aria-label':s._("Show edit history"),className:'uiLinkSubtle','data-hover':'tooltip',href:'#',key:'edit-link',ref:'EditLink',rel:'dialog',role:'button',title:s._("Show edit history")},s._("Edited"))];}var ja=null;if(ca.creator_data)ja=[k.createElement(i,{bootloadPlaceholder:k.createElement(q,{size:'small'}),bootloadLoader:j('UFICreatorInfo.react'),creatorID:ca.creator_data.creatorID,creatorType:ca.creator_data.creatorType,creatorName:ca.creator_data.creatorName,labelType:ca.creator_data.labelType,pageID:ca.creator_data.pageID,profileURI:ca.creator_data.profileURI}),v];return (k.createElement('span',null,ja,fa,ea,ha));},componentWillUpdate:function(ba){var ca=this.props.comment,da=ba.comment;if(!ca.editnux&&!!da.editnux)h.loadModules(["LegacyContextualDialog"],(function(ea){var fa=new ea();fa.init(da.editnux).setContext(l.findDOMNode(this.refs.EditLink)).setWidth(300).setPosition('below').show();}).bind(this));}});f.exports=aa;},null);
__d('UFISpamCount',['UFISpamCountImpl'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('UFISpamCountImpl').module||{enabled:false};},null);
__d('UFICommentActions.react',['React','ReactFragment','TrackingNodes','UFIAddCommentAction','UFICommentAction','UFICommentLikeCount.react','UFICommentMetadata.react','UFIConfig','UFIConstants','UFIPrivateReplyLink.react','UFISpamCount','cx','fbt','PagesPrivateReplyConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();'use strict';var u=c('PagesPrivateReplyConstants').Status,v=h.PropTypes,w=p.UFIStatus,x=' \u00b7 ',y="fsm fwn fcg UFICommentActions",z="UFIDeletedMessageIcon",aa="UFIDeletedMessage",ba=h.createClass({displayName:'UFICommentActions',propTypes:{comment:v.object.isRequired,contextArgs:v.object.isRequired,feedback:v.object.isRequired,hideAsSpamForPageAdmin:v.bool,markedAsSpamHere:v.bool,onCommentReply:v.func,permalink:v.string,shareLink:v.string,shortenTimestamp:v.bool,showPermalink:v.bool,isStreaming:v.bool,showReplyLink:v.bool,viewerCanMarkNotSpam:v.bool},contextTypes:{dispatch:v.func},render:function(){var ca=this.props,da=ca.comment,ea=ca.permalink,fa=ca.feedback,ga=ca.markedAsSpamHere,ha=da.status===w.SPAM_DISPLAY,ia=ca.showReplyLink,ja=ca.hideAsSpamForPageAdmin,ka,la,ma,na,oa,pa,qa,ra,sa=!da.islocal&&da.status!==w.LIVE_DELETED;if(sa){if(ha&&!ga){if(ca.viewerCanMarkNotSpam)ka=h.createElement('a',{onClick:(function(event){return this.context.dispatch(l.markAsNotSpam(da,event));}).bind(this),className:"UFICommentNotSpamLink",href:'#',role:'button'},t._("Unhide"));if(ja&&fa.isthreaded&&da.cancomment&&ia)pa=this.renderCommentReply(da);}else{if(da.viewercanlike){var ta=j.getTrackingInfo(da.hasviewerliked?j.types.UNLIKE_LINK:j.types.LIKE_LINK),ua=da.hasviewerliked?t._("Unlike this comment"):t._("Like this comment");la=h.createElement('a',{className:'UFILikeLink','data-ft':ta,href:'#',onClick:(function(event){return this.context.dispatch(l.toggleLike(da,event.target));}).bind(this),role:'button',title:ua},da.hasviewerliked?t._("Unlike"):t._("Like"));}if(fa.isthreaded&&da.cancomment&&ia||!!da.parentcommentid&&o.showReplyToReply&&fa.cancomment)pa=this.renderCommentReply(da);if(da.likecount>0)na=h.createElement(m,{comment:da,contextArgs:ca.contextArgs});if(da.spamcount&&r.enabled)oa=h.createElement(r,{count:da.spamcount});if(da.messagereply&&(da.messagereply.hasReplyPermission&&fa.actorforpost===da.messagereply.pageID||da.messagereply.status===u.ALREADY_REPLIED))qa=h.createElement(q,{actorID:fa.actorforpost,activityID:da.id,context:da.messagereply});}if(da.attachment&&da.attachment.type==='share'&&da.canremove)ra=h.createElement('a',{href:'#',onClick:(function(event){return this.context.dispatch(l.removePreview(da,event.target));}).bind(this),role:'button'},t._("Remove Preview"));if(this.props.contextArgs.shareablecomments)ma=h.createElement('a',{className:'share_action_link',href:ca.comment.commentshareuri,role:'button',rel:'dialog',title:t._("Share this comment")},t._("Share"));}var va=h.createElement(n,{comment:da,onRetrySubmit:(function(){return this.context.dispatch(k.retrySubmit(da));}).bind(this),permalink:ea,shortenTimestamp:ca.shortenTimestamp,showPermalink:ca.showPermalink}),wa;if(ca.isStreaming){wa={likeCount:na,spamCount:oa,likeToggle:la,spamToggle:ka};}else if(fa.isqanda){wa={likeCount:na,spamCount:oa,likeToggle:la,commentReply:pa,shareComment:ma,messageReply:qa,spamToggle:ka,metadata:va,removePreview:ra};}else if(ca.contextArgs.entstream){wa={metadata:va,likeToggle:la,likeCount:na,commentReply:pa,messageReply:qa,shareComment:ma,spamCount:oa,spamToggle:ka,removePreview:ra};}else if(fa.isthreaded){wa={likeToggle:la,commentReply:pa,messageReply:qa,spamToggle:ka,removePreview:ra,shareComment:ma,likeCount:na,spamCount:oa,metadata:va};}else wa={metadata:va,likeToggle:la,shareComment:ma,likeCount:na,spamCount:oa,commentReply:pa,messageReply:qa,spamToggle:ka,removePreview:ra};if(da.status===w.LIVE_DELETED){var xa=h.createElement('span',{className:aa},h.createElement('i',{className:z,'data-hover':'tooltip','aria-label':t._("Comment deleted")}));wa.deletionWarning=xa;}var ya=true,za={};for(var ab in wa){var bb=wa[ab];if(bb){za[ab]=ya?bb:i.create({MIDDOT:x,action:bb});ya=false;}}return (h.createElement('div',{className:y},i.create(za)));},renderCommentReply:function(ca){return (h.createElement('a',{className:"UFIReplyLink",href:'#',onClick:this.props.onCommentReply,role:'button'},t._("Reply")));}});f.exports=ba;},null);
__d('UFICommentAttachment.react',['BootloadedComponent.react','DOM','HTML','JSResource','Link.react','LitestandShareAttachment','React','ReactDOM','Image.react','XUISpinner.react','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=n.PropTypes,t=80,u='ufi_comment_sticker',v=n.createClass({displayName:'UFICommentAttachment',propTypes:{comment:s.object.isRequired,disableTheater:s.bool},_attachmentFromCommentData:function(w){return w.photo_comment||w.attachment;},_getScaledDimensions:function(w,x){var y,z,aa;if(x>w){aa=t/x;y=w*aa;z=x*aa;}else{aa=t/w;y=w*aa;z=x*aa;}return {height:Math.round(y),width:Math.round(z)};},componentDidMount:function(){var w=this._attachmentFromCommentData(this.props.comment);if(w)this.renderAttachment(w);},shouldComponentUpdate:function(w,x){var y=this._attachmentFromCommentData(this.props.comment),z=this._attachmentFromCommentData(w.comment);if(!y&&!z)return false;if(!y||!z||y.markup!=z.markup){return true;}else return false;},componentDidUpdate:function(w){var x=this._attachmentFromCommentData(this.props.comment);if(x.type!=='sticker'&&x.type!=='photo')this.renderAttachment(x);},renderAttachment:function(w){if(w&&this.refs&&this.refs.contents&&w.markup){var x=w.markup;if(j.isHTML(x.markup))x=j.replaceJSONWrapper(x.markup).getRootNode();var y=x.parentNode,z=o.findDOMNode(this.refs.contents);if(y&&y!==z)x=x.cloneNode(true);if(this.props.disableTheater)i.setAttributes(x.querySelector('a[rel="theater"]'),{target:'_blank',rel:''});i.setContent(z,x);if(w.type=="share")m.init(z);}},renderSticker:function(w){var x=this._getScaledDimensions(w.metadata.height,w.metadata.width),y=null,z=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){y=w.metadata.sprite_uri_2x;z=w.metadata.source_uri_2x;}else{y=w.metadata.sprite_uri;z=w.metadata.source_uri;}return (n.createElement(h,{bootloadPlaceholder:n.createElement(q,null),bootloadLoader:k('Sticker.react'),animationTrigger:'load_and_hover',frameCount:w.metadata.frameCount,frameRate:w.metadata.frameRate,framesPerCol:w.metadata.framesPerCol,framesPerRow:w.metadata.framesPerRow,spriteURI:y,sourceHeight:x.height,sourceURI:z,sourceWidth:x.width,testID:u}));},renderPhoto:function(w){var x="_2rn3 _4-eo";return (n.createElement('div',{className:"_4iv9"},n.createElement(l,{className:x,href:w.metadata.url},n.createElement('div',{style:{height:w.metadata.height}},n.createElement(p,{src:w.metadata.preview_uri})))));},renderShare:function(w){return (n.createElement(h,{bootloadPlaceholder:n.createElement('span',null),bootloadLoader:k('UFILiveCommentLinkPreview.react'),attachment:w}));},render:function(){var w=this._attachmentFromCommentData(this.props.comment);if(w)if(w&&w.type==='sticker'){return this.renderSticker(w);}else if(w&&w.type==='photo'){return this.renderPhoto(w);}else if(w&&w.type==='live_share'){return this.renderShare(w);}else return n.createElement('div',{ref:'contents'});return n.createElement('span',null);}});f.exports=v;},null);
__d('BadgeHelper',['DOM','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={xsmall:"_5dzz",small:"_5dz-",medium:"_5dz_",large:"_5d-0",xlarge:"_5d-1"},l={verified:"_56_f",trending:"_1gop",topcommenter:"_59t2",page_blue_seal:"_1_4q",page_gray_seal:"_1_4r",work:"_5d62"};function m(o,p){return j(k[o],l[p],"_5dzy");}function n(o,p){var q=m(o,p);if(q)return h.create('span',{className:q});}f.exports={getClasses:m,renderBadge:n,sizes:Object.keys(k),types:Object.keys(l)};},null);
__d('Badge.react',['BadgeHelper','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i.PropTypes,k=i.createClass({displayName:'Badge',propTypes:{size:j.oneOf(h.sizes),type:j.oneOf(h.types)},getDefaultProps:function(){return {size:'xsmall',type:'verified'};},render:function(){return (i.createElement('span',{className:h.getClasses(this.props.size,this.props.type)}));}});f.exports=k;},null);
__d('UFIActor.react',['Badge.react','Focus','HovercardLink','Locale','React','ReactDOM','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=l.PropTypes,q=l.createClass({displayName:'UFIActor',propTypes:{author:p.object.isRequired,'data-ft':p.string,focusOnMount:p.bool,showHovercard:p.bool,isAuthorWeakReference:p.bool,groupOrEventID:p.number,useFirstName:p.bool,delimiter:p.string},getDefaultProps:function(){return {delimiter:" \u00b7 "};},componentDidMount:function(){if(this.props.focusOnMount)i.setWithoutOutline(m.findDOMNode(this.refs.authorName));},render:function(){var r=this.props.author,s=k.isRTL()?'rtl':'ltr',t=(this.props.isAuthorWeakReference?"weakReference":'')+(' '+"UFICommentActorName"),u=[];if(this.props.isAuthorWeakReference)u.push(l.createElement('i',{className:'UFIWeakReferenceIcon',key:'icon'}));if(this.props.useFirstName){u.push(r.firstName);}else if(this.props.author.isBusinessPersona&&this.props.author.assetRole){u.push(r.name+' '+o._("(")+this.props.author.assetRole+o._(")"));}else u.push(r.name);var v=r.uri?l.createElement('a',babelHelpers._extends({},this.props,{className:t,'data-hovercard':this.props.showHovercard?j.constructEndpointWithGroupAndLocation(r,this.props.groupOrEventID,'ufi',this.props.isAuthorWeakReference).toString():null,'data-ft':this.props['data-ft'],dir:s,href:r.uri,ref:'authorName'}),u):l.createElement('span',{className:t,dir:s,ref:'authorName'},u);return (l.createElement('span',null,v,l.Children.map(this.props.children,(function(w){return (w?[w.type===h?'':this.props.delimiter,w]:null);}).bind(this))));}});f.exports=q;},null);
__d('UFISocialContext.react',['HovercardLink','ProfileBrowserLink','ProfileBrowserTypes','React','URI','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();'use strict';var n=k.PropTypes,o=27,p=k.createClass({displayName:'UFISocialContext',propTypes:{commentAuthor:n.object.isRequired,otherMutualCount:n.number.isRequired,topMutualFriend:n.object.isRequired},render:function(){var q=this.props.topMutualFriend,r=this.props.otherMutualCount,s=this.props.commentAuthor,t=h.constructEndpoint(q).toString(),u=k.createElement('a',{href:q.uri,'data-hovercard':t,key:'top'},q.name),v=s.name.length+q.name.length,w;if(r===0){w=m._("Friends with {name}",[m.param('name',u)]);}else if(v<o){var x;if(r==1){x=m._("1 other");}else x=m._({"*":"{count} others"},[m.param('count',r,[0])]);w=m._("Friends with {name} and {others}",[m.param('name',u),m.param('others',this.getOthersLink(x,s,q))]);}else{var y=m._({"*":"{count} mutual friends"},[m.param('count',r+1,[0])]);w=this.getOthersLink(y,s);}return (k.createElement('span',{className:'UFICommentSocialContext'},w));},getOthersLink:function(q,r,s){var t=j.MUTUAL_FRIENDS,u={uid:r.id},v=new l('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:r.id});if(s)v.addQueryData({exclude_id:s.id});var w=i.constructDialogURI(t,u).toString();return (k.createElement('a',{ajaxify:w,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':v.toString(),href:i.constructPageURI(t,u).toString(),key:'others',rel:'dialog'},q));}});f.exports=p;},null);
__d('UFICommentAuthorName.react',['Badge.react','React','TrackingNodes','UFIActor.react','UFISocialContext.react'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();'use strict';var m=i.PropTypes,n=i.createClass({displayName:'UFICommentAuthorName',propTypes:{author:m.object.isRequired,authorProfiles:m.object.isRequired,showHovercard:m.bool,isAuthorWeakReference:m.bool,focusOnMount:m.bool,groupOrEventID:m.number,isFeatured:m.bool,socialContext:m.object,useFirstName:m.bool},render:function(){var o=this.props,p=o.author,q=j.getTrackingInfo(j.types.USER_NAME);return (i.createElement(k,{author:p,showHovercard:o.showHovercard,key:'author',focusOnMount:o.focusOnMount,'data-ft':q,isAuthorWeakReference:o.isAuthorWeakReference,groupOrEventID:o.groupOrEventID,useFirstName:o.useFirstName},o.isFeatured?i.createElement(h,{key:'badge',size:'xsmall',type:'verified'}):null,o.socialContext?i.createElement(l,{topMutualFriend:o.authorProfiles[o.socialContext.topmutualid],otherMutualCount:o.socialContext.othermutualcount,commentAuthor:p}):null));}});f.exports=n;},null);
__d('SeeMore.react',['React','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.createClass({displayName:'SeeMore',getInitialState:function(){return {isCollapsed:true};},handleClick:function(){this.setState({isCollapsed:false});},render:function(){var m=this.state.isCollapsed,n=m?h.createElement('span',{className:"_5uzb"},j._("...")):null,o=this.props.children[0],p=m?null:h.createElement('span',null,this.props.children[1]),q=!m?null:h.createElement('a',{className:"_5v47 fss",onClick:this.handleClick,href:'#',role:'button'},j._("See More"));return (h.createElement('span',{className:k(this.props.className,"_1n4g")},o,n,q,p));}});f.exports=l;},null);
__d('findSplitPointForText',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=null,m=i.split('\n');if(j&&i.length>j)l=j;if(k&&m.length>k){var n=m.slice(0,k).join('\n').length;if(l!==null){l=Math.min(n,l);}else l=n;}return l;}f.exports=h;},null);
__d("partitionTextAndRanges",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(k,l){var m=k.offset+k.length;return l>k.offset&&l<m;}function i(k,l){for(var m=0;m<k.length;m++){var n=k[m];if(h(n,l))return n.offset;}return l;}var j=function(k,l,m){var n=[],o=[],p=i(l,m);for(var q=0;q<l.length;q++){var r=l[q];if(r.offset<p){n.push(r);}else o.push({offset:r.offset-p,length:r.length,entity:r.entity});}return {before:{ranges:n,text:k.substr(0,p)},after:{ranges:o,text:k.substr(p)}};};f.exports=j;},null);
__d('TruncatedTextWithEntities.react',['React','TextWithEntities.react','SeeMore.react','findSplitPointForText','partitionTextAndRanges'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.createClass({displayName:'TruncatedTextWithEntities',render:function(){var n=this.props.text||'',o=this.props.ranges||[];n=n.replace(/\s*$/,'');var p=this.props.maxLines,q=this.props.maxLength;if(q&&n.length>q){var r=this.props.truncationPercent||.6;q=Math.floor(r*q);}var s=k(n,q,p);if(s!==null){while(n[s-1]==='\n')s--;var t=l(n,o,s);return (h.createElement('span',{'data-ft':this.props['data-ft'],dir:this.props.dir},h.createElement(j,{className:this.props.className},h.createElement(i,{interpolator:this.props.interpolator,ranges:t.before.ranges,aggregatedRanges:this.props.aggregatedRanges,text:t.before.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}),h.createElement(i,{interpolator:this.props.interpolator,ranges:t.after.ranges,aggregatedRanges:this.props.aggregatedRanges,text:t.after.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}))));}else return (h.createElement('span',{'data-ft':this.props['data-ft'],dir:this.props.dir},h.createElement(i,{className:this.props.className,interpolator:this.props.interpolator,ranges:o,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:n,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji})));}});f.exports=m;},null);
__d('isRTL',['UnicodeBidi','UnicodeBidiDirection'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){return h.getDirection(k)===i.RTL;}f.exports=j;},null);
__d('HovercardLinkInterpolator',['HovercardLink','Link.react','React','URI','cx','fbt','isFacebookURI','isRTL'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(q,r,s,t,u){var v=arguments.length<=5||arguments[5]===undefined?null:arguments[5],w=r.entity,x=s||(w.external?'_blank':null),y,z=(!w.external?"profileLink":'')+(w.weakreference?' '+"weakReference":''),aa,ba=w.hashtag?q.substring(1):q;aa=o(ba)?'rtl':'ltr';var ca=new k(w.url);if(n(ca))ca.addQueryData({hc_location:u});var da=w.shimhash?w.shimhash:null,ea=!w.external&&!w.hashtag&&!w.photo,fa=ea?{'data-hovercard':h.constructEndpointWithGroupLocationAndExtraParams(w,t,u,null,v).toString()}:{};if(w.hashtag){y=j.createElement('a',babelHelpers._extends({},fa,{className:"_58cn",dir:aa,href:ca.toString(),target:x}),j.createElement('span',{'aria-label':m._("hashtag"),className:"_58cl"},q.substring(0,1)),j.createElement('span',{className:"_58cm"},q.substring(1)));}else if(w.weakreference){y=j.createElement(i,babelHelpers._extends({},fa,{className:z,dir:aa,href:ca,shimhash:da,target:x}),j.createElement('i',{className:'UFIWeakReferenceIcon'}),q);}else y=j.createElement(i,babelHelpers._extends({},fa,{className:z,dir:aa,href:ca,shimhash:da,target:x}),q);return y;}f.exports=p;},null);
__d('URITruncator',['URI','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=3;function k(l,m){var n=i._("..."),o=n.length;if(!l||m===undefined||l.length<=m||m<=o||l.toString().length<=o)return l;if(!h.isValidURI(l))return l.substring(0,m-o)+n;var p=new h(l),q=p.getOrigin();if(q.length>m-o)return q.substring(0,m-o)+n;var r=false;if(!!p.getFragment()){r=true;p.setFragment('');if(p.toString().length<=m-o)return p.toString()+n;}var s=p.getQueryData();if(s){var t=Object.keys(s);if(t.length>0){r=true;for(var u=t.length-1;u>=0;u--){p.removeQueryData(t[u]);if(p.toString().length<=m-o)return p.toString()+n;}}}var v=p.getPath()+(r?n:''),w=v.split('/'),x=q.length+v.length-m,y=0;while(x>0&&w.length>y+1){var z=y+1,aa=w[z];if(x+o+j<=aa.length){var ba=aa.length-1,ca=aa.length-x-o,da=/[a-zA-Z0-9]/;x+=o;while(x>0){while(ba>0&&da.test(aa[ba])){ba--;x--;}while(ba>0&&!da.test(aa[ba])){ba--;x--;}}if(ba===0)ba=ca-1;w[z]=aa.substring(0,ba+1)+n;}else{y++;x-=aa.length;if(y===1){x+=o;}else x--;}}if(y>0){if(w[w.length-1].length===0&&w.length===y+2)y++;w.splice(1,y,n);}var ea=q+w.join('/');if(ea.length>m)ea=ea.substring(0,m-o)+n;return ea;}f.exports=k;},null);
__d('transformTextRanges',['UnicodeUtils'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=function(j,k,l){if(!j||!k||!l)return j;k.sort(function(s,t){return s.offset-t.offset;});var m=0;for(var n=0;n<k.length;n++){k[n].offset+=m;var o=h.substr(j,k[n].offset,k[n].length),p=h.strlen(o),q=l(o,k[n]),r=h.strlen(q);if(o!==q){j=h.substr(j,0,k[n].offset)+q+h.substr(j,k[n].offset+k[n].length);k[n].length=r;m+=r-p;}}return j;};f.exports=i;},null);
__d('UFICommentUtils.react',['HovercardLinkInterpolator','UFIConstants','URITruncator','transformTextRanges'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();'use strict';var l={getCommentTextWithTruncatedURIs:function(m,n){if(i.commentURLTruncationLength)if(m&&m.length>0)n=k(n,m,function(o,p){var q=p.entity.external||p.entity.__type__&&p.entity.__type__.name==='ExternalUrl';return q?j(o,i.commentURLTruncationLength):o;});return n;},getCommentBodyInterpolator:function(m){return function(n,o){return h(n,o,'_blank',m,'ufi');};},shallowCopyRanges:function(m){if(!m)return m;var n=[];m.forEach(function(o){n.push(babelHelpers._extends({},o));});return n;}};f.exports=l;},null);
__d('UFICommentBody.react',['Locale','React','TrackingNodes','TruncatedTextWithEntities.react','UnicodeBidi','UFICommentUtils.react','UFIConfig','UFIConstants','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();'use strict';var q=i.PropTypes,r=i.createClass({displayName:'UFICommentBody',propTypes:{commentText:q.string.isRequired,commentRanges:q.array,groupOrEventID:q.number,useWhitespacesRender:q.bool,maxLength:q.number,maxLines:q.number,socialContext:q.object},render:function(){var s=this.props,t=s.commentText,u=j.getTrackingInfo(j.types.USER_MESSAGE),v=l.isDirectionLTR(t),w=!v,x=v&&h.isRTL()?'ltr':w&&!h.isRTL()?'rtl':null,y=m.getCommentBodyInterpolator(s.groupOrEventID),z=i.createElement(k,{key:'comment-body',className:"UFICommentBody"+(this.props.useWhitespacesRender?' '+"UFICommentBodyPreserveWhitespace":''),interpolator:y,ranges:s.commentRanges,text:t,truncationPercent:o.commentTruncationPercent,maxLength:s.maxLength,maxLines:s.maxLines,renderEmoticons:n.renderEmoticons,renderEmoji:n.renderEmoji,'data-ft':u,dir:x});if(s.socialContext){z=i.createElement('div',{key:'body'},z);}else{var aa=(v&&h.isRTL()?"_5wjy":'')+(v&&h.isRTL()?' '+"_5wjz":'')+(w&&!h.isRTL()?' '+"_5wj-":'')+(w&&!h.isRTL()?' '+"_5wj_":'');z=aa?i.createElement('div',{key:'body',className:aa},z):[' ',z];}return i.createElement('span',null,z);}});f.exports=r;},null);
__d('XUIEditButton.react',['XUIAbstractGlyphButton.react','React','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.createClass({displayName:'XUIEditButton',render:function(){var n=this.props.label,o=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!n)n=k._("Edit");o=n;}return (i.createElement(h,babelHelpers._extends({},this.props,{label:n,title:o,'aria-label':this.props.tooltip,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center',className:l(this.props.className,"_5upq _5upr")})));}});f.exports=m;},null);
__d('UFICommentMenu.react',['Bootloader','React','XUICloseButton.react','XUIEditButton.react','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();'use strict';var m=i.PropTypes,n,o,p,q,r=l({EDIT:true,CLOSE:true}),s=i.createClass({displayName:'UFICommentMenu',propTypes:{menuData:m.array,menuType:m.oneOf(Object.keys(r)).isRequired,onAction:m.func,onClick:m.func},getInitialState:function(){return {bootloading:false,bootloaded:false,needsExpand:false};},onClickGuard:function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});h.loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],(function(t,u,v){n=t,o=u;p=v;q=p.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}).bind(this));}else if(this.props.onClick)this.props.onClick(event);},shouldComponentUpdate:function(t,u,v){if(this.state.needsExpand&&!u.needsExpand)return false;return true;},render:function(){var t=null;if(this.props.menuType===r.EDIT){t=k;}else t=j;if(this.props.menuData&&this.state.bootloaded){var u=this.props.menuData.map(function(w){return (i.createElement(q,{'data-testid':w.testid,key:w.value,value:w.value},w.label));}),v=i.createElement(p,{onItemClick:this.props.onAction},u);return (i.createElement(o,babelHelpers._extends({},this.props,{alignh:'right',layerBehaviors:[n],menu:v,ref:'menu'}),i.createElement(t,{href:'#',onClick:this.onClickGuard})));}return i.createElement(t,babelHelpers._extends({},this.props,{href:'#',onClick:this.onClickGuard}));},componentDidUpdate:function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}}});s.MenuType=r;f.exports=s;},null);
__d("clearTimeout",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=b.clearTimeout.bind(b);},null);
__d('UFICommentVPVTracker.react',['OnVisible.react','React','UFICommentVPVs','UFIConfig','clearTimeout','setTimeout'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();'use strict';var n=i.PropTypes,o=i.createClass({displayName:'UFICommentVPVTracker',propTypes:{comment:n.object.isRequired,contextArgs:n.object.isRequired},render:function(){var p=this.props.comment.id,q=this.props.contextArgs.instanceid,r=this.props.children;if(!j.hasLoggedVPV(q,p))r=i.createElement(h,{onVisible:this.maybeScheduleVPVLogging,onHidden:this.cancelScheduledVPVLogging},r);return r;},maybeScheduleVPVLogging:function(){if(this.state.timer!==null)return;var p=this.props.comment.id,q=this.props.contextArgs.instanceid;if(j.hasLoggedVPV(q,p))return;this.setState({timer:m((function(){j.logVPV(q,p);this.setState({timer:null});}).bind(this),k.vpvLoggingTimeout)});},cancelScheduledVPVLogging:function(){if(this.state.timer===null)return;l(this.state.timer);this.setState({timer:null});},getInitialState:function(){return {timer:null};},shouldComponentUpdate:function(p,q){return q.timer===this.state.timer;},componentWillReceiveProps:function(){this.cancelScheduledVPVLogging();},componentWillUnmount:function(){this.cancelScheduledVPVLogging();}});f.exports=o;},null);
__d('UFIComment.react',['BanzaiLogger','Bootloader','HovercardLink','React','ReactDOM','TrackingNodes','TextWithEntities.react','UFIActorIcon.react','UFIBusinessActorIcon.react','UFICommentAction','UFICommentActions.react','UFICommentAttachment.react','UFICommentAuthorName.react','UFICommentBody.react','UFICommentMenu.react','UFICommentUtils.react','UFICommentVPVTracker.react','UFIConfig','UFIConstants','UFIImageBlock.react','UFITranslationConstants','URI','XUICloseButton.react','cx','emptyFunction','joinClasses','keyMirror','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){if(c.__markCompiled)c.__markCompiled();'use strict';var ja=k.PropTypes,ka=z.UFIStatus,la=ha({edit:true,hide:true,remove:true}),ma='ufi_comment_close_button',na='ufi_comment_menu_delete',oa='ufi_comment_menu_edit',pa='ufi_comment_menu_hide',qa="UFITranslateLink",ra="UFITranslatedText",sa="UFITranslationErrorText",ta="UFITranslateAttribution",ua="fcg",va=null,wa=function(za){var ab=za.status;return ab===ka.FAILED_ADD||ab===ka.FAILED_EDIT;};function xa(za){return za.commenterIsFOF!==undefined&&za.userIsMinor!==undefined&&za.reportLink!==undefined;}var ya=k.createClass({displayName:'UFIComment',propTypes:{authorProfiles:ja.object.isRequired,comment:ja.object.isRequired,contextArgs:ja.object.isRequired,feedback:ja.object.isRequired,'data-ft':ja.string,focusOnMount:ja.bool,hasPartialBorder:ja.bool,hideAsSpamForPageAdmin:ja.bool,isFeatured:ja.bool,isFirst:ja.bool,isFirstCommentComponent:ja.bool,isFirstComponent:ja.bool,isLast:ja.bool,isLastCommentComponent:ja.bool,isLastComponent:ja.bool,isLocallyComposed:ja.bool,isReply:ja.bool,onCommentReply:ja.func,permalink:ja.string,shortenTimestamp:ja.bool,showPermalink:ja.bool,isStreaming:ja.bool,showRemoveReportMenu:ja.bool,showReplyLink:ja.bool,viewerIsAuthor:ja.bool},contextTypes:{dispatch:ja.func},getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false,loggedLiveUpdate:false};},_onHideAsSpam:function(event){this.context.dispatch(q.markAsSpam(this.props.comment,event));this.setState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.context.dispatch(q.markAsNotSpam(this.props.comment,event));this.setState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.context.dispatch(q.remove(this.props.comment,event.target,(function(){return this.setState({isInlinePageDeleted:true});}).bind(this)));},_onRemove:function(event){this.context.dispatch(q.remove(this.props.comment,event.target,fa));},_onInlineBan:function(event){this.context.dispatch(q.inlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.context.dispatch(q.undoInlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:false});},_onAction:function(event,za){var ab=za.item,bb=ab.getValue();setTimeout((function(){if(bb===la.remove){this._onRemove(event);}else if(bb===la.edit){this.context.dispatch(q.edit(this.props.comment));}else if(bb===la.hide)this._onHideAsSpam(event);}).bind(this),0);},_createRemoveReportMenuData:function(){return [{testid:na,value:la.remove,label:ia._("Delete Comment...")},{testid:pa,value:la.hide,label:ia._("Hide Comment")}];},_createEditDeleteMenuData:function(){return [{testid:oa,value:la.edit,label:ia._("Edit...")},{testid:na,value:la.remove,label:ia._("Delete...")}];},_renderCloseButton:function(){if(this.props.isStreaming)return null;var za=this.props.comment,ab=null,bb=null,cb=null,db=false;if(za.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor&&za.canedit){cb=ia._("Edit or Delete");bb=this._createEditDeleteMenuData();db=true;}else if(this.props.showRemoveReportMenu){cb=ia._("Remove or Report");bb=this._createRemoveReportMenuData();}else{cb=ia._("Remove");ab=this._onRemove;}}else if(za.canreport){cb=ia._("Hide");ab=this._onHideAsSpam;}var eb="UFICommentCloseButton"+(ab===null&&bb===null?' '+"hdn":''),fb=null,gb=null;if(this.props.contextArgs.viewas){fb="/ajax/profile/link_disabled_in_viewas.php";gb="dialog";ab=null;}var hb=db?v.MenuType.EDIT:v.MenuType.CLOSE;return (k.createElement(v,{ajaxify:fb,className:eb,'data-testid':ma,onClick:ab,rel:gb,tooltip:cb,menuData:bb,menuType:hb,onAction:this._onAction}));},_renderFakeCloseButton:function(){return (k.createElement(da,{className:'UFICommentCloseButtonFake',tabIndex:'-1'}));},componentDidMount:function(){if(this.state.isHighlighting){var za=l.findDOMNode(this),ab=parseInt(this.props.comment.scrolltopoffset||0,10);i.loadModules(["UFIScrollHighlight"],function(bb){setTimeout(bb.actOn.bind(null,za,ab),0);});this.setState({isHighlighting:false});}},shouldComponentUpdate:function(za,ab){var bb=this.props,cb=this.state;return (za.comment!==bb.comment||za.showReplyLink!==bb.showReplyLink||za.isFirst!==bb.isFirst||za.isLast!==bb.isLast||za.isFirstCommentComponent!==bb.isFirstCommentComponent||za.isLastCommentComponent!==bb.isLastCommentComponent||za.isFirstComponent!==bb.isFirstComponent||za.isLastComponent!==bb.isLastComponent||za.isFeatured!==bb.isFeatured||za.hasPartialBorder!==bb.hasPartialBorder||ab.wasHighlighted!==cb.wasHighlighted||ab.isHighlighting!==cb.isHighlighting||ab.markedAsSpamHere!==cb.markedAsSpamHere||ab.isInlinePageDeleted!==cb.isInlinePageDeleted||ab.isInlineBanned!==cb.isInlineBanned);},render:function(){var za=this.props.comment,ab=this.props.feedback,bb=za.status===ka.DELETED,cb=za.status===ka.LIVE_DELETED,db=za.status===ka.SPAM_DISPLAY,eb=this.state.markedAsSpamHere,fb=this.state.isInlinePageDeleted,gb=this.props.hideAsSpamForPageAdmin,hb=this.state.isInlineBanned;if(za.islive&&!this.state.loggedLiveUpdate){h.log('LiveWWWFeedbackLoggerConfig',{event:'update_view',update_type:'comment'});this.setState({loggedLiveUpdate:true});}var ib=xa(za),jb=!za.status&&(za.isunseen||za.islocal);if(!za.status&&ab.lastseentime){var kb=za.originalTimestamp||za.timestamp.time;jb=jb||kb>ab.lastseentime;}var lb=this.props.contextArgs.markedcomments;if(lb&&lb[za.legacyid])jb=true;var mb=(this.props.isFirst?"UFIFirstComment":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'');if(ib)if(va){var nb,ob=null,pb=null,qb=null;if(gb){pb=hb?this._onUndoInlineBan:this._onInlineBan;if(fb){nb=ia._("You've deleted this comment so no one can see it.");}else if(eb){nb=ia._("Now this is only visible to the person who wrote it and their friends.");qb=this._onDeleteSpam;ob=this._onMarkAsNotSpam;}}else if(eb){nb=ia._("This comment has been hidden.");qb=this._onDeleteSpam;ob=this._onMarkAsNotSpam;}if(nb)return (k.createElement('li',{className:ga(mb,"UFIRow UFIHide")},k.createElement(va,{notice:nb,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:ob,onBanAction:pb,onDeleteAction:qb,isInlineBanned:hb,isInlinePageDeleted:fb,hideAsSpamForPageAdmin:gb,pageID:this.props.feedback.ownerid})));}else i.loadModules(["UFICommentRemovalControls.react"],(function(ub){va=ub;setTimeout((function(){this.forceUpdate();}).bind(this));}).bind(this));var rb=!bb,sb=ga(mb,"UFIRow"+(' '+"UFIComment")+(wa(za)?' '+"UFICommentFailed":'')+(bb||cb||db?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(!rb?' '+"noDisplay":'')+(rb?' '+"display":'')+(' '+"UFIComponent")+(this.props.hasPartialBorder?' '+"UFIPartialBorder":'')+(jb?' '+"UFIUnseenItem":'')),tb=this.renderComment();if(this.props.shouldLogVPVs)tb=k.createElement(x,{comment:za,contextArgs:this.props.contextArgs},tb);return (k.createElement('li',{className:sb,'data-ft':this.props['data-ft']},tb));},renderComment:function(){var za=this.props,ab=za.comment,bb=ab.body?ab.body.text:'',cb=w.shallowCopyRanges(ab.body&&ab.body.ranges),db=za.permalink,eb=za.feedback,fb=za.authorProfiles[ab.author],gb=ab.status===ka.SPAM_DISPLAY,hb=ab.status===ka.LIVE_DELETED,ib=!(gb||hb),jb=eb.canremoveall||ab.hiddenbyviewer;bb=w.getCommentTextWithTruncatedURIs(cb,bb);var kb=null,lb=null;if(!za.isLocallyComposed&&!this.state.wasHighlighted){lb=z.commentTruncationLength;kb=z.commentTruncationMaxLines;}var mb=m.getTrackingInfo(m.types.SMALL_ACTOR_PHOTO),nb=m.getTrackingInfo(m.types.USER_MESSAGE),ob=null,pb=null,qb=null,rb=null;if(ab.istranslatable&&ab.translatedbody===undefined)ob=k.createElement('a',{href:'#',role:'button',title:ia._("Translate this comment"),className:qa,onClick:(function(event){return this.context.dispatch(q.translate(ab,event));}).bind(this)},ia._("See Translation"));if(ab.translatedbody!==undefined)if(ab.translatedbody!==null&&ab.translatedbody.text!==''){var sb=ba.BING_PAGE_URL,tb=ba.BING_TRANSLATOR_APP,ub=null;if(ab.translatorapp===tb){var vb=new ca(sb).addQueryData({text:bb});ub=k.createElement('a',{href:vb.toString(),target:'_blank',className:ua},ia._("Translated by Bing"));}else ub=ia._("Automatically Translated");rb=k.createElement('span',{className:ta},ub);var wb=w.shallowCopyRanges(ab.translatedbody.ranges),xb=ab.translatedbody.text,yb=ab.translatedbody.dir,zb=k.createElement('span',{key:'comment-body','data-ft':nb,dir:yb},k.createElement(n,{className:"UFICommentBody"+(this.props.contextArgs.useWhitespacesRender?' '+"UFICommentBodyPreserveWhitespace":''),interpolator:w.getCommentBodyInterpolator(za.feedback.grouporeventid),ranges:wb,text:xb,renderEmoticons:y.renderEmoticons,renderEmoji:y.renderEmoji}));pb=k.createElement('span',{className:ra},zb);}else qb=k.createElement('span',{className:sa},ia._("No Translation Available"));var ac=k.createElement(u,{socialContext:ab.socialcontext,commentText:bb,commentRanges:cb,groupOrEventID:eb.grouporeventid,useWhitespacesRender:this.props.contextArgs.useWhitespacesRender,maxLength:lb,maxLines:kb}),bc=za.contextArgs.viewas?null:j.constructEndpointWithGroupAndLocation(fb,eb.grouporeventid,'ufi',ab.isauthorweakreference).toString(),cc=k.createElement(t,{author:fb,authorProfiles:za.authorProfiles,showHovercard:!!bc,isAuthorWeakReference:ab.isauthorweakreference,focusOnMount:za.focusOnMount,groupOrEventID:eb.grouporeventid,isFeatured:za.isFeatured,socialContext:ab.socialcontext}),dc=null;if(ab.photo_comment_status)dc=k.createElement('div',{className:"_50f8"},ab.photo_comment_status);var ec=null;if(ab.sticker_attachment_status)ec=k.createElement('div',{className:"_50f8"},ab.sticker_attachment_status);var fc=null;if(ab.status!==ka.DELETED&&!za.isStreaming)fc=k.createElement(s,{comment:za.comment});var gc="img UFIActorImage _54ru",hc=fb.isBusinessPersona?k.createElement(p,{firstName:fb.firstName,lastName:fb.lastName,classNames:gc,textClassNames:"UFIBusinessActorIconText"}):k.createElement(o,{src:fb.thumbSrc,className:gc,alt:''});if(fb.uri||fb.isBusinessPersona)hc=k.createElement('a',{'data-ft':mb,'data-hovercard':bc,href:fb.uri},hc);return (k.createElement(aa,{spacing:'medium'},hc,k.createElement('div',{className:'UFICommentContentBlock'},k.createElement('div',{className:'UFICommentContent'},cc,ac,ob,pb,rb,qb,fc),dc,ec,k.createElement(r,{comment:ab,feedback:eb,onCommentReply:za.onCommentReply,onMarkAsNotSpam:(function(event){return this.context.dispatch(q.markAsNotSpam(ab,event));}).bind(this),permalink:db,viewerCanMarkNotSpam:jb,shortenTimestamp:za.shortenTimestamp,showPermalink:za.showPermalink,isStreaming:za.isStreaming,showReplyLink:za.showReplyLink,contextArgs:za.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:za.hideAsSpamForPageAdmin}),ib?this._renderCloseButton():null),ib?this._renderFakeCloseButton():null));}});f.exports=ya;},null);
__d('UFIContainer.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.createClass({displayName:'UFIContainer',render:function(){var k=null;if(this.props.hasNub)k=h.createElement('li',{className:'UFIArrow'},h.createElement('i',null));var l=(!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'');return (h.createElement('ul',{className:l},k,this.props.children));}});f.exports=j;},null);
__d('UFIInlineShareConfirmation.react',['React','UFIImageBlock.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=[l.object,l.string],n=h.createClass({displayName:'UFIInlineShareConfirmation',propTypes:{isError:l.bool.isRequired,isFirstComponent:l.bool,isLastComponent:l.bool,message:l.oneOfType(m).isRequired},render:function(){var o=k("UFIRow"+(' '+"UFIInlineShareConfirmation")+(this.props.isError?' '+"UFIInlineShareError":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));return (h.createElement('li',{className:o},h.createElement(i,null,h.createElement('i',{className:'UFIConfirmationIcon'}),this._getText())));},_getText:function(){if(this.props.message.__html)return h.createElement('span',{dangerouslySetInnerHTML:this.props.message});return h.createElement('span',null,this.props.message);}});f.exports=n;},null);
__d('UFILikeSentenceText.react',['ActorURI','HovercardLinkInterpolator','ProfileBrowserLink','ProfileBrowserTypes','React','TextWithEntities.react','URI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=l.PropTypes;function r(t,u,v,w){if(w.count!=null){var x=k.LIKES,y={id:t.targetfbid,actorid:t.actorid},z=[],aa;for(var ba=0;ba<u.length;ba++)if(!u[ba].count){aa=u[ba];var ca=aa.entity;z.push(ca.id);}var da=new n('/ajax/like/tooltip.php').setQueryData({comment_fbid:t.targetfbid,comment_from:t.actorforpost,seen_user_fbids:z.length?z:true});da=h.create(da,t.actorforpost);var ea,fa;if(t.displayreactions){ea=p.getURIBuilder().setString('ft_ent_identifier',t.entidentifier).getURI();ea=h.create(ea,t.actorforpost);fa=o.getURIBuilder().setString('ft_ent_identifier',t.entidentifier).getURI();fa=h.create(fa,t.actorforpost);}else{ea=j.constructDialogURI(x,y).toString();fa=j.constructPageURI(x,y).toString();}return (l.createElement('a',{'data-testid':'n_other_people_link',className:'UFINoWrap',rel:'dialog',ajaxify:ea,href:fa,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':da.toString(),role:'button'},v));}else{var ga={source_feedback_owner_id:t.ownerid,source_feedback_identifier:t.entidentifier};return i(v,w,null,null,'ufi',ga);}}var s=l.createClass({displayName:'UFILikeSentenceText',propTypes:{contextArgs:q.object.isRequired,feedback:q.object.isRequired,likeSentenceData:q.object.isRequired},render:function(){var t=this.props.feedback,u=this.props.likeSentenceData,v,w=u.aggregatedranges||u.aggregated_ranges;v=r;v=v.bind(null,t,u.ranges);return (l.createElement(m,{interpolator:v,ranges:u.ranges,aggregatedRanges:w,text:u.text}));}});f.exports=s;},null);
__d('UFILikeSentence.react',['Bootloader','LeftRight.react','ProfileBrowserLink','ProfileBrowserTypes','React','UFIImageBlock.react','UFILikeSentenceText.react','UFIStoryAction','URI','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=l.PropTypes,u=l.createClass({displayName:'UFILikeSentence',propTypes:{contextArgs:t.object.isRequired,feedback:t.object.isRequired,isFirstComponent:t.bool,isLastComponent:t.bool,onOrderingModeChange:t.func,showOrderingModeSelector:t.bool},contextTypes:{dispatch:t.func},getInitialState:function(){return {selectorModule:null,bootloadedSelectorModule:false};},componentWillMount:function(){this._bootloadSelectorModule(this.props);},componentWillReceiveProps:function(v){this._bootloadSelectorModule(v);},_bootloadSelectorModule:function(v){if(v.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){var w=(function(x){this.setState({selectorModule:x});}).bind(this);if(v.contextArgs.entstream){h.loadModules(["UFIEntStreamOrderingModeSelector.react"],w);}else h.loadModules(["UFIOrderingModeSelector.react"],w);this.setState({bootloadedSelectorModule:true});}},render:function(){var v=this.props.feedback,w=v.likesentences.current||{},x=this.props.contextArgs.entstream,y=r("UFIRow"+(v.likesentences.isunseen?' '+"UFIUnseenItem":'')+(' '+"UFILikeSentence")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),z=null,aa=null;if(w.text)aa=l.createElement('div',{className:"UFILikeSentenceText"},l.createElement(n,{contextArgs:this.props.contextArgs,feedback:v,likeSentenceData:w}));var ba=this.props.contextArgs.ufiexperiments||{};if(aa&&!x&&!ba.showSlimUFI){z=l.createElement('i',{className:'UFILikeIcon'});if(v.viewercanlike&&!v.hasviewerliked)z=l.createElement('a',{className:'UFILikeThumb',href:'#',tabIndex:'-1',title:s._("Like this"),onClick:(function(event){this.context.dispatch(o.toggleLike(event.target));event.preventDefault();}).bind(this),role:'button','aria-label':s._("Like this")},z);}var ca=aa,da=null;if(v.seencount>0&&!x){var ea=k.GROUP_MESSAGE_VIEWERS,fa={id:v.targetfbid},ga=j.constructDialogURI(ea,fa),ha=j.constructPageURI(ea,fa),ia=new p('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:v.entidentifier,displayed_count:v.seencount}),ja;if(v.seenbyall){ja=s._("Seen by everyone");}else ja=v.seencount==1?s._("Seen by 1"):s._("Seen by {count}",[s.param('count',v.seencount)]);da=l.createElement('a',{rel:'dialog',ajaxify:ga.toString(),href:ha.toString(),'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-uri':ia.toString(),className:"UFISeenCount"+(!!w.text?' '+"UFISeenCountRight":'')},l.createElement('span',{className:'UFISeenCountIcon'}),ja);}else if(this.props.showOrderingModeSelector&&this.state.selectorModule){var ka=this.state.selectorModule;da=l.createElement(ka,{entstream:x,orderingmodes:v.orderingmodes,onOrderChanged:(function(ma){return this.context.dispatch(o.changeOrderingMode(ma));}).bind(this)});if(!ca)ca=l.createElement('div',null);}var la=null;if(z&&aa){la=l.createElement(m,null,z,aa,da);}else if(ca){la=l.createElement(i,{direction:i.DIRECTION.right},ca,da);}else la=da;return (l.createElement('li',{className:y},la));}});f.exports=u;},null);
__d('UFIPager.react',['LeftRight.react','React','UFIImageBlock.react','XUISpinner.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'UFIPager',propTypes:{contextArgs:n.object.isRequired,pagerLabel:n.string.isRequired,'data-ft':n.string,countSentence:n.string,isFirstCommentComponent:n.bool,isFirstComponent:n.bool,isLastCommentComponent:n.bool,isLastComponent:n.bool,isLoading:n.bool,isReply:n.bool,isUnseen:n.bool,onPagerClick:n.func},onPagerClick:function(p){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();p.nativeEvent.prevent();},render:function(){var p=this.onPagerClick,q=m("UFIRow"+(this.props.isUnseen?' '+"UFIUnseenItem":'')+(' '+"UFIPagerRow")+(' '+"UFIComponent")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),r=null;if(this.props.isLoading)r=i.createElement(k,{className:'mls',background:'light',size:'small'});var s=i.createElement('a',{className:'UFIPagerLink',onClick:p,href:'#',role:'button'},this.props.pagerLabel,r),t="fcg"+(' '+"UFIPagerCount"),u=i.createElement('span',{className:t},this.props.countSentence),v,w=this.props.contextArgs.ufiexperiments||{};if(this.props.contextArgs.entstream||w.showSlimUFI&&!this.props.isReply){v=i.createElement(h,{direction:h.DIRECTION.right},s,u);}else v=i.createElement(j,null,i.createElement('a',{className:'UFIPagerIcon',onClick:p,href:'#',role:'button'}),s,u);return (i.createElement('li',{className:q,'data-ft':this.props['data-ft']},v));}});f.exports=o;},null);
__d('UFIPagerLabel',['fbt','intlList','NumberFormat'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',_getReplyLabel:function(l,m){var n;switch(l){case k.VIEW_ONE:return h._("View 1 reply");case k.VIEW_ONE_MORE:return h._("View 1 more reply");case k.VIEW_ALL:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View all {count} replies"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE_EXPLICIT:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View {count} more replies"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE:return h._("View more replies");case k.VIEW_PREVIOUS:return h._("View previous replies");default:return null;}},_getCommentLabel:function(l,m){if(m.commenters)return this._getCommentLabelWithCommentSentence(l,m);var n;switch(l){case k.VIEW_ONE:return h._("View 1 comment");case k.VIEW_ONE_MORE:return h._("View 1 more comment");case k.VIEW_ALL:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View all {count} comments"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE_EXPLICIT:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View {count} more comments"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE:return h._("View more comments");case k.VIEW_PREVIOUS:return h._("View previous comments");default:return null;}},_getCommentLabelWithCommentSentence:function(l,m){var n=i(m.commenters),o=m.othersCount,p=j.formatIntegerWithDelimiter(o,m.delimiter),q=j.formatIntegerWithDelimiter(m.count,m.delimiter);switch(l){case k.VIEW_ONE:return h._("View 1 comment from {names}",[h.param('names',n)]);case k.VIEW_ONE_MORE:return h._("View 1 more comment from {names}",[h.param('names',n)]);case k.VIEW_ALL:switch(o){case 0:return h._({"*":"View all {count} comments from {names}"},[h.param('count',q,[0,m.count]),h.param('names',n)]);case 1:return h._({"*":"View all {count} comments from {names} and 1 other person"},[h.param('count',q,[0,m.count]),h.param('names',n)]);default:return h._({"*":{"*":"View all {count} comments from {names} and {othersCount} others"}},[h.param('count',q,[0,m.count]),h.param('names',n),h.param('othersCount',p,[0,o])]);}break;case k.VIEW_MORE_EXPLICIT:case k.VIEW_MORE:switch(o){case 0:return h._("View more comments from {names}",[h.param('names',n)]);case 1:return h._("View more comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View more comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}break;case k.VIEW_PREVIOUS:switch(o){case 0:return h._("View previous comments from {names}",[h.param('names',n)]);case 1:return h._("View previous comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View previous comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}break;default:return null;}},_getQuestionLabel:function(l,m){var n;switch(l){case k.VIEW_ONE:return h._("View 1 question");case k.VIEW_ONE_MORE:return h._("View 1 more question");case k.VIEW_ALL:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View all {count} questions"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE_EXPLICIT:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View {count} more questions"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE:return h._("View more questions");case k.VIEW_PREVIOUS:return h._("View previous questions");default:return null;}},getLabel:function(l,m,n,o){if(m){return k._getReplyLabel(l,o);}else if(n){return k._getQuestionLabel(l,o);}else return k._getCommentLabel(l,o);}};f.exports=k;},null);
__d('UFIReplySocialSentence.react',['Badge.react','LiveTimer','React','Timestamp.react','UFIConstants','UFIImageBlock.react','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=j.PropTypes,r=' \u00b7 ',s=43200,t=j.createClass({displayName:'UFIReplySocialSentence',propTypes:{author:q.object,'data-ft':q.string,isExpanded:q.bool,isFirstComponent:q.bool,isLastComponent:q.bool,isLoading:q.bool,onClick:q.func,orderingMode:q.string,replies:q.number,shortenTimestamp:q.bool,showVerified:q.bool,timestamp:q.object},render:function(){var u=this.props.isLoading?"UFIReplySocialSentenceLoading":'',v=o("UFIRow"+(' '+"UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),w,x;if(this.props.isExpanded){w=this.props.replies>1?p._({"*":"Hide {count} Replies"},[p.param('count',this.props.replies,[0])]):p._("Hide 1 Reply");}else{w=this.props.replies>1?p._({"*":"{count} Replies"},[p.param('count',this.props.replies,[0])]):p._("1 Reply");if(this.props.timestamp){var y=i.getApproximateServerTime()/1000-this.props.timestamp.time;if(y<s||this.props.orderingMode==l.UFICommentOrderingMode.RECENT_ACTIVITY)x=j.createElement('span',{className:"fcg"},r,j.createElement(k,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var z=this.props.author,aa=z&&!this.props.isExpanded,ba=null,ca;if(aa){ba=j.createElement('img',{alt:'',src:z.thumbSrc,className:"img UFIActorImage _54ru"});var da=null;if(this.props.showVerified)da=j.createElement(h,{size:'xsmall',type:'verified'});ca=[p._("{author}{verified_badge} replied",[p.param('author',z.name),p.param('verified_badge',da)]),r,w];}else ca=w;var ea=null,fa=false;if(!aa||this.props.contextArgs.feedcarded){if(aa)fa=true;ea=j.createElement('i',{className:(!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(fa?' '+"UFIFeedCardedIconWithActor":'')});}return (j.createElement('li',{className:v,'data-ft':this.props['data-ft']},j.createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},j.createElement(m,null,j.createElement('div',{className:(aa?"UFIReplyActorPhotoWrapper":'')+(fa?' '+"UFIFeedCardedReplyActor":'')},ea,ba),j.createElement('span',{className:u},j.createElement('span',{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":'')},ca),x)))));}});f.exports=t;},null);
__d('UFIShareRow.react',['NumberFormat','React','UFIImageBlock.react','URI','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=i.PropTypes,p=i.createClass({displayName:'UFIShareRow',propTypes:{contextArgs:o.object.isRequired,feedback:o.object.isRequired,isFirstComponent:o.bool,isLastComponent:o.bool},render:function(){var q=new k('/ajax/shares/view').setQueryData({target_fbid:this.props.feedback.targetfbid}),r=new k('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedback.targetfbid}),s;if(this.props.feedback.sharecount>1){var t=h.formatIntegerWithDelimiter(this.props.feedback.sharecount,this.props.contextArgs.numberdelimiter||',');s=n._({"*":"{count} shares"},[n.param('count',t,[0,this.props.feedback.sharecount])]);}else s=n._("1 share");var u=m("UFIRow"+(' '+"UFIShareRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),v=i.createElement('a',{className:'UFIShareLink',rel:'dialog',ajaxify:q.toString(),href:r.toString()},s),w=i.createElement(j,null,i.createElement('a',{className:'UFIShareIcon',rel:'dialog',ajaxify:q.toString(),href:r.toString()}),v),x=this.props.contextArgs.ufiexperiments||{};return (i.createElement('li',{className:u},x.showSlimUFI?v:w));}});f.exports=p;},null);
__d('UFISpamPlaceholder.react',['React','XUISpinner.react','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'UFISpamPlaceholder',propTypes:{numHidden:k.number.isRequired,isLoading:k.bool,onClick:k.func},render:function(){if(this.props.isLoading)return (h.createElement('li',{className:'UFIRow'},h.createElement('span',{className:'UFISpamCommentWrapper'},h.createElement(i,{className:'mls',background:'light',size:'small'}))));return (h.createElement('li',{className:'UFIRow'},h.createElement('a',{href:'#',role:'button',className:'UFISpamCommentLink',onClick:this.props.onClick,'aria-label':j._("Show comments marked as spam")},h.createElement('span',{'data-hover':'tooltip','data-tooltip-alignh':'center','aria-label':j._({"*":"{count} hidden"},[j.param('count',this.props.numHidden,[0])]),className:'UFISpamCommentWrapper'},h.createElement('i',{className:'placeholderIcon'})))));}});f.exports=l;},null);
__d('BinarySearch',['invariant','keyMirror'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();'use strict';var j=i({LEAST_UPPER_BOUND:null,GREATEST_LOWER_BOUND:null,LEAST_STRICT_UPPER_BOUND:null,GREATEST_STRICT_LOWER_BOUND:null}),k=function(m,n){!(typeof m==='number'&&typeof n==='number')?h(0):undefined;return m-n;},l=babelHelpers._extends({},j,{find:function(m,n,o,p,q){q=q||k;var r=l.LEAST_UPPER_BOUND,s=l.findBound(m,n,o,p,q,r);if(o<=s&&s<p){var t=m(s);return q(t,n)===0?t:undefined;}else return undefined;},findIndex:function(m,n,o,p,q){q=q||k;var r=l.LEAST_UPPER_BOUND,s=l.findBound(m,n,o,p,q,r);if(o<=s&&s<p){return q(m(s),n)===0?s:-1;}else return -1;},findBound:function(m,n,o,p,q,r){switch(r){case l.LEAST_UPPER_BOUND:return l.leastUpperBound(m,n,o,p,q);case l.GREATEST_LOWER_BOUND:return l.greatestLowerBound(m,n,o,p,q);case l.LEAST_STRICT_UPPER_BOUND:return l.leastStrictUpperBound(m,n,o,p,q);case l.GREATEST_STRICT_LOWER_BOUND:return l.greatestStrictLowerBound(m,n,o,p,q);default:h(0);}},leastUpperBound:function(m,n,o,p,q){while(o+1<p){var r=o+Math.floor((p-o)/2);if(q(n,m(r))<=0){p=r;}else o=r;}return o<p&&q(n,m(o))<=0?o:p;},greatestLowerBound:function(m,n,o,p,q){return l.leastStrictUpperBound(m,n,o,p,q)-1;},leastStrictUpperBound:function(m,n,o,p,q){while(o+1<p){var r=o+Math.floor((p-o)/2);if(q(n,m(r))<0){p=r;}else o=r;}return o<p&&q(n,m(o))<0?o:p;},greatestStrictLowerBound:function(m,n,o,p,q){return l.leastUpperBound(m,n,o,p,q)-1;},findInArray:function(m,n,o){return l.find(function(p){return m[p];},n,0,m.length,o);},findIndexInArray:function(m,n,o){return l.findIndex(function(p){return m[p];},n,0,m.length,o);},findBoundInArray:function(m,n,o,p){return l.findBound(function(q){return m[q];},n,0,m.length,o,p);}});f.exports=l;},null);
__d("DateConsts",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=1000,i=60,j=60,k=24,l=7,m=12,n=30.43,o=365.242,p=i*j,q=p*k,r=q*l,s=q*o,t=h*i,u=t*j,v=h*q,w=v*l,x=v*o,y={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6};Object.freeze(y);var z={getDaysInMonth:function(aa,ba){return new Date(aa,ba,0).getDate();},getCurrentTimeInSeconds:function(){return Date.now()/h;},DAYS:y,MS_PER_SEC:h,MS_PER_MIN:t,MS_PER_HOUR:u,MS_PER_DAY:v,MS_PER_WEEK:w,MS_PER_YEAR:x,SEC_PER_MIN:i,SEC_PER_HOUR:p,SEC_PER_DAY:q,SEC_PER_WEEK:r,SEC_PER_YEAR:s,MIN_PER_HOUR:j,HOUR_PER_DAY:k,DAYS_PER_WEEK:l,MONTHS_PER_YEAR:m,AVG_DAYS_PER_MONTH:n,AVG_DAYS_PER_YEAR:o};f.exports=z;},null);
__d("EnvironmentTimezoneDecisionTree",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();'use strict';f.exports={instant:1087737300,"0":{instant:2019715200,"0":{instant:1309636800,"0":{timezone:59},"3600":{timezone:86}},"-3600":{timezone:109}},"10800":{instant:1206834162,"7200":{instant:1099178844,"7200":{instant:1309636800,"7200":{timezone:53},"10800":{timezone:134}},"10800":{instant:1783022400,"10800":{timezone:19},"7200":{timezone:115}}},"10800":{instant:2019715200,"10800":{timezone:20},"7200":{instant:1191290400,"10800":{instant:1354016700,"10800":{timezone:76},"7200":{timezone:81}},"7200":{instant:1220877000,"7200":{timezone:108},"10800":{timezone:70}}}}},"7200":{instant:2019715200,"7200":{timezone:141},"3600":{timezone:12}},"3600":{instant:2019715200,"3600":{instant:1191290400,"3600":{timezone:96},"7200":{timezone:133}},"0":{timezone:54}},"-28800":{timezone:4},"-10800":{instant:2019715200,"-10800":{instant:1205042796,"-7200":{instant:1235670300,"-7200":{timezone:10},"-10800":{timezone:11}},"-10800":{timezone:24}},"-14400":{timezone:37},"-7200":{instant:1161703800,"-7200":{timezone:138},"-10800":{timezone:25}}},"-14400":{instant:2019715200,"-10800":{instant:1398396600,"-10800":{instant:1309636800,"-10800":{timezone:9},"-14400":{timezone:41}},"-14400":{instant:1161703800,"-10800":{timezone:111},"-14400":{timezone:23}}},"-14400":{timezone:21},"-16200":{timezone:139},"-18000":{timezone:7}},"-18000":{instant:2019715200,"-18000":{timezone:33},"-21600":{instant:1206834162,"-18000":{timezone:6},"-21600":{timezone:94}}},"-21600":{instant:2019715200,"-21600":{instant:1154307150,"-21600":{timezone:32},"-18000":{instant:1117323900,"-21600":{instant:1146910500,"-18000":{timezone:61},"-21600":{timezone:63}},"-18000":{timezone:97}}},"-25200":{instant:1206834162,"-21600":{timezone:2},"-25200":{timezone:93}},"-18000":{timezone:40}},"-25200":{instant:2019715200,"-28800":{instant:1206834162,"-25200":{timezone:1},"-28800":{timezone:91}},"-25200":{timezone:5}},"-7200":{timezone:22},"-9000":{timezone:38},"14400":{instant:1235670300,"10800":{instant:1309636800,"10800":{timezone:72},"14400":{timezone:116}},"14400":{timezone:8},"18000":{timezone:89}},"25200":{instant:2019715200,"25200":{timezone:66},"21600":{timezone:119}},"21600":{instant:2019715200,"19800":{timezone:82},"21600":{timezone:17},"18000":{timezone:118}},"28800":{instant:1205042796,"28800":{timezone:42},"25200":{timezone:120},"32400":{timezone:13}},"32400":{instant:2019715200,"28800":{timezone:121},"32400":{timezone:68}},"46800":{timezone:125},"18000":{instant:2019715200,"18000":{instant:1220877000,"21600":{timezone:105},"18000":{timezone:90}},"14400":{timezone:117}},"19800":{timezone:71},"43200":{instant:2019715200,"36000":{timezone:124},"46800":{timezone:100}},"39600":{timezone:123},"36000":{instant:2019715200,"32400":{timezone:122},"39600":{timezone:15}},"34200":{timezone:14},"-36000":{timezone:3}};},null);
__d('Timezone',['BinarySearch','DateConsts','EnvironmentTimezoneDecisionTree','areEqual','invariant','memoize'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();'use strict';var n=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,o={},p={UTC:0,PST8PDT:1,setupTimezone:function(r,s){if(!o.hasOwnProperty(r))o[r]=s;},setupTimezoneWithPHPTransitions:function(r,s){var t=s.map(function(u){return ({start:u.ts,offset:u.offset});});t.push({start:n,offset:t[t.length-1].offset});p.setupTimezone(r,t);},getTransitions:function(r){var s=o[r];if(s==null&&r==p.getEnvironmentTimezoneID())return p.getEnvironmentTimezoneTransitions();!s?l(0):undefined;return s;},getTransitionsOrNull:function(r){return o[r]||null;},getDefaultEnvironmentOptions:function(){return {start:new Date('2004-01-01').valueOf()/i.MS_PER_SEC,end:new Date('2034-01-01').valueOf()/i.MS_PER_SEC,step:30*i.SEC_PER_DAY};},getEnvironmentTimezoneTransitions:m(function(){return (p.detectEnvironmentTimezoneTransitions(p.getDefaultEnvironmentOptions()));}),detectEnvironmentTimezoneTransitions:function(r){var s=[],t=function(z){return (-i.SEC_PER_MIN*new Date(i.MS_PER_SEC*z).getTimezoneOffset());},u=t(r.start),v;s.push({start:r.start,offset:u});for(var w=r.start;w+r.step<r.end;w+=r.step){var x=w+r.step;v=t(x);if(u!==v){var y=h.leastUpperBound(function(z){return t(z)!==u;},1,w,x,function(z,aa){return z-aa;});s.push({start:y,offset:t(y)});}u=v;}if(s[s.length-1].start!==r.end)s.push({start:r.end,offset:t(r.end)});!(2<=s.length)?l(0):undefined;return s;},getEnvironmentTimezoneID:m(function(){return p.detectEnvironmentTimezoneID();}),detectEnvironmentTimezoneID:function(){var r=function(s){if(s.timezone)return s.timezone;var t=new Date(s.instant*1000),u=""+t.getTimezoneOffset()*-60;if(!s[u])return null;return r(s[u]);};return r(j);}},q=[{start:0,offset:0},{start:n,offset:0}];p.setupTimezone(p.UTC,q);f.exports=p;},null);
__d('parseISODate',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j=/^([\d-]+)(?:T([\d:.]+))?(.*)/,k=j.exec(i),l=k[0],m=k[1],n=k[2],o=k[3],p=m.split('-'),q=+p[0],r=+p[1],s=+p[2],t=n?n.split(':'):[],u=+t[0]||0,v=+t[1]||0,w=+t[2]||0,x;if(!o||o==='Z'){x=0;}else{var y=/^([+-])(\d\d):?(\d\d)?$/.exec(o),z=y[0],aa=y[1],ba=y[2],ca=y[3];x=(aa==='+'?1:-1)*(3600*+ba+60*+ca);}return new Date(Date.UTC(q,r-1,s,u,v,w)-1000*x);}f.exports=h;},null);
__d('Instant',['BinarySearch','DateConsts','Timezone','formatDate','invariant','parseISODate'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();'use strict';var n=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,o={MAX_VALUE:n,MIN_VALUE:0,now:function(){return Math.floor(Date.now()/i.MS_PER_SEC);},getOffset:function(p,q){var r=o.getControllingTransition(p,q);return r.offset;},getControllingTransition:function(p,q){var r=j.getTransitions(q),s=h.greatestLowerBound(function(t){return r[t].start;},p,0,r.length,function(t,u){return t-u;});!(0<=s)?l(0):undefined;!(p<r[r.length-1].start)?l(0):undefined;return r[s];},getParallel:function(p,q){var r=o.getControllingTransitionsOfParallel(p,q),s=r.transition,t=r.gapTransition,u=r.overlapTransitions;if(t){return t.start;}else if(u){return p-u[0].offset;}else return p-s.offset;},getControllingTransitionsOfParallel:function(p,q){var r=j.getTransitions(q),s=h.leastUpperBound(function(v){var w=p-r[v].offset;if(w<r[v].start){return 1;}else if(r[v].start<=w&&w<r[v+1].start){return 0;}else return -1;},0,0,r.length-1,function(v,w){return v-w;});!(s<r.length-1)?l(0):undefined;var t=r[s],u=r[s+1];!(0<=s||t.start<=p-t.offset)?l(0):undefined;if(p-t.offset<t.start){return {gapTransition:t};}else if(u.start<=p-u.offset){return {overlapTransitions:[t,u]};}else return {transition:t};},toISOString:function(p){return o.format(p,'Y-m-dTH:i:sZ',{skipPatternLocalization:true});},fromISOString:function(p){return Math.floor(m(p).getTime()/i.MS_PER_SEC);},format:function(p,q,r){r=babelHelpers._extends({},r||{},{utc:true});return k(p,q,r);}};f.exports=o;},null);
__d('CommentsTimeSpentTracker.react',['Banzai','BanzaiLogger','Instant','OnVisible.react','React','pageID'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();'use strict';var n=l.PropTypes,o=l.createClass({displayName:'CommentsTimeSpentTracker',propTypes:{orderingMode:n.string.isRequired,targetFBID:n.number.isRequired},getInitialState:function(){return {firstVisibleTime:0};},render:function(){return (l.createElement(k,{onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children));},startInterval:function(){this.setState({firstVisibleTime:j.now()});},finishInterval:function(){if(this.state.firstVisibleTime&&this.isMounted()){var p=j.now();if(p>this.state.firstVisibleTime)i.log('CommentsTimeSpentLoggerConfig',{ordering_mode:this.props.orderingMode,post_id:this.props.targetFBID,start_time:this.state.firstVisibleTime,end_time:p,time_spent_id:m});}this.setState({firstVisibleTime:0});},componentWillReceiveProps:function(){this.finishInterval();},componentDidMount:function(){h.subscribe(h.SHUTDOWN,this.finishInterval);},shouldComponentUpdate:function(p,q){return q.firstVisibleTime===q.firstVisibleTime;}});f.exports=o;},null);
__d('StaticUFI.react',['Arbiter','BootloadedComponent.react','Bootloader','CommentPrelude','DOM','DOMScroll','Event','JSResource','LogHistory','NumberFormat','Parent','React','ReactDOM','ReactFragment','ScrollableArea.react','SearchableEntry','ShareNowConstants','TrackingNodes','UFIAddCommentController','UFIAddCommentLink.react','UFIComment.react','UFICommentOrdering','UFIConstants','UFIContainer.react','UFIInlineShareConfirmation.react','UFIInstanceState','UFILikeSentence.react','UFIPager.react','UFIPagerLabel','UFIReplySocialSentence.react','UFIShareRow.react','UFISpamPlaceholder.react','UFIStoryAction','CommentsTimeSpentTracker.react','URI','XUISpinner.react','cx','getUnboundedScrollPosition','isEmpty','focusWithinLayer','throttle','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa){if(c.__markCompiled)c.__markCompiled();'use strict';var xa=s.PropTypes,ya=da.UFIPaging,za=s.createElement('li',{className:"UFICommentsLoadingSpinnerContainer UFIFirstCommentComponent UFIRow"},s.createElement(qa,{size:'large'})),ab=s.createClass({displayName:'StaticUFI',contextTypes:{dispatch:xa.func},getInitialState:function(){return {loadingSpamIDs:{},replyComposerIDToFocusOnMount:null,hasPagedToplevel:false,entry:null,repliesMap:{}};},getDefaultProps:function(){return {commentIDToFocusOnMount:null,inlineShare:{},isActiveLoading:{},repliesExpandedMap:{}};},componentDidMount:function(){if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var bb=va(this.loadMoreComments,20);this._scrollEventListener=n.listen(window,'scroll',bb);this._resizeEventListener=n.listen(window,'resize',bb);}this._resolveFocus();if(this.props.isInitialRender){var cb='replycomposer-'+this.props.feedback.permalinkcommentid;if(cb in this.refs)this.refs[cb].focus();}},componentWillUnmount:function(){if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},componentDidUpdate:function(bb,cb){this._resolveFocus(bb);if(this.state.replyComposerIDToFocusOnMount in this.refs){this.refs[this.state.replyComposerIDToFocusOnMount].focus();if(this.state.entry)this.refs[this.state.replyComposerIDToFocusOnMount].insertMention(this.state.entry);this.setState({replyComposerIDToFocusOnMount:null,entry:null});}},_resolveFocus:function(bb){if(this.props.inlineShare.toggling){var cb=bb&&bb.inlineShare||{};k.expand(t.findDOMNode(this),false,'ufi.react');if(!cb.active&&!this.props.inlineShare.active)this.onComment();var db=this.props.inlineShare.active;if(db){var eb=!cb.loaded;setTimeout((function(){return this._focusInlineShare({shouldHighlight:eb});}).bind(this),10);}ga.updateStateField(this.props.instanceid,'inlineShare','toggling',false);}},_isAds:function(){return this.props.source===da.UFIFeedbackSourceType.ADS;},_showLikeSentenceOrderingModeSelector:function(){var bb=this.props,cb=bb.hideOrderingModeSelector,db=bb.feedback,eb=bb.commentCounts,fb=bb.id;return (!cb&&db.orderingmodes&&eb[fb]>=da.minCommentsForOrderingModeSelector);},_hasLikeSentenceRow:function(){var bb=this.props,cb=bb.contextArgs,db=bb.feedback;if(this._isAds()||cb.search)return false;if(db.displayreactions&&cb.hasReactions)return false;return (!ta(db.likesentences.current)||db.seencount>0&&!cb.entstream||this._showLikeSentenceOrderingModeSelector());},_hasShares:function(){var bb=this.props,cb=bb.contextArgs,db=bb.feedback;if(this._isAds())return false;return (cb.showshares&&db.sharecount&&(!cb.hasReactions||!cb.hasReactionsTokens));},_hasShareRow:function(){return (this._hasShares()&&!this.props.contextArgs.entstream);},_hasComments:function(){if(this._isAds())return false;var bb=this.props.availableComments;return !!(bb&&bb.length);},_hasAddCommentView:function(){var bb=this.props,cb=bb.canAddCommentMap,db=bb.contextArgs,eb=bb.feedback,fb=bb.id;return (eb.cancomment&&db.showaddcomment&&eb.actorforpost&&cb[fb]);},_hasAddCommentLink:function(){return (this._hasAddCommentView()&&this._hasCommentOrderInverted()&&this.state.hasPagedToplevel);},render:function(){var bb=this.props,cb=bb.feedback,db=bb.contextArgs,eb=this._hasLikeSentenceRow(),fb=this._hasShares(),gb=this._hasShareRow(),hb=bb.inlineShare.message?s.createElement(fa,this.props.inlineShare):null,ib=eb?s.createElement(ha,{contextArgs:bb.contextArgs,feedback:bb.feedback,showOrderingModeSelector:this._showLikeSentenceOrderingModeSelector()}):null,jb=gb?s.createElement(la,{contextArgs:db,feedback:cb}):null;if(bb.loadingComments)return (s.createElement(ea,{hasNub:false},hb,ib,jb,za));var kb=this._hasComments(),lb=kb?this.renderCommentMap(bb.availableComments,bb.ranges[bb.id].getOffset()):null;db.hasComments=kb;var mb=null,nb=cb.cancomment;if(this._hasAddCommentView()){db.orderingmodes=cb.orderingmodes;var ob=new z(null,bb.id,null,db),pb=bb.authorProfiles[cb.actorforpost];mb=ob.renderAddComment(pb,cb.ownerid,cb.mentionsdatasource,cb.showsendonentertip,'toplevelcomposer',null,cb.subtitle,cb.allowphotoattachments,cb.allowstickerattachments,cb.isqanda,null);}var qb=bb.hideToplevelPager?{topPager:null,bottomPager:null}:this.renderPagers(bb.id,bb.ranges[bb.id].getOffset(),bb.ranges[bb.id].getLength()),rb,sb,tb=this.applyToUFIComponents([qb.topPager],lb,[qb.bottomPager],{isFirstCommentComponent:true},{isLastCommentComponent:true});rb=tb[0];lb=tb[1];sb=tb[2];var ub=rb,vb=ub[0],wb=sb,xb=wb[0];qb={topPager:vb,bottomPager:xb};var yb=this._hasCommentOrderInverted()?mb:null,zb=this._hasCommentOrderInverted()?null:mb,ac=this._hasAddCommentLink()?s.createElement(aa,{onClick:this.onComment,isQAndA:cb.isqanda}):null,bc=this.applyToUFIComponents([hb,ib,jb,yb,qb.topPager],lb,[qb.bottomPager,zb,ac],{isFirstComponent:true},{isLastComponent:true});rb=bc[0];lb=bc[1];sb=bc[2];var cc=rb;hb=cc[0];ib=cc[1];jb=cc[2];yb=cc[3];vb=cc[4];var dc=sb;xb=dc[0];zb=dc[1];ac=dc[2];qb={topPager:vb,bottomPager:xb};var ec=[qb.topPager,lb&&u.create(lb),qb.bottomPager];if(db.scrollcomments&&db.scrollwidth)ec=s.createElement('li',null,s.createElement(v,{width:db.scrollwidth},s.createElement('ul',null,ec)));if(kb&&db.logCommentsTimespent)ec=s.createElement(oa,{orderingMode:this.props.orderingMode,targetFBID:parseInt(this.props.id,10)},s.createElement('frag',null,ec));if(this.props.inlineShare.active){return (s.createElement(ea,{hasNub:false},s.createElement(i,babelHelpers._extends({bootloadPlaceholder:s.createElement('span',null),bootloadLoader:o('ShareDialog.react')},this.props.inlineShare.props,{onCancel:(function(){return this._resetInlineShare();}).bind(this),onPost:(function(gc){j.loadModules(["ShareDialogOsricController"],(function(hc){hc.onPost(gc,this._beforePostInlineShare,this._onInlineShareSuccess,this._onInlineShareError);}).bind(this));}).bind(this),ref:'inlineShare',renderInline:true,status:this.props.inlineShare.status}))));}else{var fc=eb||fb||kb||nb;return (s.createElement(ea,{hasNub:db.shownub&&fc},hb,ib,jb,yb,ec,zb,ac));}},applyToUFIComponents:function(bb,cb,db,eb,fb){var gb=this._applyToFirstComponent(bb,cb,db,eb,false);bb=gb[0];cb=gb[1];db=gb[2];var hb=this._applyToFirstComponent(db,cb,bb,fb,true);db=hb[0];cb=hb[1];bb=hb[2];return [bb,cb,db];},_applyToFirstComponent:function(bb,cb,db,eb,fb){var gb,hb,ib;gb=fb?bb.length-1:0;hb=fb?-1:bb.length;for(ib=gb;ib!=hb;ib+=fb?-1:1)if(bb[ib]){bb[ib]=s.cloneElement(bb[ib],eb);return [bb,cb,db];}var jb=Object.keys(cb||{});gb=fb?jb.length-1:0;hb=fb?-1:jb.length;for(ib=gb;ib!=hb;ib+=fb?-1:1){var kb=jb[ib];if(cb[kb]&&cb[kb].props.comment&&this._shouldRenderComment(cb[kb].props.comment)){cb[kb]=s.cloneElement(cb[kb],eb);return [bb,cb,db];}}gb=fb?db.length-1:0;hb=fb?-1:db.length;for(ib=gb;ib!=hb;ib+=fb?-1:1)if(db[ib]){db[ib]=s.cloneElement(db[ib],eb);return [bb,cb,db];}return [bb,cb,db];},_focusInlineShare:function(bb){bb=bb||{};var cb=t.findDOMNode(this.refs.inlineShare);if(!this.props.inlineShare.messageOnly)ua(cb);if(!this.props.contextArgs.ufiexperiments.inlineShareHighlight)return;m.ensureVisible(cb);if(bb.shouldHighlight)j.loadModules(["highlight","CSS","cx"],function(db,eb,fb){eb.addClass(cb,"_5p5");var gb=function(){eb.removeClass(cb,"_5p5");};db(cb,gb,'#f6f7f8');});},_shouldRenderComment:function(bb){return bb.status!==da.UFIStatus.DELETED;},renderCommentMap:function(bb,cb){var db=this.props,eb={},fb=bb.length;if(!fb)return eb;var gb=bb[0].parentcommentid,hb=[],ib=(function(){if(hb.length>0){var ub=(function(vb,wb){var xb=this.state.loadingSpamIDs;xb[vb[0]]=true;this.setState({loadingSpamIDs:xb});this.context.dispatch(na.spamFetched(vb,wb));}).bind(this,hb,gb);eb['spam'+hb[0]]=s.createElement(ma,{onClick:ub,numHidden:hb.length,isLoading:!!this.state.loadingSpamIDs[hb[0]]});hb=[];}}).bind(this),jb=db.instanceid,kb=ga.getKeyForInstance(jb,'editcommentid'),lb=!!bb[0].parentcommentid;for(var mb=0;mb<fb;mb++)if(bb[mb].status==da.UFIStatus.SPAM){hb.push(bb[mb].id);}else{ib();var nb=Math.max(db.loggingOffset-mb-cb,0),ob=bb[mb],pb;if(ob.id==kb){pb=this.renderEditCommentBox(ob);}else{var qb=mb===0,rb=mb===fb-1,sb=!lb,tb=lb&&!qb;pb=this.renderComment(ob,nb,qb,rb,sb,tb);}eb['comment'+ob.id]=pb;if(ob.status!==da.UFIStatus.DELETED)eb['replies'+ob.id]=this.renderReplyContainer(ob);}ib();return eb;},renderReplyContainer:function(bb){var cb=this.props,db=cb.commentCounts[bb.id],eb=this.props.repliesExpandedMap[bb.id],fb=!eb&&bb.interestingReplyId,gb,hb;if(eb||bb.interestingReplyId){gb=cb.repliesMap[bb.id];hb=cb.ranges[bb.id].getOffset();if(fb){var ib=gb.filter(function(fc){return fc.id===bb.interestingReplyId;});if(ib.length!==1){p.getInstance('ufi').error('comment '+bb.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');gb=null;}else{gb=ib;hb=bb.interestingReplyOffset;}}}var jb,kb,lb;if(gb){var mb=cb.ranges[bb.id].getOffset(),nb=cb.ranges[bb.id].getLength();if(fb){mb=hb;nb=1;}var ob=this.renderPagers(bb.id,mb,nb);jb=ob.topPager;kb=ob.bottomPager;lb=this.renderCommentMap(gb,hb);}var pb=Math.max(db-bb.spamreplycount,0),qb;if(pb&&(eb&&gb&&gb.length>this.props.replySocialSentenceMaxReplies||!eb&&!gb)){var rb=eb&&!jb&&(this.isLoadingPrev(bb.id)||this.isLoadingNext(bb.id)),sb=null;if(bb.replyauthors&&bb.replyauthors.length)sb=cb.authorProfiles[bb.replyauthors[0]];qb=s.createElement(ka,{contextArgs:cb.contextArgs,author:sb,replies:eb?gb.length:pb,shortenTimestamp:cb.shortenTimestamp,timestamp:bb.recentreplytimestamp,onClick:this.onToggleReplies.bind(this,bb.id),isLoading:rb,isExpanded:eb,showVerified:this.props.feedback.showfeaturedreplies,orderingMode:this.props.orderingMode});}var tb;if(eb)if(bb.cancomment&&cb.canAddCommentMap[bb.id]){var ub=false,vb=Object.keys(lb);for(var wb=vb.length-1;wb>=0;wb--){var xb=vb[wb];if(xb&&lb[xb]){ub=lb[xb].props.isAuthorReply;break;}}tb=this.renderReplyComposer(bb,!ub);}var yb;if(qb||jb||lb||kb||tb){var zb,ac,bc=this.applyToUFIComponents([qb,jb],lb,[kb,tb],{isFirstComponent:true},{isLastComponent:true});zb=bc[0];lb=bc[1];ac=bc[2];var cc=zb;qb=cc[0];jb=cc[1];var dc=ac;kb=dc[0];tb=dc[1];var ec=bb.status===da.UFIStatus.LIVE_DELETED;yb=s.createElement(ea,{isParentLiveDeleted:ec,isReplyList:true},qb,jb,lb&&u.create(lb),kb,tb);}return yb;},renderReplyComposer:function(bb,cb){var db=this.props;return (new z(null,db.id,bb.id,db.contextArgs).renderAddComment(db.authorProfiles[db.feedback.actorforpost],db.feedback.ownerid,db.feedback.mentionsdatasource,false,'replycomposer-'+bb.id,cb,db.feedback.subtitle,db.feedback.allowphotoattachments,db.feedback.allowstickerattachments,db.feedback.isqanda,this.state.repliesMap[bb.id]));},renderEditCommentBox:function(bb){var cb=new z(null,this.props.id,null,{mentionsinput:this.props.contextArgs.mentionsinput}),db=cb.renderEditComment(this.props.authorProfiles[this.props.feedback.actorforpost],this.props.feedback.ownerid,bb,this.props.feedback.mentionsdatasource,this.props.feedback.allowphotoattachments,this.props.feedback.allowstickerattachments,this.props.feedback.isqanda);return db;},renderComment:function(bb,cb,db,eb,fb,gb){var hb=this.props,ib=hb.feedback,jb=ib.actorforpost===bb.author,kb=ga.getKeyForInstance(this.props.instanceid,'locallycomposed'),lb=bb.islocal||kb&&kb[bb.id],mb=ib.showremovemenu||ib.viewerid===bb.author,nb=ib.canremoveall&&ib.isownerpage&&!jb,ob=hb.source!=da.UFIFeedbackSourceType.INTERN,pb=y.getTrackingInfo(y.types.COMMENT,cb),qb=!!bb.parentcommentid,rb=!!bb.isfeatured;switch(this.props.source){case da.UFIFeedbackSourceType.TOPIC_CONVERSATION:return (s.createElement(i,{bootloadPlaceholder:s.createElement('span',null),bootloadLoader:o('UFITopicConversationComment.react'),isFirst:db,isLast:eb,comment:bb,authorProfiles:this.props.authorProfiles,viewerIsAuthor:jb,feedback:ib,contextArgs:this.props.contextArgs,focusOnMount:bb.id===this.props.commentIDToFocusOnMount,isLocallyComposed:lb}));default:var sb=new pa(hb.commentPermalinks[bb.id]).addQueryData({comment_tracking:pb}).toString();return (s.createElement(ba,{isFirst:db,isLast:eb,showReplyLink:fb,hasPartialBorder:gb,comment:bb,authorProfiles:this.props.authorProfiles,viewerIsAuthor:jb,feedback:ib,'data-ft':pb,contextArgs:this.props.contextArgs,hideAsSpamForPageAdmin:nb,isLocallyComposed:lb,isReply:qb,isFeatured:rb,permalink:sb,shortenTimestamp:hb.shortenTimestamp,showPermalink:ob,isStreaming:hb.isStreaming,showRemoveReportMenu:mb,focusOnMount:bb.id===this.props.commentIDToFocusOnMount,onCommentReply:this.onCommentReply.bind(this,bb),shouldLogVPVs:this.props.shouldLogVPVs}));}},onToggleReplies:function(bb){var cb=this.props.repliesExpandedMap[bb];this.setState({replyComposerIDToFocusOnMount:!cb?'replycomposer-'+bb:null});if(!cb){var db=this.props.commentCounts[bb],eb=Math.min(db,this.props.pageSize),fb=db-eb;this.onPage(bb,ya.BOTTOM,{offset:fb,length:eb});}else this.context.dispatch(na.hideReplies(bb));},onPage:function(bb,cb,db){var eb=bb!==this.props.id;this.setState({hasPagedToplevel:this.state.hasPagedToplevel||!eb});this.context.dispatch(na.pageInComments(bb,cb,db));},isLoadingPrev:function(bb){var cb=this.props;bb=bb||cb.id;var db=cb.ranges[bb].getRequestedOffset(),eb=cb.ranges[bb].getOffset();return db<eb;},isLoadingNext:function(bb){var cb=this.props;bb=bb||cb.id;var db=cb.ranges[bb].getRequestedOffset(),eb=cb.ranges[bb].getRequestedLength(),fb=cb.ranges[bb].getOffset(),gb=cb.ranges[bb].getLength();return db+eb>fb+gb;},renderPagers:function(bb,cb,db){var eb=this.props,fb=eb.deletedCounts[bb],gb=eb.commentCounts[bb],hb=gb-fb,ib=db-fb,jb=eb.contextArgs.numberdelimiter||',',kb=bb!==eb.id,lb,mb={topPager:null,bottomPager:null};if(eb.source==da.UFIFeedbackSourceType.ADS)return mb;var nb=this.isLoadingPrev(bb),ob=this.isLoadingNext(bb);if(db==gb)return mb;var pb={delimiter:jb},qb=eb.feedback.commentsentenceinfo;if(qb){pb.commenters=qb.explicit_commenter_names;pb.othersCount=qb.other_commenter_count;}var rb=cb+db==gb;if(gb<eb.pageSize&&rb||ib===0){lb=Math.min(gb,eb.pageSize);var sb=this.onPage.bind(this,bb,this._hasCommentOrderInverted()&&!kb?ya.BOTTOM:ya.TOP,{offset:gb-lb,length:lb}),tb;if(ib===0){if(hb==1){tb=ja.VIEW_ONE;}else{pb.count=hb;tb=ja.VIEW_ALL;}}else if(hb-ib==1){tb=ja.VIEW_ONE_MORE;}else{tb=ja.VIEW_MORE_EXPLICIT;pb.count=hb-ib;}var ub=y.getTrackingInfo(y.types.VIEW_ALL_COMMENTS),vb=ja.getLabel(tb,kb,eb.feedback.isqanda,pb),wb=this._hasCommentOrderInverted()&&!kb,xb=s.createElement(ia,{key:'allPager'+bb,ref:wb?'topLevelBottomPager':null,contextArgs:eb.contextArgs,isUnseen:eb.feedback.hasunseencollapsed,isLoading:nb,isReply:kb,pagerLabel:vb,onPagerClick:sb,'data-ft':ub});if(wb){mb.bottomPager=xb;}else mb.topPager=xb;return mb;}var yb=ja.getLabel(ja.VIEW_MORE,kb,eb.feedback.isqanda,pb),zb=ja.getLabel(ja.VIEW_PREVIOUS,kb,eb.feedback.isqanda,pb);if(cb>0){var ac=Math.max(cb-eb.pageSize,0);lb=cb+db-ac;var bc;if(!kb||ib>1){var cc=q.formatIntegerWithDelimiter(ib,jb),dc=q.formatIntegerWithDelimiter(hb,jb);bc=wa._("{countshown} of {totalcount}",[wa.param('countshown',cc),wa.param('totalcount',dc)]);}var ec;if(this._hasCommentOrderInverted()&&!kb){ec=this.onPage.bind(this,bb,ya.BOTTOM,{offset:ac,length:lb});mb.bottomPager=s.createElement(ia,{key:'bottomPager'+bb,ref:!kb?'topLevelBottomPager':null,contextArgs:eb.contextArgs,isLoading:nb,isReply:kb,pagerLabel:yb,onPagerClick:ec,countSentence:bc});}else{ec=this.onPage.bind(this,bb,ya.TOP,{offset:ac,length:lb});mb.topPager=s.createElement(ia,{key:'topPager'+bb,contextArgs:eb.contextArgs,isLoading:nb,isReply:kb,pagerLabel:zb,onPagerClick:ec,countSentence:bc});}}if(cb+db<gb){lb=Math.min(db+eb.pageSize,gb-cb);var fc;if(this._hasCommentOrderInverted()&&!kb){fc=this.onPage.bind(this,bb,ya.TOP,{offset:cb,length:lb});mb.topPager=s.createElement(ia,{key:'topPager'+bb,contextArgs:eb.contextArgs,isLoading:ob,isReply:kb,pagerLabel:zb,onPagerClick:fc});}else{fc=this.onPage.bind(this,bb,ya.BOTTOM,{offset:cb,length:lb});mb.bottomPager=s.createElement(ia,{key:'bottomPager',ref:!kb?'topLevelBottomPager':null,contextArgs:eb.contextArgs,isLoading:ob,isReply:kb,pagerLabel:yb,onPagerClick:fc});}}return mb;},loadMoreComments:function(){if(this.isMounted()&&this.refs.topLevelBottomPager&&!(this.props.id in this.props.isActiveLoading)){var bb=t.findDOMNode(this.refs.topLevelBottomPager),cb=sa(window).y,db=cb+document.documentElement.clientHeight+da.infiniteScrollRangeForQANDAPermalinks;if(bb.offsetHeight&&bb.offsetTop<db)this.refs.topLevelBottomPager.props.onPagerClick();}},onCommentReply:function(bb){var cb=bb.parentcommentid||bb.id,db=null;if(this.props.feedback.isthreaded&&bb.cancomment){if(!this.props.repliesExpandedMap[cb]){this.onToggleReplies(bb.id);}else if(this.refs['replycomposer-'+cb])this.refs['replycomposer-'+cb].focus();db=this.state.repliesMap;db[cb]=null;this.setState({repliesMap:db});}else if(bb.parentcommentid){if(!this.props.repliesExpandedMap[cb]){this.onToggleReplies(cb);}else if(this.refs['replycomposer-'+cb])this.refs['replycomposer-'+cb].focus();db=this.state.repliesMap;db[cb]=bb.id;var eb=this.props.authorProfiles[bb.author].type,fb=new w({uniqueID:bb.author,title:this.props.authorProfiles[bb.author].name,type:eb==='friend'?'user':eb});if(this.refs['replycomposer-'+cb]){this.refs['replycomposer-'+cb].insertMention(fb);this.setState({repliesMap:db});}else this.setState({entry:fb,repliesMap:db});}},onComment:function(){var bb=null;if(this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();bb=t.findDOMNode(this.refs.toplevelcomposer);}else{var cb=r.byTag(t.findDOMNode(this),'form');bb=l.scry(cb,'[name="add_comment_text_text"]').concat(l.scry(cb,'[name="add_comment_text"]')).find(function(db){return !r.byClass(db,'UFIReplyList');});bb&&bb.focus();}bb&&h.inform('comment/focus',{element:bb});},_beforePostInlineShare:function(){ga.updateStateField(this.props.instanceid,'inlineShare','status',{type:'posting'});},_onInlineShareSuccess:function(bb){var cb=bb.payload.message||x.success;this._resetInlineShare({message:cb,isError:false});},_onInlineShareError:function(bb){var cb=bb.errorDescription||x.error;this._resetInlineShare({message:cb,isError:true});},_resetInlineShare:function(bb){ga.updateState(this.props.instanceid,'inlineShare',bb||{});},_hasCommentOrderInverted:function(){return ca.inverted(this.props.orderingMode);}});f.exports=ab;},null);
__d('FluxStore',['EventEmitter','invariant'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();'use strict';function j(k){this.__className=this.constructor.name;this.__changed=false;this.__changeEvent='change';this.__dispatcher=k;this.__emitter=new h();this.$FluxStore1=k.register((function(l){this.__invokeOnDispatch(l);}).bind(this));}j.prototype.addListener=function(k){return this.__emitter.addListener(this.__changeEvent,k);};j.prototype.getDispatcher=function(){return this.__dispatcher;};j.prototype.getDispatchToken=function(){return this.$FluxStore1;};j.prototype.hasChanged=function(){!this.__dispatcher.isDispatching()?i(0):undefined;return this.__changed;};j.prototype.__emitChange=function(){!this.__dispatcher.isDispatching()?i(0):undefined;this.__changed=true;};j.prototype.__invokeOnDispatch=function(k){this.__changed=false;this.__onDispatch(k);if(this.__changed)this.__emitter.emit(this.__changeEvent);};j.prototype.__onDispatch=function(k){i(0);};f.exports=j;},null);
__d('UFICallbackStore',['FluxStore'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';i=babelHelpers.inherits(k,h);j=i&&i.prototype;k.prototype.__onDispatch=function(l){var m=l.type,n=babelHelpers.objectWithoutProperties(l,['type']);this.__emitter.emit(m,n);};k.prototype.on=function(l,m){return this.__emitter.addListener(l,m);};k.prototype.remove=function(){this.__emitter.removeAllListeners();};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('UFIDispatcherContext.react',['React','UFIDispatcher'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();'use strict';var j=h.PropTypes,k=h.createClass({displayName:'UFIDispatcherContext',propTypes:{dispatcher:j.instanceOf(i).isRequired,stores:j.object.isRequired},childContextTypes:{dispatch:j.func,stores:j.object},getChildContext:function(){return {dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores};},render:function(){return this.props.children;}});f.exports=k;},null);
__d('UFIFeaturedReplyCommentList',['UFIReplyCommentList'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';i=babelHelpers.inherits(k,h);j=i&&i.prototype;k.getCommentList=function(l,m){};function k(l,m,n,o){j.constructor.call(this,l,m);var p=0,q=n.length;this.updateCommentCount(q);this.addCommentIDs(p,q,n);var r={};o.forEach(function(s){r[s.id]=s;});n.forEach((function(s){this.addOrUpdateComment(r[s]);}).bind(this));}k.prototype.fetchComments=function(l,m,n){};f.exports=k;},null);
__d('UFIFeaturedToplevelCommentList',['UFIConstants','UFIToplevelCommentList'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,i);k=j&&j.prototype;l.getCommentList=function(m,n){};l.getCommentListsForFeedbackTargetID=function(m){};l.getCommentListForFeedbackTargetID_UNSAFE=function(m){};l.resetCommentListsForFeedbackTargetID=function(m){};function l(m,n,o){k.constructor.call(this,m,h.UFICommentOrderingMode.FEATURED);var p=0,q=n.length;this.updateCommentCount(q);this.addCommentIDs(p,q,n);var r={};o.forEach(function(s){r[s.id]=s;});n.forEach((function(s){this.addOrUpdateComment(r[s]);}).bind(this));}l.prototype.fetchComments=function(m,n,o){};f.exports=l;},null);
__d("XLiveStreamingCommentsAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/livecomments\/",{eft_id:{type:"String",required:true},comment_cursor:{type:"String"},comment_fbid:{type:"String"}});},null,{});
__d("clearInterval",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=b.clearInterval.bind(b);},null);
__d('setInterval',['TimerStorage','setIntervalAcrossTransitions'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();f.exports=function(){for(var j=arguments.length,k=Array(j),l=0;l<j;l++)k[l]=arguments[l];var m=i.apply(b,k);h.push(h.INTERVAL,m);return m;};},null);
__d('UFILiveStreamingComments',['AsyncRequest','Map','Set','UFICentralUpdates','UFIConstants','XLiveStreamingCommentsAsyncController','clearInterval','setInterval'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();'use strict';var p=new i();function q(s,t){this.eftID=s;this.firstRequestCommentID=t;this.nextCursor=null;this.localCommentBodies=new j();this.errorCount=0;this.interval=o((function(){new h().setURI(this.getNextURI()).setHandler((function(u){switch(u.payload.status){case 'streaming':this.handleComments(u.payload);this.errorCount=0;return;case 'not-streaming':n(this.interval);return;case 'error':this.errorCount+=1;if(this.errorCount===5){n(this.interval);return;}break;}}).bind(this)).send();}).bind(this),2000);k.subscribe('update-comments',(function(u,v){if(v.comments&&v.comments.length)v.comments.forEach((function(w){if(w.parentcommentid)return;if(w.islocal)this.trackLocalComment(w);}).bind(this));}).bind(this));}q.prototype.handleComments=function(s){if(!s.cursors||!s.ufipayload)return;this.nextCursor=s.cursors[0];var t=s.ufipayload.comments[0];if(this.resemblesLocalComment(t))return;k.handleUpdate(l.UFIPayloadSourceType.LIVE_SEND,s.ufipayload);};q.prototype.getNextURI=function(){var s=m.getURIBuilder().setString('eft_id',this.eftID);if(this.nextCursor!==null){s.setString('comment_cursor',this.nextCursor);}else if(this.firstRequestCommentId!==null)s.setString('comment_fbid',this.firstRequestCommentID);return s.getURI();};q.prototype.trackLocalComment=function(s){var t=q.hashCommentData(s);this.localCommentBodies.add(t);};q.prototype.resemblesLocalComment=function(s){var t=q.hashCommentData(s);return this.localCommentBodies.has(t);};q.hashCommentData=function(s){var t=s.author+s.body.text;if(s.attachment)t+=':'+s.attachment.fbid;return t;};var r={start:function(s,t){if(p.get(s))return;p.set(s,new q(s,t));}};f.exports=r;},null);
__d('UFIRange',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();'use strict';function h(i,j){this.offset=i||0;this.length=j||0;this.requestedOffset=this.offset;this.requestedLength=this.length;}h.prototype.getOffset=function(){return this.offset;};h.prototype.getLength=function(){return this.length;};h.prototype.updateRange=function(i,j){this.offset=i;this.length=j;if(this.requestedLength>0){var k=Math.min(this.offset,this.requestedOffset),l=Math.max(this.offset+this.length,this.requestedOffset+this.requestedLength);this.requestedOffset=k;this.requestedLength=l-k;}else{this.requestedOffset=this.offset;this.requestedLength=this.length;}};h.prototype.getRequestedOffset=function(){return this.requestedOffset;};h.prototype.getRequestedLength=function(){return this.requestedLength;};h.prototype.updateRequestedRange=function(i,j){this.requestedOffset=i;this.requestedLength=j;};f.exports=h;},null);
__d('UFIRetryActions',['JSLogger','UFICentralUpdates','UFIConstants','UFIUserActions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.create('UFIRetryActions');function m(p,q){var r={actiontype:j.UFIActionType.DELETE_COMMENT,commentid:p.id};i.handleUpdate(j.UFIPayloadSourceType.USER_ACTION,{actions:[r]});var s=p.body.text,t=p.body.mentionstext;q.replyid=p.parentcommentid;q.attachedphoto=p.body.mentionsphoto;k.addComment(p.ftentidentifier,s,t,q);}function n(p,q){var r=p.body.text,s=p.body.mentionstext;q.attachedPhoto=p.body.mentionsphoto;q.attachedSticker=p.attachment;k.editComment(p.id,r,s,q);}var o={retrySubmit:function(p,q){switch(p.status){case j.UFIStatus.FAILED_ADD:m(p,q);break;case j.UFIStatus.FAILED_EDIT:n(p,q);break;default:l.error('retrysubmitstatus',{status:p.status});break;}}};f.exports=o;},null);
__d('UFISubscriptionUpdates',['BanzaiLogger','BanzaiODS','UFICentralUpdates','UFIConstants','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();i.setEntitySample('feedback',.0001);function m(o){h.log('LiveWWWFeedbackLoggerConfig',{mechanism:'graphql_subscriptions',event:'receive_payload',update_type:o});}var n={handleLiveLike:function(o,p){i.bumpEntityKey('feedback','gql_like_received');m('like');var q=p.feedback_like_subscribe.feedback,r=p.feedback_like_subscribe.liker;if(!q||!r)return;j.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:k.UFIActionType.LIKE_ACTION,actorid:r.id,clientid:p.feedback_like_subscribe.client_mutation_id,entidentifier:o,likesentences:{current:q.does_viewer_like?q.viewer_likes_sentence:q.viewer_does_not_like_sentence,alternate:q.does_viewer_like?q.viewer_does_not_like_sentence:q.viewer_likes_sentence},hasviewerliked:q.does_viewer_like,likecount:q.likers.count}]});},handleLiveComment:function(o,p){i.bumpEntityKey('feedback','gql_comment_received');m('comment');var q=p.comment_create_subscribe.comment;if(!q)return;var r=babelHelpers._extends({author:q.author.id,body:q.body,cancomment:q.feedback.can_viewer_comment,canedit:q.can_viewer_edit,canremove:q.can_viewer_delete,clientid:p.comment_create_subscribe.client_mutation_id,ftentidentifier:o,id:q.legacy_token,fbid:q.legacy_fbid,legacyid:q.legacy_fbid,timestamp:{time:q.created_time,text:l._("a few seconds ago")},hasviewerliked:q.feedback.does_viewer_like,isfeatured:q.is_featured,istranslatable:q.translation_available_for_viewer,likecount:q.feedback.likers.count,viewercanlike:q.feedback.can_viewer_like},{});if(q.attachments.length){var s=q.attachments[0],t=s.style_list;if(t&&t.length&&t[0]=='sticker'){var u=s.target;r.attachment={metadata:{source_uri:u.img.uri,source_uri_2x:u.img_2x.uri,width:u.img.width,height:u.img.height,frameCount:u.frame_count,frameRate:u.frame_rate,framesPerCol:u.frames_per_column,framesPerRow:u.frames_per_row,sprite_uri:u.sprite_img&&u.sprite_img.uri,sprite_uri_2x:u.sprite_img_2x&&u.sprite_img_2x.uri},type:'sticker'};}else if(t&&t.length&&t[0]=='photo'){var v=s.target;r.attachment={metadata:{preview_uri:v.photo_img&&v.photo_img.uri,width:v.photo_img.width,height:v.photo_img.height,url:v.url},type:'photo'};}else if(t&&t.length&&t[0]=='share'){s.type='live_share';r.attachment=s;}}j.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,{comments:[r]});}};f.exports=n;},null);
__d('onEnclosingPageletDestroy',['Arbiter','DOMQuery'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l){var m=h.subscribe('pagelet/destroy',function(n,o){if(i.contains(o.root,k)){m.unsubscribe();l();}});return m;}f.exports=j;},null);
__d('UFIController',['Arbiter','Bootloader','CommentPrelude','DOM','LayerRemoveOnHide','LiveTimer','PageAdminSignatureSettings','Parent','React','ReactDOM','ReactMount','Run','ScrollSuppressor','ShortProfiles','SubscriptionsHandler','StaticUFI.react','UFIActionLinkController','UFIActionTypes','UFICallbackStore','UFICentralUpdates','UFICollapse','UFIDispatcher','UFIDispatcherContext.react','UFIFeaturedReplyCommentList','UFIFeaturedToplevelCommentList','UFICommentTemplates','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIInstanceState','UFILiveStreamingComments','UFIRange','UFIReplyCommentList','UFIRetryActions','UFIStoryAction','UFISubscriptionUpdates','UFIToplevelCommentList','UFIUserActions','URI','emptyFunction','forEachObject','isEmpty','onEnclosingPageletDestroy','fbt','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za){if(c.__markCompiled)c.__markCompiled();'use strict';var ab=ia.UFIPayloadSourceType,bb=ia.UFIPaging,cb=function(gb,hb,ib,jb,kb){var lb=gb+hb===ib;return {offset:gb,length:lb&&db(kb)?jb-gb:hb};},db=function(gb){return gb==ab.USER_ACTION||gb==ab.LIVE_SEND;},eb=function(gb,hb){for(var ib=0;ib<hb.length;ib++){var jb=hb[ib];if(jb.author)gb.push(jb.author);if(jb.socialcontext)gb.push(jb.socialcontext.topmutualid);if(jb.replyauthors&&jb.replyauthors.length)for(var kb=0;kb<jb.replyauthors.length;kb++)gb.push(jb.replyauthors[kb]);}};fb.preload=function(){};fb.prototype.$UFIController1=function(gb,hb){if(!this.$UFIController2||hb!==ab.INITIAL_SERVER)return;this.$UFIController2.startRecording(gb);};fb.prototype.$UFIController3=function(gb,hb){if(!this.$UFIController2||hb!==ab.INITIAL_SERVER)return;this.$UFIController2.log(gb,hb,{num_comments:this.comments&&this.comments.length||0,num_likes:this.feedback&&this.feedback.likecount||0,features:{is_featured:!!this.featuredToplevelCommentList,is_streaming:this.$UFIController4()&&this.$UFIController5.isstreaming,is_lazy_fetch:this.$UFIController5.lazyFetch,is_disable_css_hiding:this.$UFIController5.disableCSSHiding}});};function fb(gb,hb,ib){this.id=hb.ftentidentifier;this.$UFIController2=hb.perfLogger?new hb.perfLogger(this.id):null;this.$UFIController1('construct',ab.INITIAL_SERVER);this.$UFIController6();this.root=gb;this.source=hb.source;this.$UFIController7=hb.instanceid;this.$UFIController8={showLoadingUFI:false,repliesExpandedMap:null,isActiveLoading:{}};this.$UFIController9=false;this.featuredToplevelCommentList=null;this.featuredReplyCommentLists={};this.$UFIController5=hb;this.$UFIController5.rootid=this.root.id;this.$UFIController10=this.$UFIController5.feedbackMode!=='expanded';this.$UFIController11={};this.$UFIController12={};var jb=ib.feedbacktargets[0];new x(gb,this.$UFIController5,jb,this.$UFIController7);if(jb.ll||jb.lc)i.loadModules(["UFILikeSubscription","UFICommentSubscription"],(function(pb,qb){if(jb.ll)this.liveLikeSubscription=pb.subscribe(this.id,(function(rb){qa.handleLiveLike(this.id,rb);}).bind(this));if(jb.lc)this.liveCommentSubscription=qb.subscribe(this.id,(function(rb){qa.handleLiveComment(this.id,rb);}).bind(this));}).bind(this));this.$UFIController5.pagesAdminSignatureSettings=new n(this.$UFIController5.initAdminSignatureContext,jb.actorforpost);this.orderingMode=jb.defaultcommentorderingmode;var kb=null;if(ib.featuredcommentlists&&ib.featuredcommentlists.comments&&ib.featuredcommentlists.comments[this.id]){kb=ib.featuredcommentlists.comments[this.id];this.featuredToplevelCommentList=new fa(this.id,kb.values,ib.comments);}else kb=ib.commentlists.comments[this.id][this.orderingMode];this.ranges={};this.replyRanges={};this.repliesMap={};this.shortenTimestamp=hb.shortenTimestamp;this.commentcounts={};this.commentcounts[this.id]=this.getToplevelCommentList().getCommentCount();this.ranges[this.orderingMode]=new ma(kb.range.offset,kb.range.length);var lb,mb,nb;if(ib.commentlists.replies)for(lb=0;lb<kb.values.length;lb++){mb=kb.values[lb];nb=ib.commentlists.replies[mb];if(nb){this.commentcounts[mb]=this.getReplyCommentList(mb).getCommentCount();this.getReplyRange(mb).updateRange(nb.range.offset,nb.range.length);}}if(ib.featuredcommentlists)if(ib.featuredcommentlists.replies)for(lb=0;lb<kb.values.length;lb++){mb=kb.values[lb];nb=ib.featuredcommentlists.replies[mb];if(nb){this.featuredReplyCommentLists[mb]=new ea(this.id,mb,nb.values,ib.comments);this.commentcounts[mb]=this.getReplyCommentList(mb).getCommentCount();this.getReplyRange(mb).updateRange(nb.range.offset,nb.range.length);}}this.$UFIController13=null;this.$UFIController14=null;this.ufiCentralUpdatesSubscriptions=[aa.subscribe('feedback-updated',(function(pb,qb){var rb=qb.updates,sb=qb.payloadSource;if(sb!=ab.COLLAPSED_UFI&&this.id in rb)this.fetchAndUpdate(this.render.bind(this),sb,false);}).bind(this)),aa.subscribe('feedback-id-changed',(function(pb,qb){var rb=qb.updates;if(this.id in rb)this.id=rb[this.id];}).bind(this)),aa.subscribe('instance-updated',(function(pb,qb){var rb=qb.updates;if(this.$UFIController7 in rb){var sb=rb[this.$UFIController7];if(sb.editcommentid||sb.inlineShare)this.render(qb.payloadSource);}}).bind(this)),aa.subscribe('actor-changed',(function(pb,qb){this.$UFIController15();}).bind(this))];this.clearPageletSubscription=xa(this.root,this.$UFIController16.bind(this));this.clearPageSubscription=h.subscribe('ufi/page_cleared',this.$UFIController17.bind(this));s.onUnload(this.$UFIController18.bind(this));aa.handleUpdate(ab.INITIAL_SERVER,ib);if(this.$UFIController5.viewas)this.viewasUFICleanSubscription=h.subscribe('pre_page_transition',(function(pb,qb){if(this.$UFIController5.viewas!==new ta(qb.to).getQueryData('viewas'))ra.resetCommentListsForFeedbackTargetID(this.id);}).bind(this));this.collapseSubscription=ba.subscribe(this.$UFIController7,(function(pb){switch(pb.action){case 'show':this.$UFIController10=false;break;case 'hide':this.$UFIController10=true;break;case 'toggle':this.$UFIController10=!this.$UFIController10;break;default:throw new Error('Invalid collapse action');}this.render(ab.COLLAPSE_ACTION);}).bind(this));i.loadModules(["ScrollAwareDOM"],function(pb){r.scrollMonitor=pb.monitor;});if(this.$UFIController4()&&this.$UFIController5.isstreaming){var ob=null;if(this.comments&&this.comments.length>0)ob=this.comments[0].fbid;la.start(this.id,ob);}this.$UFIController3('construct',ab.INITIAL_SERVER);}fb.prototype.$UFIController6=function(){if(!this.$UFIController19){this.$UFIController20=new ca();this.$UFIController21={UFICallbackStore:new z(this.$UFIController20)};this.$UFIController19=new v();this.$UFIController19.addSubscriptions(this.$UFIController21.UFICallbackStore.on(y.ADD_COMMENT.CANCEL,(function(){return this.$UFIController15();}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.COMMENT.TOGGLE_LIKE,(function(gb){return sa.changeCommentLike(gb.comment.id,gb.like,{source:this.source,target:gb.target});}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.COMMENT.REMOVE,(function(gb){return this.$UFIController22(gb.comment,gb.target,gb.onConfirm);}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.COMMENT.EDIT,(function(gb){return this.$UFIController23(gb.comment);}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.COMMENT.TRANSLATE,(function(gb){return sa.translateComment(gb.comment,{source:this.source,target:gb.target});}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.COMMENT.TOGGLE_MARK_AS_SPAM,(function(gb){return sa.setHideAsSpam(gb.comment.id,gb.is_spam,{source:this.source,target:gb.target});}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.COMMENT.TOGGLE_INLINE_BAN,(function(gb){return sa.banUser(gb.comment,gb.ownerid,gb.is_banned,{source:this.source,target:gb.target});}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.STORY.TOGGLE_LIKE,(function(gb){return sa.changeReaction(this.id,this.feedback.hasviewerliked?0:ia.LikeReaction,{source:this.source,target:gb.target,rootid:this.$UFIController5.rootid});}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.ADD_COMMENT.SUBMIT_EDIT,(function(gb){return this.$UFIController24(gb.comment,gb.commentData,gb.target);}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.COMMENT.REMOVE_PREVIEW,(function(gb){return sa.removePreview(gb.comment,{source:this.source,target:gb.target});}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.STORY.SPAM_FETCHED,(function(gb){return sa.fetchSpamComments(this.id,gb.commentIDs,gb.parentCommentID,this.$UFIController5.viewas);}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.ADD_COMMENT.RETRY_SUBMIT,(function(gb){return oa.retrySubmit(gb.comment,{source:this.source});}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.STORY.CHANGE_ORDER_MODE,(function(gb){this.orderingMode=gb.mode;this.$UFIController8.showLoadingUFI=true;this.render(ab.USER_ACTION);this.fetchAndUpdate(this.render.bind(this),ab.USER_ACTION,false);}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.STORY.PAGE_IN_COMMENTS,(function(gb){var hb=gb.targetID,ib=hb!==this.id;this.$UFIController8.isActiveLoading[hb]=gb.direction;if(ib)this.$UFIController8.repliesExpandedMap[hb]=true;this.$UFIController25(hb,gb.nextRange);this.$UFIController26();this.render(ab.USER_ACTION);}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.STORY.HIDE_REPLIES,(function(gb){delete this.$UFIController8.isActiveLoading[gb.targetID];this.$UFIController8.repliesExpandedMap[gb.targetID]=false;this.render(ab.USER_ACTION);}).bind(this)),this.$UFIController21.UFICallbackStore.on(y.STORY.COMMENTS_ARRIVED,(function(gb){this.$UFIController8.isActiveLoading={};this.$UFIController27(gb.newOffset,gb.newLength,gb.oldOffset,gb.oldLength);}).bind(this)));}};fb.prototype.getStores=function(){return this.$UFIController21;};fb.prototype.$UFIController4=function(){if(this.$UFIController5.feedcarded)return ha.enableStreamingCommentsInFeed;return true;};fb.prototype.$UFIController28=function(){if(!this.$UFIController29)this.$UFIController29=o.byTag(this.root,'form');return this.$UFIController29;};fb.prototype.$UFIController23=function(gb){ka.updateState(this.$UFIController7,'isediting',true);ka.updateState(this.$UFIController7,'editcommentid',gb.id);};fb.prototype.$UFIController24=function(gb,hb,ib){if(!hb.visibleValue&&!hb.attachedPhoto&&!hb.attachedSticker){this.$UFIController22(gb,ib,ua);}else sa.editComment(gb.id,hb.visibleValue,hb.encodedValue,{source:this.$UFIController5.source,target:ib,attachedPhoto:hb.attachedPhoto,attachedSticker:hb.attachedSticker});ka.updateStateField(this.$UFIController7,'locallycomposed',gb.id,true);this.$UFIController15();};fb.prototype.$UFIController15=function(){ka.updateState(this.$UFIController7,'isediting',false);ka.updateState(this.$UFIController7,'editcommentid',null);};fb.prototype.$UFIController22=function(gb,hb,ib){var jb=ga[':fb:ufi:hide-dialog-template'].build();k.setContent(jb.getNode('body'),ya._("Are you sure you want to delete this comment?"));k.setContent(jb.getNode('title'),ya._("Delete Comment"));i.loadModules(["DialogX"],(function(kb){var lb=new kb({modal:true,width:465,addedBehaviors:[l]},jb.getRoot());lb.subscribe('confirm',(function(){sa.removeComment(gb.id,{source:this.source,oneclick:false,target:hb});ib();lb.hide();}).bind(this));lb.show();}).bind(this));};fb.prototype.$UFIController30=function(){this.$UFIController10=false;j.expand(this.root,false,'ufi_controller');};fb.prototype.$UFIController31=function(){var gb=this.getToplevelCommentList().count,hb=Math.min(gb,this.$UFIController5.numLazyComments);va(this.ranges,function(ib){return ib.updateRequestedRange(gb-hb,hb);});this.$UFIController9=true;this.fetchAndUpdate(this.render.bind(this),ab.USER_ACTION,false);};fb.prototype.setRange=function(gb){this.getRange().updateRange(gb.offset,gb.length);};fb.prototype.setReplyRange=function(gb,hb){this.getReplyRange(gb).updateRange(hb.offset,hb.length);};fb.prototype.render=function(gb){this.$UFIController1('render',gb);if(this.$UFIController8.showLoadingUFI){q.render(this.$UFIController32(),this.root);this.$UFIController3('render',gb);return;}var hb=ka.getKeyForInstance(this.$UFIController7,'inlineShare')||{},ib=this.comments.length||!wa(this.feedback.likesentences.current);if((ib&&db(gb)||hb.toggling)&&this.$UFIController5.feedbackMode!=='never')this.$UFIController30();if(this.$UFIController5.disableCSSHiding&&this.$UFIController10){this.$UFIController3('render',gb);q.unmountComponentAtNode(this.root);return;}if(this.$UFIController5.lazyFetch&&!this.$UFIController9&&!hb.active){q.render(this.$UFIController32(),this.root);this.$UFIController3('render',gb);this.$UFIController31();return;}var jb=this.getRange();if(this.$UFIController13===null)this.$UFIController13=jb.getOffset()+jb.getLength()-1;var kb=this.feedback.replysocialsentencemaxreplies||-1,lb={};lb[this.id]=this.getToplevelCommentList().getDeletedCount();var mb={},nb={},ob={};nb[this.id]=!this.featuredToplevelCommentList;this.comments.forEach((function(vb){var wb=vb.id;lb[wb]=this.getReplyCommentList(wb).getDeletedCount();mb[wb]=this.getToplevelCommentList().getPermalinkForComment(wb);nb[wb]=!this.featuredReplyCommentLists[wb];if(this.repliesMap[wb]){var xb=this.repliesMap[wb].length;ob[wb]=wb===this.feedback.permalinkcommentid||xb>1||xb>0&&vb.interestingReplyOffset===undefined||vb.author===this.feedback.viewerid&&this.getReplyCommentList(wb).getCommentCount()==1;this.repliesMap[wb].forEach((function(yb){var zb=yb.id;mb[zb]=na.getCommentList(this.id,wb).getPermalinkForComment(zb);}).bind(this));}}).bind(this));var pb={};pb[this.id]=new ma(jb.offset,jb.length);for(var qb in this.replyRanges)pb[qb]=new ma(this.replyRanges[qb].offset,this.replyRanges[qb].length);if(!this.$UFIController8.repliesExpandedMap)this.$UFIController8.repliesExpandedMap=ob;var rb=!!this.featuredToplevelCommentList,sb=this.getToplevelCommentList().getForceNotPageable(),tb=this.$UFIController5.mayLogVPVs&&this.orderingMode===ia.UFICommentOrderingMode.FILTERED,ub=p.createElement(da,{dispatcher:this.$UFIController20,stores:this.$UFIController21},p.createElement(w,{feedback:this.feedback,id:this.id,contextArgs:this.$UFIController5,repliesMap:this.repliesMap,shortenTimestamp:this.shortenTimestamp,commentCounts:this.commentcounts,deletedCounts:lb,availableComments:this.comments,source:this.source,ranges:pb,pageSize:this.$UFIController5.pagesize,authorProfiles:this.authorProfiles,instanceid:this.$UFIController7,loggingOffset:this.$UFIController13,replySocialSentenceMaxReplies:kb,orderingMode:this.orderingMode,hideOrderingModeSelector:rb,commentPermalinks:mb,canAddCommentMap:nb,isInitialRender:gb===ab.INITIAL_SERVER,inlineShare:hb,isActiveLoading:this.$UFIController8.isActiveLoading,repliesExpandedMap:this.$UFIController8.repliesExpandedMap,commentIDToFocusOnMount:this.$UFIController8.commentIDToFocusOnMount,hideToplevelPager:sb,isStreaming:this.$UFIController5.isstreaming,shouldLogVPVs:tb}));q.render(ub,this.root);m.updateTimeStamps();if(this.$UFIController28())h.inform('ufi/changed',{form:this.$UFIController28()});if(gb!=ab.INITIAL_SERVER&&gb!=ab.COLLAPSED_UFI)h.inform('reflow');this.$UFIController3('render',gb);};fb.prototype.$UFIController27=function(gb,hb,ib,jb){if(ib!=gb||jb!=hb){var kb=gb<ib?jb:0;if(kb<hb)this.$UFIController8.commentIDToFocusOnMount=this.comments[kb].id;}};fb.prototype.$UFIController26=function(){var gb=this.$UFIController8.isActiveLoading;t.start();Object.keys(gb).filter(function(hb){return gb[hb]!==bb.TOP;}).forEach(function(hb){return t.increment();});};fb.prototype.deferredCallback=function(gb,hb,ib,jb){gb.callbackCount++;if(gb.callbackCount<gb.expectedCallbackCount)return;u.getMulti(hb,(function(kb){this.authorProfiles=kb;jb(ib);if(ib==ab.ENDPOINT_COMMENT_FETCH)h.inform('CommentUFI.Pager');}).bind(this));};fb.prototype.fetchAndUpdate=function(gb,hb,ib){var jb={offset:this.getRange().getOffset(),length:this.comments&&this.comments.length||0};ja.getFeedbackTarget(this.id,(function(kb){this.feedback=kb;var lb=this.getToplevelCommentList().getCommentCount(),mb=this.getRange(),nb=null;if(this.$UFIController5.isstreaming){var ob=this.$UFIController5.feedcarded?4:300;nb={offset:Math.max(0,lb-ob),length:Math.min(ob,lb)};}else nb=cb(mb.getRequestedOffset(),mb.getRequestedLength(),this.commentcounts[this.id],lb,hb);var pb=[];if(this.feedback.reactorids)pb=pb.concat(this.feedback.reactorids);if(this.feedback.actorforpost)pb.push(this.feedback.actorforpost);var qb={expectedCallbackCount:0,callbackCount:0},rb=nb.offset,sb=nb.length,tb=this.$UFIController11[this.orderingMode]||0,ub={numPagerClicks:ib?tb:null,viewAs:this.$UFIController5.viewas,feedContext:this.$UFIController5.feedcontext};this.getToplevelCommentList().getComments(rb,sb,ub,(function(vb,wb,xb){this.commentcounts[this.id]=wb;this.setRange(vb);this.comments=[];for(var yb in xb)this.comments.push(xb[yb]);eb(pb,this.comments);if(this.feedback.isthreaded&&this.comments.length){qb.expectedCallbackCount=this.comments.length;}else qb.expectedCallbackCount=1;for(var zb in xb){var ac=xb[zb],bc=ac.id;if(this.feedback.isthreaded){var cc=this.getReplyCommentList(bc).getCommentCount(),dc;if(this.replyRanges[bc]){var ec=this.getReplyRange(bc);dc=cb(ec.getRequestedOffset(),ec.getRequestedLength(),this.commentcounts[bc],cc,hb);}else if(ac.interestingReplyOffset!==undefined){dc={offset:ac.interestingReplyOffset,length:1};}else{var fc=this.feedback.isranked?0:Math.min(cc,2);dc={offset:0,length:fc};}var gc=dc.offset,hc=dc.length,ic=this.$UFIController12[bc]||0,jc={numPagerClicks:ib?ic:null,viewAs:this.$UFIController5.viewas,feedContext:this.$UFIController5.feedcontext};this.getReplyCommentList(bc).getComments(gc,hc,jc,(function(kc,lc,mc,nc){this.commentcounts[kc]=mc;this.setReplyRange(kc,lc);this.repliesMap[kc]=[];for(var oc in nc)this.repliesMap[kc].push(nc[oc]);eb(pb,this.repliesMap[kc]);this.$UFIController8.showLoadingUFI=false;this.deferredCallback(qb,pb,hb,(function(pc){za((function(){return this.$UFIController20.dispatch(pa.commentsArrived(this.getRange().getOffset(),this.comments.length,jb.offset,jb.length));}).bind(this));gb(pc);}).bind(this));}).bind(this,bc,dc,cc));}}if(!this.feedback.isthreaded||!this.comments.length){this.$UFIController8.showLoadingUFI=false;this.deferredCallback(qb,pb,hb,(function(kc){za((function(){return this.$UFIController20.dispatch(pa.commentsArrived(this.getRange().getOffset(),this.comments.length,jb.offset,jb.length));}).bind(this));gb(kc);}).bind(this));}}).bind(this,nb,lb));}).bind(this));};fb.prototype.getToplevelCommentList=function(){if(this.featuredToplevelCommentList)return this.featuredToplevelCommentList;return ra.getCommentList(this.id,this.orderingMode);};fb.prototype.getReplyCommentList=function(gb){if(gb in this.featuredReplyCommentLists)return this.featuredReplyCommentLists[gb];return na.getCommentList(this.id,gb);};fb.prototype.getRange=function(){if(!(this.orderingMode in this.ranges)){var gb=this.getToplevelCommentList().getCommentCount(),hb=Math.min(gb,this.$UFIController5.defaultNumCommentsToExpand);this.ranges[this.orderingMode]=new ma(gb-hb,hb);}return this.ranges[this.orderingMode];};fb.prototype.getReplyRange=function(gb){if(!(gb in this.replyRanges))this.replyRanges[gb]=new ma();return this.replyRanges[gb];};fb.prototype.$UFIController25=function(gb,hb){if(gb==this.id){var ib=this.$UFIController11[this.orderingMode]||0;this.$UFIController11[this.orderingMode]=ib+1;this.getRange().updateRequestedRange(hb.offset,hb.length);}else{var jb=this.$UFIController12[gb]||0;this.$UFIController12[gb]=jb+1;this.replyRanges[gb].updateRequestedRange(hb.offset,hb.length);}this.fetchAndUpdate(this.render.bind(this),ab.USER_ACTION,true);};fb.prototype.$UFIController16=function(){q.unmountComponentAtNode(this.root);this.ufiCentralUpdatesSubscriptions.forEach(aa.unsubscribe,aa);var gb=[this.viewasUFICleanSubscription,this.collapseSubscription,this.clearPageSubscription];gb.map(function(hb){return hb&&h.unsubscribe(hb);});this.$UFIController33();if(this.$UFIController19){this.$UFIController19.release();this.$UFIController19=null;}};fb.prototype.$UFIController17=function(){this.$UFIController16();h.unsubscribe(this.clearPageletSubscription);};fb.prototype.$UFIController18=function(){this.$UFIController33();};fb.prototype.$UFIController33=function(){var gb=[this.liveLikeSubscription,this.liveCommentSubscription];gb.map(function(hb){return hb&&hb.unsubscribe();});};fb.prototype.$UFIController32=function(){var gb=ka.getKeyForInstance(this.$UFIController7,'inlineShare');return (p.createElement(da,{dispatcher:this.$UFIController20,stores:this.$UFIController21},p.createElement(w,{feedback:this.feedback,id:this.id,contextArgs:this.$UFIController5,commentCounts:this.commentcounts,inlineShare:gb,loadingComments:true,isStreaming:this.$UFIController5.isstreaming})));};f.exports=fb;},null);
__d('UFIMentionsInputProxy.react',['Bootloader','React','cx','emptyFunction','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.createClass({displayName:'UFIMentionsInputProxy',getInitialState:function(){return {component:null};},componentDidMount:function(){this._cmdBuffer=this._cmdBuffer||[];if(this.props.initialData)this._bootload();},componentDidUpdate:function(){if(this.state.component)this._drainFnBuffer();},hasEnteredText:function(){return this._fillCmdBuffer({fn:'hasEnteredText',args:[]});},setSignature:function(n){this._fillCmdBuffer({fn:'setSignature',args:[n]});},focus:function(){this._bootload();this._fillCmdBuffer({fn:'focus',args:[]});},submitComment:function(event){this._fillCmdBuffer({fn:'submitComment',args:[event]});},insertMention:function(n){this._fillCmdBuffer({fn:'insertMention',args:[n]});},insertEmoticon:function(n){this._fillCmdBuffer({fn:'insertEmoticon',args:[n]});},_bootload:function(){h.loadModules(["UFIMentionsInput.react"],(function(n){return this.setState({component:n});}).bind(this));},_shouldDrainBuffer:function(){return this._cmdBuffer.length>0;},_fillCmdBuffer:function(n){if(this.refs.mentionsinputchild){return this._execCmd(n);}else this._cmdBuffer=this._cmdBuffer.concat([n]);},_drainFnBuffer:function(){if(this._shouldDrainBuffer()){var n=this._cmdBuffer[0];this._execCmd(n);this._cmdBuffer=this._cmdBuffer.slice(1);l(this._drainFnBuffer);}},_execCmd:function(n){var o=this.refs.mentionsinputchild;return o[n.fn].apply(o,n.args);},_renderProxyInput:function(){var n="_1osa mentionsHidden";return (i.createElement('input',{className:n,name:'add_comment_text',ref:'proxyInput',onFocus:this.focus,tabIndex:'-1'}));},_renderDummy:function(){var n="UFIAddCommentInput _1osb _1osc";return (i.createElement('div',{onFocus:this.focus,onClick:this.focus,onTouchStart:k,onMouseOver:this._bootload},i.createElement('div',{className:n},this._renderProxyInput(),this.props.placeholder)));},render:function(){var n=this.state.component;if(!n)return this._renderDummy();return (i.createElement(n,babelHelpers._extends({key:'mentionsinputchild',ref:'mentionsinputchild'},this.props),this.props.children));}});f.exports=m;},null);
__d('TypeaheadViewItem',['React','ReactDOM','SearchableEntry'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l={entry:k.instanceOf(j).isRequired,highlighted:k.bool,role:k.string,selected:k.bool,onSelect:k.func.isRequired,onHighlight:k.func,onRenderHighlight:k.func},m={_onSelect:function(n){this.props.onSelect(this.props.entry,n);},_onHighlight:function(n){if(this.props.onHighlight)this.props.onHighlight(this.props.entry,n);},getDefaultProps:function(){return {role:'option'};},shouldComponentUpdate:function(n){return (this.props.entry.getUniqueID()!==n.entry.getUniqueID()||this.props.highlighted!==n.highlighted||this.props.selected!==n.selected);},componentDidMount:function(){if(this.props.highlighted&&this.props.onRenderHighlight)this.props.onRenderHighlight(i.findDOMNode(this));},componentDidUpdate:function(){if(this.props.highlighted&&this.props.onRenderHighlight)this.props.onRenderHighlight(i.findDOMNode(this));}};f.exports={propTypes:l,Mixin:m};},null);
__d("cssURL",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return "url('"+i.replace(/(\\|\s|\(|\)|'|\")/g,'\\$1')+"')";}f.exports=h;},null);
__d('MentionsTypeaheadViewItem.react',['Badge.react','ImageBlock.react','React','TypeaheadViewItem','cssURL','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=j.createClass({displayName:'MentionsTypeaheadViewItem',mixins:[k.Mixin],propTypes:babelHelpers._extends({},k.propTypes,{ariaDescribedBy:n.string}),render:function(){var p=this.props.entry,q=p.getAuxiliaryData(),r=null;if(q)if(q.verified){r=j.createElement(h,{type:'verified',size:'xsmall'});}else if(q.workUser)r=j.createElement(h,{type:'work',size:'xsmall'});var s=p.getPhoto()?j.createElement('span',{className:"_5u93",style:{backgroundImage:l(p.getPhoto())}}):j.createElement('span',null),t=null;if(p.getSubtitle())t=j.createElement('div',{className:"_5u95"},p.getSubtitle());var u="_5u91"+(this.props.highlighted?' '+"_5u92":'');return (j.createElement('li',{role:'option',className:u,'aria-label':p.getTitle(),'aria-selected':this.props.highlighted,'aria-describedby':this.props.ariaDescribedBy,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight},j.createElement(i,{spacing:'medium'},s,j.createElement('div',null,j.createElement('div',{className:"_5u94"},p.getTitle(),r),t))));}});f.exports=o;},null);
__d('MentionsInputTypeaheadView.react',['MentionsTypeaheadViewItem.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=i.PropTypes,l=i.createClass({displayName:'MentionsInputTypeaheadView',propTypes:{id:k.string,highlightedEntry:k.object,entries:k.array.isRequired,onSelect:k.func.isRequired,onHighlight:k.func,onRenderHighlight:k.func},_renderItem:function(m){var n=m===this.props.highlightedEntry;return (i.createElement(h,{key:m.getUniqueID(),entry:m,highlighted:n,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},render:function(){var m="_5u8_"+(!this.props.entries.length?' '+"_5u90":'');return (i.createElement('ul',{className:m,role:'listbox',id:this.props.id},this.props.entries.map(this._renderItem)));}});f.exports=l;},null);
__d("str2rstr",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j="",k,l;for(var m=0;m<i.length;m++){k=i.charCodeAt(m);l=m+1<i.length?i.charCodeAt(m+1):0;if(55296<=k&&k<=56319&&56320<=l&&l<=57343){k=65536+((k&1023)<<10)+(l&1023);m++;}if(k<=127){j+=String.fromCharCode(k);}else if(k<=2047){j+=String.fromCharCode(192|k>>>6&31,128|k&63);}else if(k<=65535){j+=String.fromCharCode(224|k>>>12&15,128|k>>>6&63,128|k&63);}else if(k<=2097151)j+=String.fromCharCode(240|k>>>18&7,128|k>>>12&63,128|k>>>6&63,128|k&63);}return j;}f.exports=h;},null);
__d('TokenizeUtil',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=/[ ]+/g,i=/[^ ]+/g,j=new RegExp(k(),'g');function k(){return '[.,+*?$|#{}()\'\\^\\-\\[\\]\\\\\\/!@%"~=<>_:;'+'\u30fb\u3001\u3002\u3008-\u3011\u3014-\u301f\uff1a-\uff1f\uff01-\uff0f'+'\uff3b-\uff40\uff5b-\uff65\u2E2E\u061f\u066a-\u066c\u061b\u060c\u060d'+'\uFD3e\uFD3F\u1801\u0964\u104a\u104b\u2010-\u2027\u2030-\u205e'+'\u00a1-\u00b1\u00b4-\u00b8\u00ba\u00bb\u00bf]';}var l={},m={a:"\u0430 \u00e0 \u00e1 \u00e2 \u00e3 \u00e4 \u00e5 \u0101",b:"\u0431",c:"\u0446 \u00e7 \u010d",d:"\u0434 \u00f0 \u010f \u0111",e:"\u044d \u0435 \u00e8 \u00e9 \u00ea \u00eb \u011b \u0113",f:"\u0444",g:"\u0433 \u011f \u0123",h:"\u0445 \u0127",i:"\u0438 \u00ec \u00ed \u00ee \u00ef \u0131 \u012b",j:"\u0439",k:"\u043a \u0138 \u0137",l:"\u043b \u013e \u013a \u0140 \u0142 \u013c",m:"\u043c",n:"\u043d \u00f1 \u0148 \u0149 \u014b \u0146",o:"\u043e \u00f8 \u00f6 \u00f5 \u00f4 \u00f3 \u00f2",p:"\u043f",r:"\u0440 \u0159 \u0155",s:"\u0441 \u015f \u0161 \u017f",t:"\u0442 \u0165 \u0167 \u00fe",u:"\u0443 \u044e \u00fc \u00fb \u00fa \u00f9 \u016f \u016b",v:"\u0432",y:"\u044b \u00ff \u00fd",z:"\u0437 \u017e",ae:"\u00e6",oe:"\u0153",ts:"\u0446",ch:"\u0447",ij:"\u0133",sh:"\u0448",ss:"\u00df",ya:"\u044f"};for(var n in m){var o=m[n].split(' ');for(var p=0;p<o.length;p++)l[o[p]]=n;}var q={};function r(x){return x?x.replace(j,' '):'';}function s(x){x=x.toLowerCase();var y='',z='';for(var aa=x.length;aa--;){z=x.charAt(aa);y=(l[z]||z)+y;}return y.replace(h,' ');}function t(x){var y=[],z=i.exec(x);while(z){z=z[0];y.push(z);z=i.exec(x);}return y;}function u(x,y){if(!q.hasOwnProperty(x)){var z=s(x),aa=r(z);q[x]={value:x,flatValue:z,tokens:t(aa),isPrefixQuery:aa&&aa[aa.length-1]!=' '};}if(y&&typeof q[x].sortedTokens=='undefined'){q[x].sortedTokens=q[x].tokens.slice();q[x].sortedTokens.sort(function(ba,ca){return ca.length-ba.length;});}return q[x];}function v(x,y,z){var aa=u(y,x=='prefix'),ba=x=='prefix'?aa.sortedTokens:aa.tokens,ca=u(z).tokens,da={},ea=aa.isPrefixQuery&&x=='query'?ba.length-1:null,fa=function(ga,ha){for(var ia=0;ia<ca.length;++ia){var ja=ca[ia];if(!da[ia]&&(ja==ga||(x=='query'&&ha===ea||x=='prefix')&&ja.indexOf(ga)===0))return da[ia]=true;}return false;};return Boolean(ba.length&&ba.every(fa));}var w={flatten:s,parse:u,getPunctuation:k,isExactMatch:v.bind(null,'exact'),isQueryMatch:v.bind(null,'query'),isPrefixMatch:v.bind(null,'prefix'),tokenize:t};f.exports=w;},null);
__d('UnicodeCJK',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();'use strict';var h='a-zA-Z',i='\uFF21-\uFF3A\uFF41-\uFF5A',j=h+i,k='\u3040-\u309F',l='\u30A0-\u30FF',m='\u31F0-\u31FF',n='\uFF65-\uFF9F',o=l+m+n,p=k+o,q=[12352,12447],r=[12448,12543],s=r[0]-q[0],t='\u4E00-\u9FCF',u='\u3400-\u4DBF',v=t+u,w='\uAC00-\uD7AF',x=v+p+w,y=null,z=null,aa=null,ba=null;function ca(ka){z=z||new RegExp('['+p+']');return z.test(ka);}function da(ka){y=y||new RegExp('['+v+']');return y.test(ka);}function ea(ka){aa=aa||new RegExp('['+x+']');return aa.test(ka);}function fa(ka){var la=ka.charCodeAt(0);return String.fromCharCode(la<q[0]||la>q[1]?la:la+s);}function ga(ka){if(!ca(ka))return ka;return ka.split('').map(fa).join('');}function ha(ka){ba=ba||new RegExp('^'+'['+p+']+'+'['+j+']'+'$');return ba.test(ka);}function ia(ka){if(ha(ka))return ka.substr(0,ka.length-1);return ka;}var ja={hasKana:ca,hasIdeograph:da,hasIdeoOrSyll:ea,hiraganaToKatakana:ga,isKanaWithTrailingLatin:ha,kanaRemoveTrailingLatin:ia};f.exports=ja;},null);
__d('UnicodeHangulKorean',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();'use strict';var h=/[\u3130-\u318F\uAC00-\uD7AF]/;function i(ba){return h.test(ba);}var j=[4352,4353,4522,4354,4524,4525,4355,4356,4357,4528,4529,4530,4531,4532,4533,4378,4358,4359,4360,4385,4361,4362,4363,4364,4365,4366,4367,4368,4369,4370,4449,4450,4451,4452,4453,4454,4455,4456,4457,4458,4459,4460,4461,4462,4463,4464,4465,4466,4467,4468,4469,4448,4372,4373,4551,4552,4556,4558,4563,4567,4569,4380,4573,4575,4381,4382,4384,4386,4387,4391,4393,4395,4396,4397,4398,4399,4402,4406,4416,4423,4428,4593,4594,4439,4440,4441,4484,4485,4488,4497,4498,4500,4510,4513],k=12593,l=j.length,m=k+l;function n(ba){return String.fromCharCode(j[ba-k]);}var o=4352,p=4449,q=4519,r=44032,s=19,t=21,u=28,v=t*u,w=s*v,x=r+w;function y(ba){var ca=ba-r,da=ca%u;return String.fromCharCode(o+ca/v)+String.fromCharCode(p+ca%v/u)+(da>0?String.fromCharCode(q+da):'');}function z(ba){if(!i(ba))return ba;var ca=[];for(var da=0;da<ba.length;da++){var ea=ba.charAt(da),fa=ea.charCodeAt(0);ca.push(k<=fa&&fa<m?n(fa):r<=fa&&fa<x?y(fa):ea);}return ca.join('');}var aa={toConjoiningJamo:z};f.exports=aa;},null);
__d('UnicodeMatch',['UnicodeHangulKorean','UnicodeCJK','invariant','createObjectFrom','mapObject'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();'use strict';var m=['prefix_hangul_conjoining_jamo','prefix_kana_drop_trailing_latin','prefix_kana_hiragana_to_katakana'];function n(o){this.config=k(m,false);this.setConfigs(o||{});}n.prototype.setConfigs=function(o){l(o,(function(p,q){return this.setConfig(q,p);}).bind(this),this);};n.prototype.setConfig=function(o,p){!(o in this.config)?j(0):undefined;this.config[o]=p;};n.prototype.prefixMatchPrepare=function(o){if(o){if(this.config.prefix_hangul_conjoining_jamo)o=h.toConjoiningJamo(o);if(this.config.prefix_kana_drop_trailing_latin)o=i.kanaRemoveTrailingLatin(o);if(this.config.prefix_kana_hiragana_to_katakana)o=i.hiraganaToKatakana(o);}return o;};n.prototype.prefixMatch=function(o,p){o=this.prefixMatchPrepare(o);p=this.prefixMatchPrepare(p);return o.startsWith(p);};f.exports=n;},null);
__d('DataSource',['ArbiterMixin','AsyncRequest','TokenizeUtil','UnicodeMatch','createArrayFromMixed','createObjectFrom','emptyFunction','mixin','str2rstr'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r;q=babelHelpers.inherits(s,o(h));r=q&&q.prototype;function s(t){'use strict';r.constructor.call(this);this._maxResults=t.maxResults||10;this.token=t.token;this.queryData=t.queryData||{};this.queryEndpoint=t.queryEndpoint||'';this.bootstrapData=t.bootstrapData||{};this.bootstrapEndpoint=t.bootstrapEndpoint||'';this._indexedFields=t.indexedFields||['text','tokens'];this._titleFields=t.titleFields||[];this._alwaysPrefixMatch=t.alwaysPrefixMatch||false;this._deduplicationKey=t.deduplicationKey||null;this._enabledLocalCache=t.enabledLocalCache!=null?t.enabledLocalCache:true;this._enabledQueryCache=t.enabledQueryCache!=null?t.enabledQueryCache:true;this._disableAllCaches=t.disableAllCaches!=null?t.disableAllCaches:false;this._enabledMergeUids=t.enabledMergeUids!=null?t.enabledMergeUids:false;this._queryExactMatch=t.queryExactMatch||false;this._acrossTransitions=t.acrossTransitions||false;this._minQueryLength=t.minQueryLength||-1;this._enforceNewRequestIDUponFetch=t.enforceNewRequestIDUponFetch||false;this._minExactMatchLength=4;this._filters=[];this.setExclusions(t.exclusions);this.backendUnicodeMatch=new k({prefix_kana_hiragana_to_katakana:!!t.kanaNormalization});this.cacheUnicodeMatch=new k({prefix_kana_hiragana_to_katakana:!!t.kanaNormalization});}s.prototype.init=function(){'use strict';this.init=n;this._fields=m(this._indexedFields);this._activeQueries=0;this.dirty();};s.prototype.dirty=function(){'use strict';this.value='';this._bootstrapped=false;this._bootstrapping=false;this._data={};this.localCache={};this.queryCache={};this.queryIDs={};this.inform('dirty',{});return this;};s.prototype.bootstrap=function(){'use strict';var t=arguments.length<=0||arguments[0]===undefined?false:arguments[0];if(this._bootstrapped&&!t)return;this.bootstrapWithoutToken();this._bootstrapped=true;this._bootstrapping=true;this.inform('bootstrap',{bootstrapping:true});};s.prototype.bootstrapWithoutToken=function(){'use strict';this.fetch(this.bootstrapEndpoint,this.bootstrapData,{bootstrap:true,token:this.token});};s.prototype.bootstrapWithToken=function(){'use strict';var t=babelHelpers._extends({},this.bootstrapData);t.token=this.token;this.fetch(this.bootstrapEndpoint,t,{bootstrap:true,replaceCache:true,value:''});};s.prototype.query=function(t,u,v,w,x){'use strict';this.inform('beforeQuery',babelHelpers._extends({value:t,local_only:u,exclusions:v,time_waited:w},x));var y=Date.now();if(this._disableAllCaches){this.dirty();if(!t){this.bootstrap();return true;}}else if(!this._enabledQueryCache){this.queryCache={};this.queryIDs={};}var z=this.buildUids(t,[],v),aa=this.respond(t,z);this.value=t;this.inform('query',babelHelpers._extends({value:t,results:aa},x));var ba=this.tokenizeBackend(t).flatValue;if(u||!ba||this._isQueryTooShort(ba)||!this.queryEndpoint||this.getQueryCache().hasOwnProperty(ba)||!this.shouldFetchMoreResults(aa)){this.inform('logPerformanceTiming',babelHelpers._extends({field:'cache_keypress_render',value:Date.now()-y},x));this.inform('completeCacheFetch');return false;}this.inform('queryEndpoint',babelHelpers._extends({value:t},x));this.fetch(this.queryEndpoint,this.getQueryData(t,z),babelHelpers._extends({value:t,exclusions:v},x));return true;};s.prototype._isQueryTooShort=function(t){'use strict';return t.length<this._minQueryLength;};s.prototype._tokenize=function(t,u){'use strict';return j.parse(t,u);};s.prototype.tokenizeBackend=function(t,u){'use strict';t=this.backendUnicodeMatch.prefixMatchPrepare(t);return this._tokenize(t,u);};s.prototype.tokenizeCache=function(t,u){'use strict';t=this.cacheUnicodeMatch.prefixMatchPrepare(t);return this._tokenize(t,u);};s.prototype.shouldFetchMoreResults=function(t){'use strict';return t.length<this._maxResults;};s.prototype.getQueryData=function(t,u){'use strict';var v=babelHelpers._extends({value:t},this.queryData);u=u||[];if(u.length)v.existing_ids=u.join(',');if(this._bootstrapping)v.bsp=true;return v;};s.prototype.setQueryData=function(t,u){'use strict';if(u)this.queryData={};Object.assign(this.queryData,t);return this;};s.prototype.setBootstrapData=function(t,u){'use strict';if(u)this.bootstrapData={};Object.assign(this.bootstrapData,t);return this;};s.prototype.getExclusions=function(){'use strict';return l(this._exclusions);};s.prototype.setExclusions=function(t){'use strict';this._exclusions=t?t.map(String):[];};s.prototype.addFilter=function(t){'use strict';var u=this._filters;u.push(t);return {remove:function(){u.splice(u.indexOf(t),1);}};};s.prototype.clearFilters=function(){'use strict';this._filters=[];};s.prototype.notify=function(t,u,v,w){'use strict';var x=this.buildData(u);this.inform('notify',{value:t,results:x,isAsync:!!v,rootid:w});return x;};s.prototype.respond=function(t,u,v){'use strict';var w=this.buildData(u);this.processResults(t,w,v);this.inform('respond',{value:t,results:w,isAsync:!!v});return w;};s.prototype.respondWithResults=function(t,u,v){'use strict';this.processResults(t,u,v);this.inform('respond',{value:t,results:u,isAsync:!!v});return u;};s.prototype.processResults=function(t,u,v){'use strict';if(this.bootstrapData.alwaysShowEcho){var w=-1;for(var x=0;x<u.length;++x)if(u[x].text.toLowerCase()===t.toLowerCase()){w=x;break;}var y={};if(w===-1){y={bootstrapped:false,index:0,query:t,render_type:'hashtag',text:t,type:'hashtag',uid:this.getUniqueID()};u.map(function(z){z.index+=1;});u.unshift(y);}else if(w>0){y=u.splice(w,1)[0];u.unshift(y);u.map(function(z,aa){z.index=aa;});}}};s.prototype.getUniqueID=function(){'use strict';var t='_'+Math.random().toString(36).substr(2,9);while(this._data[t]!==undefined)t='_'+Math.random().toString(36).substr(2,9);return t;};s.prototype.fetch=function(t,u,v){'use strict';if(!t)return;if(this._enforceNewRequestIDUponFetch||u.request_id===undefined){u.request_id=this._guid();v.request_id=u.request_id;}var w=new i().setURI(t).setData(u).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(this._acrossTransitions).setHandler((function(x){this.fetchHandler(x,v||{});}).bind(this));if(t===this.queryEndpoint)w.setFinallyHandler((function(){this._activeQueries--;if(!this._activeQueries)this.inform('activity',{activity:false});}).bind(this));w.setErrorHandler((function(x){return this.asyncErrorHandler(x,v);}).bind(this));this.inform('beforeFetch',{request:w,fetch_context:v});w.send();if(t===this.queryEndpoint){if(!this._activeQueries)this.inform('activity',{activity:true});this._activeQueries++;}};s.prototype.fetchHandler=function(t,u){'use strict';var v=u.value,w=u.exclusions;if(t.getPayload().requestID!==undefined)u.request_id=t.getPayload().requestID;var x=this.getQueryIDs(),y=this.tokenizeBackend(v||'').flatValue;x[y]=u.request_id;if(!v&&u.replaceCache)this.localCache={};this.inform('buildQueryCache',{});var z=t.getPayload().entries;this.addEntries(z,v);this.inform('fetchComplete',{entries:z,response:t,value:v,fetch_context:u});var aa=!v&&this.value?this.value:v;this.respond(aa,this.buildUids(aa,[],w),true);if(!v){if(this._bootstrapping){this._bootstrapping=false;this.inform('bootstrap',{bootstrapping:false});}if(u.token&&t.getPayload().token!==u.token)this.bootstrapWithToken();}};s.prototype.addEntries=function(t,u){'use strict';var v=this.processEntries(l(t||[]),u),w=v;if(this._enabledMergeUids)w=this.buildUids(u,v);if(u){var x=this.getQueryCache(),y=this.tokenizeBackend(u).flatValue;x[y]=w;}else this.fillCache(w);return v;};s.prototype.processEntries=function(t,u){'use strict';return t.map(function(v,w){var x=v.uid=v.uid+'',y=this.getEntry(x);if(!y){y=v;y.query=u;y.bootstrapped=!u;this.setEntry(x,y);}else Object.assign(y,v);this.processEntry(y,u);y.index===undefined&&(y.index=w);return x;},this);};s.prototype.processEntry=function(t,u){'use strict';};s.prototype.getAllEntries=function(){'use strict';return this._data||{};};s.prototype.getEntry=function(t){'use strict';return this._data[t]||null;};s.prototype.setEntry=function(t,u){'use strict';this._data[t]=u;};s.prototype.fillCache=function(t){'use strict';if(!this._enabledLocalCache)return;var u=this.localCache;t.forEach(function(v){var w=this.getEntry(v);if(!w)return;var x=this.tokenizeCache(this.getTextToIndex(w)).tokens;for(var y=0,z=x.length;y<z;++y){var aa=x[y];if(!u.hasOwnProperty(aa))u[aa]={};u[aa][v]=true;}},this);};s.prototype.getTextToIndex=function(t){'use strict';if(t.textToIndex&&!t.needs_update)return t.textToIndex;t.needs_update=false;t.textToIndex=this.getTextToIndexFromFields(t,this._indexedFields);return t.textToIndex;};s.prototype.getTextToIndexFromFields=function(t,u){'use strict';var v=[];for(var w=0;w<u.length;++w){var x=t[u[w]];if(x)v.push(x.join?x.join(' '):x);}return v.join(' ');};s.prototype.mergeUids=function(t,u,v,w){'use strict';this.inform('mergeUids',{local_uids:t,query_uids:u,new_uids:v,value:w});this._checkExtendedMatch(w,t);return this.deduplicateByKey(t.sort(this.bootstrapSort.bind(this)).concat(u,v));};s.prototype.bootstrapSort=function(t,u){'use strict';var v=this.getEntry(t),w=this.getEntry(u);if(v.extended_match!==w.extended_match)return v.extended_match?1:-1;if(v.index!==w.index)return v.index-w.index;if(v.text.length!==w.text.length)return v.text.length-w.text.length;if(v.text===w.text)return v.uid<w.uid?-1:1;return v.text<w.text?-1:1;};s.prototype._checkExtendedMatch=function(t,u){'use strict';var v=this._alwaysPrefixMatch?j.isPrefixMatch:j.isQueryMatch;for(var w=0;w<u.length;++w){var x=this.getEntry(u[w]);x.extended_match=x.tokens?!v(t,x.text):false;}};s.prototype.buildUids=function(t,u,v){'use strict';if(!u)u=[];if(!t)return u;if(!v)v=[];var w=this.buildCacheResults(t,this.localCache),x=this.buildQueryResults(t),y=this.mergeUids(w,x,u,t),z=m(v.concat(this._exclusions)),aa=y.filter(function(ba){if(z.hasOwnProperty(ba)||!this.getEntry(ba))return false;for(var ca=0;ca<this._filters.length;++ca)if(!this._filters[ca](this.getEntry(ba),t))return false;return z[ba]=true;},this);return this.uidsIncludingExact(t,aa);};s.prototype.uidsIncludingExact=function(t,u){'use strict';var v=u.length;if(v<=this._maxResults||p(t).length<this._minExactMatchLength)return u;for(var w=0;w<v;++w){var x=this.getEntry(u[w]);x.text_lower||(x.text_lower=x.text.toLowerCase());if(x.text_lower===this.tokenizeCache(t).flatValue){if(w>=this._maxResults){var y=u.splice(w,1)[0];u.splice(this._maxResults-1,0,y);}break;}}return u;};s.prototype.buildData=function(t){'use strict';var u=[],v=Math.min(t.length,this._maxResults);for(var w=0;w<v;++w)u.push(this.getEntry(t[w]));return u;};s.prototype.findBestPreviousQuery=function(t,u){'use strict';var v=0,w=null;if(this._queryExactMatch)return u.hasOwnProperty(t)?t:null;for(var x in u)if(t.indexOf(x)===0&&x.length>v){v=x.length;w=x;}return w;};s.prototype.findQueryCache=function(t){'use strict';var u=this.findBestPreviousQuery(t,this.getQueryCache());return this.getQueryCache()[u]||[];};s.prototype.buildQueryResults=function(t){'use strict';var u=this.tokenizeBackend(t).flatValue,v=this.findQueryCache(u);if(this.getQueryCache().hasOwnProperty(u))return v;var w=this.filterQueryResults(u,v);return w;};s.prototype.filterQueryResults=function(t,u){'use strict';var v=this._alwaysPrefixMatch?j.isPrefixMatch:j.isQueryMatch;return u.filter(function(w){return v(t,this.getTextToIndex(this.getEntry(w)));},this);};s.prototype.buildCacheResults=function(t,u){'use strict';var v=this.tokenizeCache(t,this._alwaysPrefixMatch),w=this._alwaysPrefixMatch?v.sortedTokens:v.tokens,x=w.length,y=v.isPrefixQuery?x-1:null,z={},aa={},ba={},ca=[],da=false,ea={},fa=0;for(var ga=0;ga<x;++ga){var ha=w[ga];if(!ea.hasOwnProperty(ha)){fa++;ea[ha]=true;}else continue;for(var ia in u)if(!z.hasOwnProperty(ia)&&ia===ha||(this._alwaysPrefixMatch||y===ga)&&this.cacheUnicodeMatch.prefixMatch(ia,ha)){if(ia===ha){if(aa.hasOwnProperty(ia))da=true;z[ia]=true;}else{if(z.hasOwnProperty(ia)||aa.hasOwnProperty(ia))da=true;aa[ia]=true;}for(var ja in u[ia])if(ga===0||ba.hasOwnProperty(ja)&&ba[ja]==fa-1)ba[ja]=fa;}}for(var ka in ba)if(ba[ka]==fa)ca.push(ka);if(da||fa<x)ca=this.filterQueryResults(t,ca);if(this._titleFields&&this._titleFields.length>0)ca=this.filterNonTitleMatchQueryResults(t,ca);return ca;};s.prototype.filterNonTitleMatchQueryResults=function(t,u){'use strict';return u.filter(function(v){var w=this.tokenizeCache(t),x=w.tokens.length;if(x===0)return true;var y=this.getTitleTerms(this.getEntry(v)),z=w.tokens[0];return x===1||this._alwaysPrefixMatch?j.isPrefixMatch(z,y)||this.cacheUnicodeMatch.prefixMatch(y,z):j.isQueryMatch(z,y);},this);};s.prototype.getTitleTerms=function(t){'use strict';if(!t.titleToIndex)t.titleToIndex=this.getTextToIndexFromFields(t,this._titleFields);return t.titleToIndex;};s.prototype.deduplicateByKey=function(t){'use strict';if(!this._deduplicationKey)return t;var u=m(t.map(this._getDeduplicationKey.bind(this)),t);return t.filter((function(v){return u[this._getDeduplicationKey(v)]==v;}).bind(this));};s.prototype._getDeduplicationKey=function(t){'use strict';var u=this.getEntry(t);if(u[this._deduplicationKey]){return u[this._deduplicationKey]+'';}else return '__'+t+'__';};s.prototype.getQueryCache=function(){'use strict';return this.queryCache;};s.prototype.getQueryIDs=function(){'use strict';return this.queryIDs;};s.prototype.setMaxResults=function(t){'use strict';this._maxResults=t;this.value&&this.respond(this.value,this.buildUids(this.value));};s.prototype.getMaxResults=function(){'use strict';return this._maxResults;};s.prototype.updateToken=function(t){'use strict';this.token=t;this.dirty();return this;};s.prototype._guid=function(){'use strict';var t=Date.now(),u='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(v){var w=Math.floor((t+Math.random()*16)%16);t=Math.floor(t/16);var x=(v=='x'?w:w&7|8).toString(16);return x;});return u;};Object.assign(s.prototype,{events:['bootstrap','query','respond'],asyncErrorHandler:n});f.exports=s;},null);
__d('MultiBootstrapDataSource',['DataSource'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;i=babelHelpers.inherits(k,h);j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this,l);this._bootstrapEndpoints=l.bootstrapEndpoints;}k.prototype.bootstrapWithoutToken=function(){'use strict';for(var l=0;l<this._bootstrapEndpoints.length;l++)this.fetch(this._bootstrapEndpoints[l].endpoint,this._bootstrapEndpoints[l].data||{},{bootstrap:true});};f.exports=k;},null);
__d('XHPTemplate',['DataStore','DOM','HTML'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m){'use strict';this._model=m;}k.prototype.render=function(){'use strict';if(j.isHTML(this._model))this._model=i.setContent(document.createDocumentFragment(),this._model)[0];return this._model.cloneNode(true);};k.prototype.build=function(){'use strict';return new l(this.render());};k.getNode=function(m,n){'use strict';return k.getNodes(m)[n];};k.getNodes=function(m){'use strict';var n=h.get(m,'XHPTemplate:nodes');if(!n){n={};var o=i.scry(m,'[data-jsid]');o.push(m);var p=o.length;while(p--){var q=o[p];n[q.getAttribute('data-jsid')]=q;q.removeAttribute('data-jsid');}h.set(m,'XHPTemplate:nodes',n);}return n;};function l(m){'use strict';this._root=m;this._populateNodes();}l.prototype._populateNodes=function(){'use strict';this._nodes={};this._leaves={};var m=this._root.getElementsByTagName('*');for(var n=0,o=m.length;n<o;n++){var p=m[n],q=p.getAttribute('data-jsid');if(q){p.removeAttribute('data-jsid');this._nodes[q]=p;this._leaves[q]=!p.childNodes.length;}}};l.prototype.getRoot=function(){'use strict';return this._root;};l.prototype.getNode=function(m){'use strict';return this._nodes[m];};l.prototype.setNodeProperty=function(m,n,o){'use strict';this.getNode(m)[n]=o;return this;};l.prototype.setNodeContent=function(m,n){'use strict';if(!this._leaves[m])throw new Error("Can't setContent on non-leaf node: "+m);i.setContent(this.getNode(m),n);return this;};f.exports=k;},null);